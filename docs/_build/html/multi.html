

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Multiple Jurisdictions &mdash; RKnot  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"TeX": {"equationNumbers": {"autoNumber": "AMS", "useLabelIds": true}}, "tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Dynamic Transmission Risk" href="load.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> RKnot
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">ARCHITECTURE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Viral Spread Theory in RKnot</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Key Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="sizing.html">Sizing</a></li>
</ul>
<p class="caption"><span class="caption-text">SIMULATIONS</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="hit.html">SIR: Factors Influencing Spread</a></li>
<li class="toctree-l1"><a class="reference internal" href="load.html">Dynamic Transmission Risk</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Multiple Jurisdictions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Mixed">Mixed</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Borders">Borders</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Border-Crossings">Border Crossings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Crossings-with-Event-Access">Crossings with Event Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Care-Homes">Care Homes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Care-Homes---10Max">Care Homes - 10Max</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Care-Homes---25Max">Care Homes - 25Max</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Care-Homes---Uncoordinated">Care Homes - Uncoordinated</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">RKnot</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Multiple Jurisdictions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/multi.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Multiple-Jurisdictions">
<h1>Multiple Jurisdictions<a class="headerlink" href="#Multiple-Jurisdictions" title="Permalink to this headline">¶</a></h1>
<p>With our credible model for dynamic transmission at the contact level and our ability to size environments with approriate contact distributions, we can show the true power of <strong>RKnot</strong> in modelling complex scenarios.</p>
<p>We <a class="reference internal" href="load.html#Capacity-Restriction"><span class="std std-ref">have previously shown</span></a> that contact restrictions and social distancing in any one community <em>should</em> be effective in eliminating <code class="docutils literal notranslate"><span class="pre">sars-cov-2</span></code> relatively quickly. Across the world, howvever, many states, provinces, and countries, have experienced second and third waves spaced out months apart despite various forms of strict quarantines and lockdowns.</p>
<p>So why haven’t they been effective?</p>
<p>In part, this has resulted from the many exceptions made to these restrictions, in particular, <a class="reference internal" href="load.html#Schools"><span class="std std-ref">schools remaining open</span></a> in many jurisdictions.</p>
<p>We must also consider the impact of multiple jurisdictions that have unique characteristics, set policy independently, and, importantly, allow travel between them.</p>
<p>We will focus on two jurisdictions to start, building to four, and building in complexity along the way.</p>
<div class="section" id="Mixed">
<h2>Mixed<a class="headerlink" href="#Mixed" title="Permalink to this headline">¶</a></h2>
<p>To start, we will simply double the size of the environment used in <a class="reference internal" href="load.html"><span class="doc">our dynamic transmission risk models</span></a>. Thus,</p>
<ul class="simple">
<li><p>n = 20,000 and 4 initial infections</p></li>
<li><p>8 groups, split evenly into two states: “East State” and “West State”</p></li>
<li><p>the states will be exact reflections of each other:</p>
<ul>
<li><p>same size, n = 10,000</p></li>
<li><p>2 initial infections each</p></li>
<li><p>same demographic mix</p></li>
<li><p>same number of events</p></li>
</ul>
</li>
<li><p>the event structrue for each state is detailed in <a class="reference internal" href="sizing.html#Complex-Environments"><span class="std std-ref">Sizing</span></a> (and imported from a pickled object as per below).</p></li>
<li><p>each state will have its own vbox. The <code class="docutils literal notranslate"><span class="pre">East</span> <span class="pre">State</span></code> vbox must be reassigned and the events adjusted to point to the correct groups.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>

<span class="kn">from</span> <span class="nn">rknot</span> <span class="kn">import</span> <span class="n">Sim</span><span class="p">,</span> <span class="n">Chart</span>
<span class="kn">from</span> <span class="nn">rknot.events</span> <span class="kn">import</span> <span class="n">Restriction</span><span class="p">,</span> <span class="n">Quarantine</span>
<span class="kn">from</span> <span class="nn">rknot.dots.fhutch</span> <span class="kn">import</span> <span class="n">tmr</span>
<span class="kn">from</span> <span class="nn">rknot.sims</span> <span class="kn">import</span> <span class="n">us_w_load_18</span><span class="o">.</span><span class="n">events</span>

<span class="n">group1</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;W0-19&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2700</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.00003</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">98</span><span class="p">)</span>
<span class="n">group2</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;W20-49&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">4100</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.0002</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">98</span><span class="p">)</span>
<span class="n">group3</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;W50-69&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2300</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.005</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">98</span><span class="p">)</span>
<span class="n">group4</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;W70+&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">900</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.054</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">98</span><span class="p">)</span>
<span class="n">wstate</span> <span class="o">=</span> <span class="p">[</span><span class="n">group1</span><span class="p">,</span> <span class="n">group2</span><span class="p">,</span> <span class="n">group3</span><span class="p">,</span> <span class="n">group4</span><span class="p">]</span>

<span class="n">wbox</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;W Main&#39;</span><span class="p">,</span> <span class="s1">&#39;box&#39;</span><span class="p">:</span> <span class="mi">344</span><span class="p">}</span>
<span class="n">wevents</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">us_w_load_18</span><span class="o">.</span><span class="n">events</span><span class="p">)</span>
<span class="n">wrsxns</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">us_w_load_18</span><span class="o">.</span><span class="n">rsxns</span><span class="p">)</span>

<span class="n">group5</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;E0-19&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2700</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.00003</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">98</span><span class="p">)</span>
<span class="n">group6</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;E20-49&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">4100</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.0002</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">98</span><span class="p">)</span>
<span class="n">group7</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;E50-69&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2300</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.005</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">98</span><span class="p">)</span>
<span class="n">group8</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;E70+&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">900</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.054</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">98</span><span class="p">)</span>
<span class="n">estate</span> <span class="o">=</span>  <span class="p">[</span><span class="n">group5</span><span class="p">,</span> <span class="n">group6</span><span class="p">,</span> <span class="n">group7</span><span class="p">,</span> <span class="n">group8</span><span class="p">]</span>

<span class="n">ebox</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;E Main&#39;</span><span class="p">,</span> <span class="s1">&#39;box&#39;</span><span class="p">:</span> <span class="mi">344</span><span class="p">}</span>
<span class="n">eevents</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">us_w_load_18</span><span class="o">.</span><span class="n">events</span><span class="p">)</span>

<span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">eevents</span><span class="p">:</span>
    <span class="n">e</span><span class="o">.</span><span class="n">groups</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">]</span>
    <span class="n">e</span><span class="o">.</span><span class="n">vbox</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">groups</span> <span class="o">=</span> <span class="n">wstate</span> <span class="o">+</span> <span class="n">estate</span>
<span class="n">vboxes</span> <span class="o">=</span> <span class="p">[</span><span class="n">wbox</span><span class="p">,</span> <span class="n">ebox</span><span class="p">]</span>
<span class="n">events</span> <span class="o">=</span> <span class="n">wevents</span> <span class="o">+</span> <span class="n">eevents</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;groups&#39;</span><span class="p">:</span> <span class="n">groups</span><span class="p">,</span> <span class="s1">&#39;density&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;days&#39;</span><span class="p">:</span> <span class="mi">365</span><span class="p">,</span> <span class="s1">&#39;tmr_curve&#39;</span><span class="p">:</span> <span class="n">tmr</span><span class="p">,</span>
    <span class="s1">&#39;vboxes&#39;</span><span class="p">:</span> <span class="n">vboxes</span><span class="p">,</span> <span class="s1">&#39;events&#39;</span><span class="p">:</span> <span class="n">events</span>
<span class="p">}</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>Below, we show the arrangement of all of the dots mixed throughout the space. The only difference from the single jurisdiction structure is the presence of two vboxes (instead of one).</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/multi/mixed_agg_dots_only.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
<p>On a proportionate basis, this structure is indistinguishable from the n=10,000, 4 group structure used in the viral load simulations. And it should result in the same outbreak curve, on average.</p>
<p>To test, we ran 50 sims for a quick comparison to the base <a class="reference internal" href="load.html#Events"><span class="std std-ref">Events</span></a> structure that we are building from.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Mixed<br>$R_0$>0</th><th class="results-table" style="text-align: center;">Events<br>w Load<br>$R_0$>0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n, $R_0$ > 0</td><td class="results-table" style="text-align: center;">28</td><td class="results-table" style="text-align: center;">68</td></tr><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">50</td><td class="results-table" style="text-align: center;">250</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">23.5%</td><td class="results-table" style="text-align: center;">32.7%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">38.0%</td><td class="results-table" style="text-align: center;">40.6%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">53.3%</td><td class="results-table" style="text-align: center;">51.5%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.32%</td><td class="results-table" style="text-align: center;">0.30%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">51.3%</td><td class="results-table" style="text-align: center;">6.5%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.60%</td><td class="results-table" style="text-align: center;">0.60%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">95</td><td class="results-table" style="text-align: center;">74</td></tr></tbody></table></div>
</div>
<p>As expected, we can see above that, on average, the spread results generated in this structure match those of the <a class="reference internal" href="load.html#Events"><span class="std std-ref">Events structure</span></a> from the viral load analysis. Notice, however, that an outbreak (<span class="math notranslate nohighlight">\(R_0\)</span> &gt; 0) occured much more frequently: 56% vs. 27%. This is likely a result of the greater number of initial infections (4 vs. 2).</p>
<p>Also notice that the average Peak is lower and Days to Peak higher in our new scenario despite all other metrics being the same.</p>
<p>In the distribution below, we can see that, in this scenario, more simulations result in outbreaks, but when they do, they concentrated around the same level of total infection.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/multi_9_0.png" src="_images/multi_9_0.png" />
</div>
</div>
<p>We can see this in the sample simulation below:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/multi/mixed_agg.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
<p>Above, we can see a “wave” effect occuring with two peaks forming, the first around 70 days and second around 115 days. We can seperate the curve among the constituent states to see how each state’s curve might have added to the aggregate.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/multi/mixed_peaks.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
<p>From above, we can see that what looked like a single curve and a single outbreak was, in fact, two outbreaks among the two “states”, West and East.</p>
<p>Remarkably, the dots from both states are free to mix in the main grid. The separate waves result simply from isolated event spaces where only the largest events (3+ capacity) occur within the state groups.</p>
<p>Next we will show the impact of further isolating the two states.</p>
</div>
<hr class="docutils" />
<div class="section" id="Borders">
<h2>Borders<a class="headerlink" href="#Borders" title="Permalink to this headline">¶</a></h2>
<p>Now we split the environment into two halves, separating the subjects of the West and East states by a border.</p>
<p>They cannot interact in any way.</p>
<p>This can be accomplished by simply assign a separate box to the groups in each state, as per below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">wstate</span><span class="p">:</span>
    <span class="n">w</span><span class="p">[</span><span class="s1">&#39;box&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;bounds&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">144</span><span class="p">],</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;West State&#39;</span><span class="p">}</span>

<span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">estate</span><span class="p">:</span>
    <span class="n">e</span><span class="p">[</span><span class="s1">&#39;box&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;bounds&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">73</span><span class="p">,</span> <span class="mi">144</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">144</span><span class="p">],</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;East State&#39;</span><span class="p">}</span>

<span class="n">groups</span> <span class="o">=</span> <span class="n">wstate</span> <span class="o">+</span> <span class="n">estate</span>
<span class="n">params</span><span class="p">[</span><span class="s1">&#39;groups&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">groups</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">dotlog</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>This results in the environment shown below:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/multi/split_agg_dots_only.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
<p>We ran 50 simulations to compare with the Mixed environment:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Borders<br>$R_0$>0</th><th class="results-table" style="text-align: center;">Mixed<br>$R_0$>0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n, $R_0$ > 0</td><td class="results-table" style="text-align: center;">26</td><td class="results-table" style="text-align: center;">28</td></tr><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">50</td><td class="results-table" style="text-align: center;">50</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">19.1%</td><td class="results-table" style="text-align: center;">23.5%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">25.0%</td><td class="results-table" style="text-align: center;">38.0%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">31.5%</td><td class="results-table" style="text-align: center;">53.3%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.20%</td><td class="results-table" style="text-align: center;">0.32%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">50.8%</td><td class="results-table" style="text-align: center;">51.3%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.61%</td><td class="results-table" style="text-align: center;">0.60%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">78</td><td class="results-table" style="text-align: center;">95</td></tr></tbody></table></div>
</div>
<p>We can see:</p>
<ul class="simple">
<li><p>an outbreak occurs with about the same frequency; likely b/c both environments have the same number of initial infections</p></li>
<li><p>the size of the outbreaks is significantly lower in the split environment</p></li>
<li><p>the peaks are significantly lower in the split environment</p></li>
</ul>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div class="admonition note"><p class="admonition-title fa fa-exclamation-circle">Contact Mix</p><p>Importantly, doubling the number of subjects does <em>not</em> change the number of contacts. Instead, it changes <em>who</em> is contacted. And so when the environment is split and the contact mix becomes more heterogeneous, spread is curtailed.</p></div></div>
</div>
<p>Again, we see below that the contact distribution of the Borders environment is quite different from the Mixed environment.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/multi_24_0.png" src="_images/multi_24_0.png" />
</div>
</div>
<p>Here, the same number of outbreaks occur, but the virus cannot cross the border so at worst it can only spread amongst half the population. As a result, we see two local peaks form, representing when an outbreak occurs in only one state or in both.</p>
<p>In a uniform environment, there are only two outcomes:</p>
<ol class="arabic simple">
<li><p>Peak</p></li>
<li><p>No Peak</p></li>
</ol>
<p>When we split the space, there are now 4 distinct possible outcomes:</p>
<ol class="arabic simple">
<li><p>No Peaks</p></li>
<li><p>One Peak: West</p></li>
<li><p>One Peak: East</p></li>
<li><p>Two Peaks</p></li>
</ol>
<p>We can even get a quick sense for how often these different outcomes might occur, as per below.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div class="row" style="width=100%; display: flex; align-items: center; justify-content: center;"><div class="column" style="flex: 33.33%"><img src="https://storage.googleapis.com/rknotvids/multi/imgs/split-pickled_peakpie.png" style="width:100%"></div><div class="column" style="flex: 33.33%;"><table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">No <br> Peak</th><th class="results-table" style="text-align: center;">West <br> Peak</th><th class="results-table" style="text-align: center;">East <br> Peak</th><th class="results-table" style="text-align: center;">Double <br> Peak</th></tr></thead><tbody><tr><td class="results-table">Number of <br>Occurences<td class="results-table" style="text-align: center;">24</td><td class="results-table" style="text-align: center;">11</td><td class="results-table" style="text-align: center;">10</td><td class="results-table" style="text-align: center;">5</td></tr></tbody></table></div></div></div>
</div>
<p>As per the piechart above,only 10% of outbreaks resulted in a Double Peak, while more than 40% resulted in an outbreak in either state. Both states were equally likely to have an outbreak on their own.</p>
<p>Below we see a representative simulation that evidences the border separating the two states. We can also see in the grid on the left that the outbreak was entirely isolated to the West state and did <em>not</em> seep into the East state at all. This resulted in the shorter, more muted peak.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/multi/split_agg.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
<p>Finally, we also show a typical Double Peak scenario:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/multi/split_double_tots.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
<p>Here we see both states develop outbreaks <em>independently</em> and simultaneously, both with very similar spread curves, peaking just after 60 days and reaching ~17% peaks. The aggregate curve is inline with expectations for a well-mixed environment.</p>
</div>
<hr class="docutils" />
<div class="section" id="Border-Crossings">
<h2>Border Crossings<a class="headerlink" href="#Border-Crossings" title="Permalink to this headline">¶</a></h2>
<p>Now that we have controlled borders between isolated states, we can explore the impact of border crossings on spread.</p>
<p>To do so, we will create Travel events allowing subjects from each state to cross over into the other state, as follows:</p>
<ul class="simple">
<li><p>total of 20 crossings per day</p>
<ul>
<li><p>10 crossings per day West to East</p></li>
<li><p>10 crossings per day East to West</p></li>
</ul>
</li>
<li><p>each group will have equal likelihood to participate in the crossings</p></li>
</ul>
<p>The crossing amount was roughly determined based on international travel statistics out of the US:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://travel.trade.gov/view/m-2019-O-001/index.html">~100MM travellers annually from the US to other countries</a></p></li>
<li><p><a class="reference external" href="https://www.trade.gov/visitor-arrivals-program-i-94-data">~90MM visits from other countries annually</a></p></li>
<li><p>we have assumed 100MM for reach version.</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}\\
\frac{\text{100MM visitors annually}}{\text{330MM actual population}} *
\frac{\text{10,000 pop}}{\text{state}} = \frac{\text{3,031 sim visitors annually}}{\text{state}}
\\\;
\\\frac{\text{3,031 sim visitors}}{\text{365 days}} = \textit{9 visitors } \text{per day per state}\end{split}\]</div>
<p>To do this, we will create 8 random locations for each event (within each state’s box), then assign them to our 8 travel events.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot.events</span> <span class="kn">import</span> <span class="n">Travel</span>

<span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">19</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">ys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">w_locs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>

<span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">74</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">ys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">e_locs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>

<span class="n">crosses</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">):</span>
    <span class="n">crosses</span> <span class="o">+=</span> <span class="p">[</span><span class="n">Travel</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;WtoE_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="n">w_locs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">1</span>
    <span class="p">)]</span>
    <span class="n">crosses</span> <span class="o">+=</span> <span class="p">[</span><span class="n">Travel</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;EtoW_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="n">e_locs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">1</span>
    <span class="p">)]</span>
<span class="n">params</span><span class="p">[</span><span class="s1">&#39;events&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">crosses</span>
</pre></div>
</div>
<p>The results of 50 simulations are shown below:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Border<br>Crossings<br>$R_0$>0</th><th class="results-table" style="text-align: center;">Borders<br>$R_0$>0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n, $R_0$ > 0</td><td class="results-table" style="text-align: center;">17</td><td class="results-table" style="text-align: center;">26</td></tr><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">50</td><td class="results-table" style="text-align: center;">50</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">17.6%</td><td class="results-table" style="text-align: center;">19.1%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">23.5%</td><td class="results-table" style="text-align: center;">25.0%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">32.7%</td><td class="results-table" style="text-align: center;">31.5%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.19%</td><td class="results-table" style="text-align: center;">0.20%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">51.6%</td><td class="results-table" style="text-align: center;">50.8%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.55%</td><td class="results-table" style="text-align: center;">0.61%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">78</td><td class="results-table" style="text-align: center;">78</td></tr></tbody></table></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/multi_37_0.png" src="_images/multi_37_0.png" />
</div>
</div>
<p>We see only a limited impact from border travel as constructed. The structure actually resulted in fewer outbreaks and resulted in similar single and double peak occurences.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div class="row" style="width=100%; display: flex; align-items: center; justify-content: center;"><div class="column" style="flex: 33.33%"><img src="https://storage.googleapis.com/rknotvids/multi/imgs/border_crossing-pickled_peakpie.png" style="width:100%"></div><div class="column" style="flex: 33.33%;"><table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">No <br> Peak</th><th class="results-table" style="text-align: center;">West <br> Peak</th><th class="results-table" style="text-align: center;">East <br> Peak</th><th class="results-table" style="text-align: center;">Double <br> Peak</th></tr></thead><tbody><tr><td class="results-table">Number of <br>Occurences<td class="results-table" style="text-align: center;">32</td><td class="results-table" style="text-align: center;">6</td><td class="results-table" style="text-align: center;">7</td><td class="results-table" style="text-align: center;">5</td></tr></tbody></table></div></div></div>
</div>
<p>Below we show a typical Double Peak outcome. The outbreak is almost entirely extinguished and in decline in the East state, but then spread takes hold <em>independently</em> in the West State and creates a second peak.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/multi/border_crossing_tots.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="Crossings-with-Event-Access">
<h2>Crossings with Event Access<a class="headerlink" href="#Crossings-with-Event-Access" title="Permalink to this headline">¶</a></h2>
<p>The above simulation has major omission. Each traveller only visits the other state for a single tick, only ever land on a single location in the other state’s main grid, and so have almost no contact with anyone while travelling.</p>
<p>In reality, travellers often have extended stays of 3/5/7/15/30+ days and, while in the other jurisidiction, they often attend events / have contacts in that jurisdiction like any other local person.</p>
<p>We can mimick this more realistic mixing approach by utilizing the <code class="docutils literal notranslate"><span class="pre">MultiTravel</span></code> event object. This object also a travel event greater than a single tick and allows any participants to attend events in their new region.</p>
<p>We must also implementing a few changes to the existing events. Each event will now pull participants from its own main grid as well as any box created to support cross border travel into the state.</p>
<p>We assume:</p>
<ul class="simple">
<li><p>9 visits per day per state, consistent with the prior scenario</p></li>
<li><p>Respective durations of the 9 visits:</p>
<ul>
<li><p>4 visits are for 3 days</p></li>
<li><p>3 visits are for 5 days</p></li>
<li><p>1 visits is for 7 days</p></li>
<li><p>1 visit is for 11 days</p></li>
</ul>
</li>
</ul>
<p>The code looks like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot.events</span> <span class="kn">import</span> <span class="n">MultiTravel</span>

<span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;events&#39;</span><span class="p">]:</span>
    <span class="n">e</span><span class="o">.</span><span class="n">groups</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;W&#39;</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
        <span class="n">e</span><span class="o">.</span><span class="n">from_boxes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;West State&#39;</span><span class="p">,</span> <span class="s1">&#39;EtoW&#39;</span><span class="p">]</span>
        <span class="n">e</span><span class="o">.</span><span class="n">no_events</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="s1">&#39;E&#39;</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
        <span class="n">e</span><span class="o">.</span><span class="n">from_boxes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;East State&#39;</span><span class="p">,</span> <span class="s1">&#39;WtoE&#39;</span><span class="p">]</span>
        <span class="n">e</span><span class="o">.</span><span class="n">no_events</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<p>With the existing events restructured, we assign each event to locations in their box at random.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n_cross</span> <span class="o">=</span> <span class="mi">9</span>
<span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">19</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">n_cross</span><span class="p">)</span>
<span class="n">ys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">n_cross</span><span class="p">)</span>
<span class="n">w_locs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>

<span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">74</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">n_cross</span><span class="p">)</span>
<span class="n">ys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">n_cross</span><span class="p">)</span>
<span class="n">e_locs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>

<span class="n">crosses</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">dur</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n_cross</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">11</span><span class="p">)):</span>
    <span class="n">crosses</span> <span class="o">+=</span> <span class="p">[</span><span class="n">MultiTravel</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;WtoE_</span><span class="si">{</span><span class="n">dur</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="n">e_locs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="n">dur</span>
    <span class="p">)]</span>
    <span class="n">crosses</span> <span class="o">+=</span> <span class="p">[</span><span class="n">MultiTravel</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;EtoW_</span><span class="si">{</span><span class="n">dur</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="n">w_locs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="n">dur</span>
    <span class="p">)]</span>

<span class="n">params</span><span class="p">[</span><span class="s1">&#39;events&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">crosses</span>
</pre></div>
</div>
<p>50 iterations of the above scenario lead to the following:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Crossings<br>w Events<br>$R_0$>0</th><th class="results-table" style="text-align: center;">Mixed<br>$R_0$>0</th><th class="results-table" style="text-align: center;">Crossings<br>$R_0$>0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n, $R_0$ > 0</td><td class="results-table" style="text-align: center;">21</td><td class="results-table" style="text-align: center;">28</td><td class="results-table" style="text-align: center;">17</td></tr><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">52</td><td class="results-table" style="text-align: center;">50</td><td class="results-table" style="text-align: center;">50</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">23.4%</td><td class="results-table" style="text-align: center;">23.5%</td><td class="results-table" style="text-align: center;">17.6%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">35.6%</td><td class="results-table" style="text-align: center;">38.0%</td><td class="results-table" style="text-align: center;">23.5%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">51.8%</td><td class="results-table" style="text-align: center;">53.3%</td><td class="results-table" style="text-align: center;">32.7%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.33%</td><td class="results-table" style="text-align: center;">0.32%</td><td class="results-table" style="text-align: center;">0.19%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">49.3%</td><td class="results-table" style="text-align: center;">51.3%</td><td class="results-table" style="text-align: center;">51.6%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.64%</td><td class="results-table" style="text-align: center;">0.60%</td><td class="results-table" style="text-align: center;">0.55%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">86</td><td class="results-table" style="text-align: center;">95</td><td class="results-table" style="text-align: center;">78</td></tr></tbody></table></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/multi_47_0.png" src="_images/multi_47_0.png" />
</div>
</div>
<p>Incredibly, we see that just 10 border crossings per day with travellers mixing normally leads to (almost) the same the results as though there were no border at all.</p>
<p>We can also see that the peak distribution has inverted almost completely. Now a Double Peak event is far more likely than a single peak in either state.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div class="row" style="width=100%; display: flex; align-items: center; justify-content: center;"><div class="column" style="flex: 33.33%"><img src="https://storage.googleapis.com/rknotvids/multi/imgs/border_crossing_multi_peakpie.png" style="width:100%"></div><div class="column" style="flex: 33.33%;"><table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">No <br> Peak</th><th class="results-table" style="text-align: center;">Single <br> Peak</th><th class="results-table" style="text-align: center;">Double <br> Peak</th></tr></thead><tbody><tr><td class="results-table">Number of <br>Occurences<td class="results-table" style="text-align: center;">31</td><td class="results-table" style="text-align: center;">1</td><td class="results-table" style="text-align: center;">20</td></tr></tbody></table></div></div></div>
</div>
<p>We can use some additional tools to confirm that mixing between the states was in fact the culprit in increased prevalence of double peaks. The easiest way is to find simulations where a state reaches <em>zero</em> infections, effectively eradicating the virus in prior scenarios, only to have the virus re-emerge.</p>
<p>This can <em>ONLY</em> occur if the virus was transported in from the other state.</p>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "ec302a2119d84ebcb46da0fef6721d41", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

{0: &#39;East&#39;, 17: &#39;East&#39;, 21: &#39;West&#39;, 43: &#39;West&#39;, 45: &#39;East&#39;}
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
The above tool tells us that in *5* simulations a state inherited an infection *after* it had already eradicated the virus.</div>
</div>
<p>It also tells us the index position of those states in our grouping of simulations. We will isolate simulation # 21, where West State inherited an outbreak.</p>
<p>We can isolate the specific subject that carried the virus.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sim</span> <span class="o">=</span> <span class="n">xesims</span><span class="p">[</span><span class="mi">21</span><span class="p">]</span>
<span class="n">id_groups</span> <span class="o">=</span> <span class="p">[</span><span class="n">westids</span><span class="p">,</span> <span class="n">eastids</span><span class="p">]</span>
<span class="n">west_inf</span><span class="p">,</span> <span class="n">east_inf</span> <span class="o">=</span> <span class="n">find_group_infs</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">id_groups</span><span class="p">,</span> <span class="n">westids</span><span class="p">,</span> <span class="n">eastids</span><span class="p">)</span>
<span class="n">westtrim</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">trim_zeros</span><span class="p">(</span><span class="n">west_inf</span><span class="p">,</span> <span class="s1">&#39;fb&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Above is the number of current infections in the West State at each tick during the simulation. We can clearly see an <em>entire 14-day period</em> during that simulation where the West State had <em>zero</em> infections.</p>
<p>Then, on Tick 44, a single new infection emerges. We can easily isolate which subject was infected.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">rknot.dots</span> <span class="kn">import</span> <span class="n">MATRIX_COL_LABELS</span> <span class="k">as</span> <span class="n">ML</span>
<span class="n">erads</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argwhere</span><span class="p">(</span><span class="n">westtrim</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">i_erad</span> <span class="o">=</span> <span class="n">erads</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

<span class="n">dots</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">dotlog</span><span class="p">[</span><span class="n">i_erad</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">westmask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">dots</span><span class="p">[:,</span> <span class="n">ML</span><span class="p">[</span><span class="s1">&#39;group_id&#39;</span><span class="p">]],</span> <span class="n">westids</span><span class="p">)</span>
<span class="n">west</span> <span class="o">=</span> <span class="n">dots</span><span class="p">[</span><span class="n">westmask</span><span class="p">]</span>
<span class="n">west</span><span class="p">[</span><span class="n">west</span><span class="p">[:,</span> <span class="n">ML</span><span class="p">[</span><span class="s1">&#39;is_inf&#39;</span><span class="p">]]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([[  5210,      1,      1,      0,      0,      1,      1,  15569,
           109,     18,  15569,    109,     18,      1,      2,      0,
        224729,      5,     98,    100,     20,     44,     -1,     75,
           441,      1,      1]], dtype=int32)
</pre></div></div>
</div>
<p>The array above shows the state of subject 5210 as of Tick 44. We can expand the dot matrix to ticks both before and after to get a sense of this subjects movement.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">id_new</span> <span class="o">=</span> <span class="n">west</span><span class="p">[</span><span class="n">west</span><span class="p">[:,</span> <span class="n">ML</span><span class="p">[</span><span class="s1">&#39;is_inf&#39;</span><span class="p">]]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">dottrace</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">dotlog</span><span class="p">[</span><span class="n">i_erad</span> <span class="o">-</span> <span class="mi">4</span> <span class="p">:</span> <span class="n">i_erad</span> <span class="o">+</span> <span class="mi">4</span><span class="p">,</span> <span class="n">id_new</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>We can take the array above and put it in a table for easier viewing:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ticks</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">i_erad</span> <span class="o">-</span> <span class="mi">4</span><span class="p">,</span> <span class="n">i_erad</span> <span class="o">+</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">dtrace</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">28</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
<span class="n">dtrace</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ticks</span>
<span class="n">dtrace</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span> <span class="o">=</span> <span class="n">dottrace</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<style>
.nb-hlite {
    background-color: #ec838a;
}
</style>
<table class="results-table"><thead><tr><th>tick</th><th>id</th><th>group_id</th><th>is_inf</th><th>x</th><th>y</th><th>homex</th><th>homey</th><th>event_id</th></tr></thead><tbody><tr><td class="results-table">40</td><td class="results-table" style="text-align: center;">5210</td><td class="results-table" style="text-align: center;">1</td><td class="results-table" style="text-align: center;">0</td><td class="results-table" style="text-align: center;">18</td><td class="results-table" style="text-align: center;">138</td><td class="results-table" style="text-align: center;">54</td><td class="results-table" style="text-align: center;">105</td><td class="results-table" style="text-align: center;">35205</td></tr><tr><td class="results-table">41</td><td class="results-table" style="text-align: center;">5210</td><td class="results-table" style="text-align: center;">1</td><td class="results-table" style="text-align: center;">0</td><td class="results-table" style="text-align: center;">54</td><td class="results-table" style="text-align: center;">105</td><td class="results-table" style="text-align: center;">54</td><td class="results-table" style="text-align: center;">105</td><td class="results-table" style="text-align: center;">-1</td></tr><tr><td class="results-table">42</td><td class="results-table" style="text-align: center;">5210</td><td class="results-table" style="text-align: center;">1</td><td class="results-table" style="text-align: center;">0</td><td class="results-table" style="text-align: center;">54</td><td class="results-table" style="text-align: center;">105</td><td class="results-table" style="text-align: center;">54</td><td class="results-table" style="text-align: center;">105</td><td class="results-table" style="text-align: center;">-1</td></tr><tr><td class="results-table">43</td><td class="results-table" style="text-align: center;">5210</td><td class="results-table" style="text-align: center;">1</td><td class="results-table" style="text-align: center;">0</td><td class="results-table" style="text-align: center;">54</td><td class="results-table" style="text-align: center;">105</td><td class="results-table" style="text-align: center;">109</td><td class="results-table" style="text-align: center;">18</td><td class="results-table" style="text-align: center;">224729</td></tr><tr><td class="results-table nb-hlite">44</td><td class="results-table nb-hlite" style="text-align: center;">5210</td><td class="results-table nb-hlite" style="text-align: center;">1</td><td class="results-table nb-hlite" style="text-align: center;">0</td><td class="results-table nb-hlite" style="text-align: center;">128</td><td class="results-table nb-hlite" style="text-align: center;">139</td><td class="results-table nb-hlite" style="text-align: center;">109</td><td class="results-table nb-hlite" style="text-align: center;">18</td><td class="results-table nb-hlite" style="text-align: center;">214892</td></tr><tr><td class="results-table nb-hlite">45</td><td class="results-table nb-hlite" style="text-align: center;">5210</td><td class="results-table nb-hlite" style="text-align: center;">1</td><td class="results-table nb-hlite" style="text-align: center;">1</td><td class="results-table nb-hlite" style="text-align: center;">109</td><td class="results-table nb-hlite" style="text-align: center;">18</td><td class="results-table nb-hlite" style="text-align: center;">109</td><td class="results-table nb-hlite" style="text-align: center;">18</td><td class="results-table nb-hlite" style="text-align: center;">224729</td></tr><tr><td class="results-table">46</td><td class="results-table" style="text-align: center;">5210</td><td class="results-table" style="text-align: center;">1</td><td class="results-table" style="text-align: center;">1</td><td class="results-table" style="text-align: center;">54</td><td class="results-table" style="text-align: center;">105</td><td class="results-table" style="text-align: center;">54</td><td class="results-table" style="text-align: center;">105</td><td class="results-table" style="text-align: center;">-1</td></tr><tr><td class="results-table">47</td><td class="results-table" style="text-align: center;">5210</td><td class="results-table" style="text-align: center;">1</td><td class="results-table" style="text-align: center;">1</td><td class="results-table" style="text-align: center;">54</td><td class="results-table" style="text-align: center;">105</td><td class="results-table" style="text-align: center;">54</td><td class="results-table" style="text-align: center;">105</td><td class="results-table" style="text-align: center;">-1</td></tr></tbody></table></div>
</div>
<p>From the table above we can see the following:</p>
<ul class="simple">
<li><p>Subject 5210 was inside the West State box and <em>not infected</em> in the days prior to Tick 44.</p></li>
<li><p>On Tick 42, the subject travelled to East State via 3-day <code class="docutils literal notranslate"><span class="pre">MultiTravel</span></code> event.</p></li>
<li><p>On Tick 43, the subject attended an event at location (128, 139), where it was infected.</p></li>
<li><p>On Tick 45, the subject returned to West State and is at least partly responsible for the re-emergence of the virus in that state.</p></li>
</ul>
<p>We can even confirm this visually by isolating that specific dot in the animation by passing <code class="docutils literal notranslate"><span class="pre">highlight=[5210]</span></code> at the Chart instantiation. We also slowed down the frame rate. You can see at Tick 44, the subject jumps from West to East and back very quickly.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">highlight</span><span class="o">=</span><span class="p">[</span><span class="mi">5210</span><span class="p">],</span> <span class="n">show_intro</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">show_restricted</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/multi/border_crossing_multi_SAMPLE_21_dots.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/multi/border_crossing_multi_SAMPLE_21_tots.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
<p>Finally above, we show the full outcome of the sim, which pesents almost as a single prolonged peak.</p>
</div>
<hr class="docutils" />
<div class="section" id="Care-Homes">
<h2>Care Homes<a class="headerlink" href="#Care-Homes" title="Permalink to this headline">¶</a></h2>
<p>With a few modifications, we can incorporate features of the <a class="reference internal" href="load.html#Care-Homes"><span class="std std-ref">Care Home</span></a> to further increase realism.</p>
<p>Again, we simply double the number of groups, double the number of events, and assign a set of cross border events. In this sim, the <code class="docutils literal notranslate"><span class="pre">70+G</span></code> group in each state is restricted from cross border travel.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>

<span class="kn">from</span> <span class="nn">rknot</span> <span class="kn">import</span> <span class="n">Sim</span><span class="p">,</span> <span class="n">Chart</span>
<span class="kn">from</span> <span class="nn">rknot.events</span> <span class="kn">import</span> <span class="n">Restriction</span><span class="p">,</span> <span class="n">Quarantine</span><span class="p">,</span> <span class="n">Travel</span><span class="p">,</span> <span class="n">MultiTravel</span>
<span class="kn">from</span> <span class="nn">rknot.dots.fhutch</span> <span class="kn">import</span> <span class="n">tmr</span>
<span class="kn">from</span> <span class="nn">rknot.sims</span> <span class="kn">import</span> <span class="n">us_w_load_18</span>

<span class="n">group1</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;W0-19&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2700</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.00003</span><span class="p">,</span> <span class="n">mover</span><span class="o">=</span><span class="mf">0.982</span><span class="p">)</span>
<span class="n">group2a</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;W20-49&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">4034</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.0002</span><span class="p">,</span> <span class="n">mover</span><span class="o">=</span><span class="mf">0.982</span><span class="p">)</span>
<span class="n">group2b</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;WCHW&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">66</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.0002</span><span class="p">,</span> <span class="n">mover</span><span class="o">=</span><span class="mf">0.982</span><span class="p">)</span>
<span class="n">group3</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;W50-69&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2300</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.005</span><span class="p">,</span> <span class="n">mover</span><span class="o">=</span><span class="mf">0.982</span><span class="p">)</span>
<span class="n">group4a</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;W70+&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.042</span><span class="p">,</span> <span class="n">mover</span><span class="o">=</span><span class="mf">0.982</span><span class="p">)</span>
<span class="n">group4b</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;W70+G&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.0683</span><span class="p">,</span> <span class="n">mover</span><span class="o">=</span><span class="s1">&#39;local&#39;</span><span class="p">)</span>

<span class="n">wstate</span> <span class="o">=</span> <span class="p">[</span><span class="n">group1</span><span class="p">,</span> <span class="n">group2a</span><span class="p">,</span> <span class="n">group2b</span><span class="p">,</span> <span class="n">group3</span><span class="p">,</span> <span class="n">group4a</span><span class="p">,</span> <span class="n">group4b</span><span class="p">]</span>

<span class="n">group5</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;E0-19&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2700</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.00003</span><span class="p">,</span> <span class="n">mover</span><span class="o">=</span><span class="mf">0.982</span><span class="p">)</span>
<span class="n">group6a</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;E20-49&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">4034</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.0002</span><span class="p">,</span> <span class="n">mover</span><span class="o">=</span><span class="mf">0.982</span><span class="p">)</span>
<span class="n">group6b</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;ECHW&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">66</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.0002</span><span class="p">,</span> <span class="n">mover</span><span class="o">=</span><span class="mf">0.982</span><span class="p">)</span>
<span class="n">group7</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;E50-69&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2300</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.005</span><span class="p">,</span> <span class="n">mover</span><span class="o">=</span><span class="mf">0.982</span><span class="p">)</span>
<span class="n">group8a</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;E70+&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.042</span><span class="p">,</span> <span class="n">mover</span><span class="o">=</span><span class="mf">0.982</span><span class="p">)</span>
<span class="n">group8b</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;E70+G&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.0683</span><span class="p">,</span> <span class="n">mover</span><span class="o">=</span><span class="s1">&#39;local&#39;</span><span class="p">)</span>
<span class="n">estate</span> <span class="o">=</span>  <span class="p">[</span><span class="n">group5</span><span class="p">,</span> <span class="n">group6a</span><span class="p">,</span> <span class="n">group6b</span><span class="p">,</span> <span class="n">group7</span><span class="p">,</span> <span class="n">group8a</span><span class="p">,</span> <span class="n">group8b</span><span class="p">]</span>

<span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">wstate</span><span class="p">:</span>
    <span class="n">w</span><span class="p">[</span><span class="s1">&#39;box&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;bounds&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">144</span><span class="p">],</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;West State&#39;</span><span class="p">}</span>
<span class="n">group4b</span><span class="p">[</span><span class="s1">&#39;box&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>

<span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">estate</span><span class="p">:</span>
    <span class="n">e</span><span class="p">[</span><span class="s1">&#39;box&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;bounds&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">73</span><span class="p">,</span> <span class="mi">144</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">144</span><span class="p">],</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;East State&#39;</span><span class="p">}</span>
<span class="n">group8b</span><span class="p">[</span><span class="s1">&#39;box&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">139</span><span class="p">,</span><span class="mi">144</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>

<span class="n">groups</span> <span class="o">=</span> <span class="n">wstate</span> <span class="o">+</span> <span class="n">estate</span>

<span class="n">wbox</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;W Main&#39;</span><span class="p">,</span> <span class="s1">&#39;box&#39;</span><span class="p">:</span> <span class="mi">344</span><span class="p">}</span>
<span class="n">ebox</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;E Main&#39;</span><span class="p">,</span> <span class="s1">&#39;box&#39;</span><span class="p">:</span> <span class="mi">344</span><span class="p">}</span>

<span class="n">wevents</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">us_w_load_18</span><span class="o">.</span><span class="n">events_gated</span><span class="p">)</span>
<span class="n">eevents</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">us_w_load_18</span><span class="o">.</span><span class="n">events_gated</span><span class="p">)</span>

<span class="c1"># Care Home Events</span>
<span class="n">i_ch</span> <span class="o">=</span> <span class="o">-</span><span class="mi">34</span>
<span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">wevents</span><span class="p">[</span><span class="n">i_ch</span><span class="p">:]:</span>
    <span class="n">w</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;W_</span><span class="si">{</span><span class="n">w</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span>

<span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">eevents</span><span class="p">[</span><span class="n">i_ch</span><span class="p">:]:</span>
    <span class="n">e</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;E_</span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span>

<span class="c1"># Main Events</span>
<span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">wevents</span><span class="p">[:</span><span class="n">i_ch</span><span class="p">]:</span>
    <span class="n">w</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;W</span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="n">w</span><span class="o">.</span><span class="n">from_boxes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;West State&#39;</span><span class="p">,</span> <span class="s1">&#39;EtoW&#39;</span><span class="p">]</span>
    <span class="n">e</span><span class="o">.</span><span class="n">groups</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
    <span class="n">e</span><span class="o">.</span><span class="n">no_events</span> <span class="o">=</span> <span class="kc">False</span>

<span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">eevents</span><span class="p">[:</span><span class="n">i_ch</span><span class="p">]:</span>
    <span class="n">e</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;W</span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="n">e</span><span class="o">.</span><span class="n">from_boxes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;East State&#39;</span><span class="p">,</span> <span class="s1">&#39;WtoE&#39;</span><span class="p">]</span>
    <span class="n">e</span><span class="o">.</span><span class="n">vbox</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">e</span><span class="o">.</span><span class="n">groups</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
    <span class="n">e</span><span class="o">.</span><span class="n">no_events</span> <span class="o">=</span> <span class="kc">False</span>

<span class="n">groups</span> <span class="o">=</span> <span class="n">wstate</span> <span class="o">+</span> <span class="n">estate</span>
<span class="n">vboxes</span> <span class="o">=</span> <span class="p">[</span><span class="n">wbox</span><span class="p">,</span> <span class="n">ebox</span><span class="p">]</span>
<span class="n">events</span> <span class="o">=</span> <span class="n">wevents</span> <span class="o">+</span> <span class="n">eevents</span>

<span class="c1"># Add border crossings</span>
<span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">19</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">ys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">w_locs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>

<span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">74</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">ys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">e_locs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>

<span class="n">crosses</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">rec</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">)):</span>
    <span class="n">crosses</span> <span class="o">+=</span> <span class="p">[</span><span class="n">MultiTravel</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;WtoE_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="n">e_locs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="n">rec</span>
    <span class="p">)]</span>
    <span class="n">crosses</span> <span class="o">+=</span> <span class="p">[</span><span class="n">MultiTravel</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;EtoW_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="n">w_locs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="n">rec</span>
    <span class="p">)]</span>

<span class="n">events_ch</span> <span class="o">+=</span> <span class="n">crosses</span>
<span class="n">rsxns</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">quars</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">params_ch</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;groups&#39;</span><span class="p">:</span> <span class="n">groups</span><span class="p">,</span> <span class="s1">&#39;density&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;days&#39;</span><span class="p">:</span> <span class="mi">365</span><span class="p">,</span>
    <span class="s1">&#39;tmr_curve&#39;</span><span class="p">:</span> <span class="n">tmr</span><span class="p">,</span> <span class="s1">&#39;vboxes&#39;</span><span class="p">:</span> <span class="n">vboxes</span><span class="p">,</span>
    <span class="s1">&#39;events&#39;</span><span class="p">:</span> <span class="n">events_ch</span><span class="p">,</span> <span class="s1">&#39;rsxns&#39;</span><span class="p">:</span> <span class="n">rsxns</span><span class="p">,</span> <span class="s1">&#39;quars&#39;</span><span class="p">:</span> <span class="n">quars</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Care Homes<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">Crossings<br>$R_0$ > 0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n, $R_0$ > 0</td><td class="results-table" style="text-align: center;">29</td><td class="results-table" style="text-align: center;">21</td></tr><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">60</td><td class="results-table" style="text-align: center;">52</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">26.1%</td><td class="results-table" style="text-align: center;">23.4%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">37.6%</td><td class="results-table" style="text-align: center;">35.6%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">55.3%</td><td class="results-table" style="text-align: center;">51.8%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.40%</td><td class="results-table" style="text-align: center;">0.33%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">42.3%</td><td class="results-table" style="text-align: center;">49.3%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.73%</td><td class="results-table" style="text-align: center;">0.64%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">84</td><td class="results-table" style="text-align: center;">86</td></tr></tbody></table></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/multi_71_0.png" src="_images/multi_71_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div class="row" style="width=100%; display: flex; align-items: center; justify-content: center;"><div class="column" style="flex: 33.33%"><img src="https://storage.googleapis.com/rknotvids/multi/imgs/carehomes-pickled_peakpie.png" style="width:100%"></div><div class="column" style="flex: 33.33%;"><table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">No <br> Peak</th><th class="results-table" style="text-align: center;">Single <br> Peak</th><th class="results-table" style="text-align: center;">Double <br> Peak</th></tr></thead><tbody><tr><td class="results-table">Number of <br>Occurences<td class="results-table" style="text-align: center;">31</td><td class="results-table" style="text-align: center;">0</td><td class="results-table" style="text-align: center;">29</td></tr></tbody></table></div></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/multi/carehomes_tots.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
<hr class="docutils" />
<div class="section" id="Care-Homes---10Max">
<h3>Care Homes - 10Max<a class="headerlink" href="#Care-Homes---10Max" title="Permalink to this headline">¶</a></h3>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Care Homes<br>10Max<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">Care Homes<br>$R_0$ > 0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n, $R_0$ > 0</td><td class="results-table" style="text-align: center;">16</td><td class="results-table" style="text-align: center;">29</td></tr><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">48</td><td class="results-table" style="text-align: center;">60</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">4.9%</td><td class="results-table" style="text-align: center;">26.1%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">5.4%</td><td class="results-table" style="text-align: center;">37.6%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">5.5%</td><td class="results-table" style="text-align: center;">55.3%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.20%</td><td class="results-table" style="text-align: center;">0.40%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">45.0%</td><td class="results-table" style="text-align: center;">42.3%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">3.60%</td><td class="results-table" style="text-align: center;">0.73%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">52</td><td class="results-table" style="text-align: center;">84</td></tr></tbody></table></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/multi_77_0.png" src="_images/multi_77_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div class="row" style="width=100%; display: flex; align-items: center; justify-content: center;"><div class="column" style="flex: 33.33%"><img src="https://storage.googleapis.com/rknotvids/multi/imgs/carehomes_10Max-pickled_peakpie.png" style="width:100%"></div><div class="column" style="flex: 33.33%;"><table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">No <br> Peak</th><th class="results-table" style="text-align: center;">Single <br> Peak</th><th class="results-table" style="text-align: center;">Double <br> Peak</th></tr></thead><tbody><tr><td class="results-table">Number of <br>Occurences<td class="results-table" style="text-align: center;">31</td><td class="results-table" style="text-align: center;">0</td><td class="results-table" style="text-align: center;">29</td></tr></tbody></table></div></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[72]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">IPython.core.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">HTML</span>
<span class="kn">from</span> <span class="nn">rknot.notebook</span> <span class="kn">import</span> <span class="n">animHTML</span>

<span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="n">animHTML</span><span class="p">(</span><span class="s1">&#39;multi/carehomes_10Max_tots&#39;</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/multi/carehomes_10Max_tots.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="Care-Homes---25Max">
<h3>Care Homes - 25Max<a class="headerlink" href="#Care-Homes---25Max" title="Permalink to this headline">¶</a></h3>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Care Homes<br>25Max<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">Care Homes<br>10Max<br>$R_0$ > 0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n, $R_0$ > 0</td><td class="results-table" style="text-align: center;">22</td><td class="results-table" style="text-align: center;">16</td></tr><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">50</td><td class="results-table" style="text-align: center;">48</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">8.1%</td><td class="results-table" style="text-align: center;">4.9%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">9.6%</td><td class="results-table" style="text-align: center;">5.4%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">11.3%</td><td class="results-table" style="text-align: center;">5.5%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.21%</td><td class="results-table" style="text-align: center;">0.20%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">47.2%</td><td class="results-table" style="text-align: center;">45.0%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">2.11%</td><td class="results-table" style="text-align: center;">3.60%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">67</td><td class="results-table" style="text-align: center;">52</td></tr></tbody></table></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/multi_83_0.png" src="_images/multi_83_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/multi/carehomes_25Max_tots.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="Care-Homes---Uncoordinated">
<h3>Care Homes - Uncoordinated<a class="headerlink" href="#Care-Homes---Uncoordinated" title="Permalink to this headline">¶</a></h3>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Care Homes<br>Uncoordinated<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">Care Homes<br>25Max<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">Care Homes<br>10Max<br>$R_0$ > 0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n, $R_0$ > 0</td><td class="results-table" style="text-align: center;">22</td><td class="results-table" style="text-align: center;">22</td><td class="results-table" style="text-align: center;">16</td></tr><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">50</td><td class="results-table" style="text-align: center;">50</td><td class="results-table" style="text-align: center;">48</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">7.7%</td><td class="results-table" style="text-align: center;">8.1%</td><td class="results-table" style="text-align: center;">4.9%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">9.8%</td><td class="results-table" style="text-align: center;">9.6%</td><td class="results-table" style="text-align: center;">5.4%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">11.8%</td><td class="results-table" style="text-align: center;">11.3%</td><td class="results-table" style="text-align: center;">5.5%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.22%</td><td class="results-table" style="text-align: center;">0.21%</td><td class="results-table" style="text-align: center;">0.20%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">37.8%</td><td class="results-table" style="text-align: center;">47.2%</td><td class="results-table" style="text-align: center;">45.0%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">2.67%</td><td class="results-table" style="text-align: center;">2.11%</td><td class="results-table" style="text-align: center;">3.60%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">61</td><td class="results-table" style="text-align: center;">67</td><td class="results-table" style="text-align: center;">52</td></tr></tbody></table></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/multi_88_0.png" src="_images/multi_88_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div class="row" style="width=100%; display: flex; align-items: center; justify-content: center;"><div class="column" style="flex: 33.33%"><img src="https://storage.googleapis.com/rknotvids/multi/imgs/carehome_async_restrict-pickled_peakpie.png" style="width:100%"></div><div class="column" style="flex: 33.33%;"><table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">No <br> Peak</th><th class="results-table" style="text-align: center;">Single <br> Peak</th><th class="results-table" style="text-align: center;">Double <br> Peak</th></tr></thead><tbody><tr><td class="results-table">Number of <br>Occurences<td class="results-table" style="text-align: center;">26</td><td class="results-table" style="text-align: center;">5</td><td class="results-table" style="text-align: center;">19</td></tr></tbody></table></div></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/multi/carehome_async_restrict_peaks.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="load.html" class="btn btn-neutral float-left" title="Dynamic Transmission Risk" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2021 Ryan Skene. All rights reserved.

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>