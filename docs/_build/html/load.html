

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Dynamic Transmission Risk &mdash; RKnot  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"TeX": {"equationNumbers": {"autoNumber": "AMS", "useLabelIds": true}}, "tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Multiple Jurisdictions" href="multi.html" />
    <link rel="prev" title="SIR: Factors Influencing Spread" href="hit.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> RKnot
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">ARCHITECTURE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Viral Spread Theory in RKnot</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Key Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="sizing.html">Sizing</a></li>
</ul>
<p class="caption"><span class="caption-text">SIMULATIONS</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="hit.html">SIR: Factors Influencing Spread</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Dynamic Transmission Risk</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Structure">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Events">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Care-Homes">Care Homes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Capacity-Restriction">Capacity Restriction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Capacity-Restrictions-with-Adherence">Capacity Restrictions with Adherence</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Social-Distancing">Social Distancing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Social-Distancing-with-Adherence">Social Distancing with Adherence</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Restrict-Elderly-Visits">Restrict Elderly Visits</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Schools">Schools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Capacity-Restriction-w-School-Exception">Capacity Restriction w School Exception</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Capacity-Restriction-w-School-Exception-and-Non-Compliance">Capacity Restriction w School Exception and Non-Compliance</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Separate-Restrictions-for-Schools">Separate Restrictions for Schools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="multi.html">Multiple Jurisdictions</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">RKnot</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Dynamic Transmission Risk</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/load.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Dynamic-Transmission-Risk">
<h1>Dynamic Transmission Risk<a class="headerlink" href="#Dynamic-Transmission-Risk" title="Permalink to this headline">¶</a></h1>
<div class="section" id="Structure">
<h2>Structure<a class="headerlink" href="#Structure" title="Permalink to this headline">¶</a></h2>
<p>In <a class="reference internal" href="hit.html"><span class="doc">SIR: Factors Influencing Spread</span></a>, we assumed a constant daily rate of transmission risk during the infectious period. This is in keeping with the SIR model, however, in reality we know that transmission risk is influenced by an infected person’s viral load, which is a dynamic property.</p>
<p>Here we will demonstrate how to incorporate dynamic transmission risk and compare its impact to the outcomes of the SIR simulations.</p>
<p>The model and parameters used in this scenario are derived from a paper from the <a class="reference external" href="https://www.medrxiv.org/content/10.1101/2020.08.07.20169920v3.full.pdf">Fred Hutchinson Cancer Research Center</a>, henceforth known as the Hutch model.</p>
<p>In particular, the Hutch model requires the following parameters in a Gamma-distributed contact regime:</p>
<ul class="simple">
<li><p>average of 4 contacts per day per subject, <span class="math notranslate nohighlight">\(\overline{k}\)</span></p></li>
<li><p>dispersion of 40, <span class="math notranslate nohighlight">\(\omega\)</span></p></li>
<li><p>These parameters should result in <span class="math notranslate nohighlight">\(R_0\)</span> 1.8.</p></li>
</ul>
<p>This is achieved using <a class="reference internal" href="concepts.html#Events"><span class="std std-ref">Events</span></a>. See <a class="reference internal" href="sizing.html#Complex-Environments"><span class="std std-ref">Sizing</span></a> for a detailed demonstration.</p>
<p>The group structure continues to be informed by <a class="reference external" href="https://www.cdc.gov/coronavirus/2019-ncov/hcp/planning-scenarios.html">CDC Best Planning Scenario</a> guidelines for IFR.</p>
<p>Other assumptions:</p>
<ul class="simple">
<li><p>Population of 10,000</p>
<ul>
<li><p>proportionately split among the 4 age groups to match <a class="reference external" href="https://www.census.gov/prod/cen2010/briefs/c2010br-03.pdf">US Census data</a>.</p></li>
</ul>
</li>
<li><p>Initial Infected of 2</p></li>
<li><p>Duration of Immunity 365 days</p></li>
<li><p>Density of 1 dot / location (excluding the vbox)</p></li>
<li><p>a collection of 9,142 separate events, each recurring every 30 days.</p></li>
</ul>
<p>The transmission risk curve used in these simulations is visualized below. See <a class="reference internal" href="theory.html#Dynamic-Transmission-Risk"><span class="std std-ref">Hutch Model</span></a> for the derivation.</p>
<p><img alt="Drawing" src="https://storage.googleapis.com/rknotvids/imgs/tmr_curve.png" /></p>
<hr class="docutils" />
<div id="1.-Events"></div></div>
<div class="section" id="Events">
<h2>Events<a class="headerlink" href="#Events" title="Permalink to this headline">¶</a></h2>
<p>Here we show the basic outcome of dynamic viral load in a gamma-distributed contacts environment.</p>
<p>The transmission curve has bee calculated separately and is available as <code class="docutils literal notranslate"><span class="pre">tmr</span></code> from the <code class="docutils literal notranslate"><span class="pre">rknot.dots.fhutch</span></code> module.</p>
<p>All of the 9,000+ events occur in the “Events” vbox. All events have capacities of 3 subjects or more.</p>
<p>Again, details on the event structure are found <a class="reference internal" href="sizing.html#Complex-Environments"><span class="std std-ref">here</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot</span> <span class="kn">import</span> <span class="n">Sim</span><span class="p">,</span> <span class="n">Chart</span>

<span class="kn">from</span> <span class="nn">rknot.dots.fhutch</span> <span class="kn">import</span> <span class="n">tmr</span>
<span class="kn">from</span> <span class="nn">rknot.sims.us_w_load_18</span> <span class="kn">import</span> <span class="n">events</span>

<span class="n">group1</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;0-19&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2700</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.00003</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">98</span><span class="p">)</span>
<span class="n">group2</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;20-49&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">4100</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.0002</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">98</span><span class="p">)</span>
<span class="n">group3</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;50-69&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2300</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.005</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">98</span><span class="p">)</span>
<span class="n">group4</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;70+&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">900</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.054</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">98</span><span class="p">)</span>

<span class="n">vbox</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="mi">344</span><span class="p">,</span> <span class="s1">&#39;box&#39;</span><span class="p">:</span> <span class="mi">344</span><span class="p">}</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;groups&#39;</span><span class="p">:</span> <span class="n">groups</span><span class="p">,</span> <span class="s1">&#39;density&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;days&#39;</span><span class="p">:</span> <span class="mi">365</span><span class="p">,</span> <span class="s1">&#39;tmr_curve&#39;</span><span class="p">:</span> <span class="n">tmr</span><span class="p">,</span> <span class="s1">&#39;vboxes&#39;</span><span class="p">:</span> <span class="n">vbox</span><span class="p">,</span> <span class="s1">&#39;events&#39;</span><span class="p">:</span> <span class="n">events</span><span class="p">}</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/us_w_load/events.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
<p>The results are:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Hutch</th><th class="results-table" style="text-align: center;">SIR</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">35.6%</td><td class="results-table" style="text-align: center;">29.0%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">42.4%</td><td class="results-table" style="text-align: center;">56.0%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">50.2%</td><td class="results-table" style="text-align: center;">82.0%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.30%</td><td class="results-table" style="text-align: center;">0.50%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">80.0%</td><td class="results-table" style="text-align: center;">39.0%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.60%</td><td class="results-table" style="text-align: center;">0.61%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">63</td><td class="results-table" style="text-align: center;">77</td></tr></tbody></table></div>
</div>
<p>The results relative to the <a class="reference internal" href="hit.html#5.-Events"><span class="std std-ref">SIR Events</span></a> simulation are lower across the board, which is mainly attributable to the lower <span class="math notranslate nohighlight">\(R_0\)</span> utilized. With <span class="math notranslate nohighlight">\(R_0\)</span> of 1.8, we would expect HIT of ~44%, which is close to the result here.</p>
<p>There are two other important differences:</p>
<ul class="simple">
<li><p>the peak occurs earlier</p></li>
<li><p>there is a narrower range between peak/hit/total infections</p></li>
</ul>
<p>These differences result for a couple reasons:</p>
<ol class="arabic simple">
<li><p>in the Hutch model used here, the infection duration is 30 days, double that used in SIR. Thus, as new infections occur, there are fewer recoveries.</p></li>
<li><p>while the infection duration is longer, the likelihood of infection is highly concentrated in the 3 to 5 day period of peak viral load. Thus, to achieve the same <span class="math notranslate nohighlight">\(R_0\)</span>, there must be more infections sooner. By the same token, as herd immunity is reached and more infections reach later life cycle, there are fewer infections to extend the tail.</p></li>
</ol>
<p>Fatality measures are inline with expectations from SIR model.</p>
<p>Using the <code class="docutils literal notranslate"><span class="pre">looper</span></code> function demonstrated in <a class="reference internal" href="sizing.html"><span class="doc">Sizing</span></a>, we can quickly generate a sample of simulations to determine patterns.</p>
<p>The table below shows the results of 250 iterations of this scenario:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Events</th><th class="results-table" style="text-align: center;">Events <br> $R_0$ > 0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">250</td><td class="results-table" style="text-align: center;">68</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">8.9%</td><td class="results-table" style="text-align: center;">32.7%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">11.1%</td><td class="results-table" style="text-align: center;">40.6%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">14.0%</td><td class="results-table" style="text-align: center;">51.5%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.08%</td><td class="results-table" style="text-align: center;">0.30%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">6.5%</td><td class="results-table" style="text-align: center;">6.5%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.55%</td><td class="results-table" style="text-align: center;">0.60%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">24</td><td class="results-table" style="text-align: center;">74</td></tr><tr><td class="results-table" style="text-align: left;">$R_0$ = 0</td><td class="results-table" style="text-align: center;">51.6%</td><td class="results-table" style="text-align: center;">0.0%</td></tr></tbody></table></div>
</div>
<p>The chart below shows the distribution of HIT for each of the 250 simulations. The vast majority of simulations resulted in no secondary infections (i.e. an outbreak never occured). Where an outbreak did take hold, outcomes centered around ~40% HIT.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/load_17_0.png" src="_images/load_17_0.png" />
</div>
</div>
<hr class="docutils" />
<div id="2.-Gates"></div></div>
<div class="section" id="Care-Homes">
<h2>Care Homes<a class="headerlink" href="#Care-Homes" title="Permalink to this headline">¶</a></h2>
<p>We replicate the <a class="reference internal" href="hit.html#6.-Gates"><span class="std std-ref">SIR Gates scenario</span></a> by creating a separate group of elderly isolated within a gate, intended to simulate care homes or assisted living centers.</p>
<p>One augmentation is made: a small group of care home workers are added that will reqularly enter the gate to service residents. The care home workers will be drawn from the <code class="docutils literal notranslate"><span class="pre">20-49</span></code> age group.</p>
<p>The new groups are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">group2b</span></code></p>
<ul>
<li><p>population of 66</p></li>
<li><p>Assuming <a class="reference external" href="http://phinational.org/wp-content/uploads/legacy/phi-home-care-workers-key-facts.pdf">2.2MM care home workers in the United States</a> out of a population of 330MM.</p></li>
<li><p>remaining attributes similar to <code class="docutils literal notranslate"><span class="pre">20-49</span></code></p></li>
<li><p>events individual travel events for half the group, recurring every day</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">group4a</span></code></p>
<ul>
<li><p>population of 600 (2/3s of <code class="docutils literal notranslate"><span class="pre">group4</span></code>)</p></li>
<li><p>IFR of 4.2%</p></li>
<li><p>remaining attributes mathcing prior <code class="docutils literal notranslate"><span class="pre">70+</span></code> group</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">group4b</span></code></p>
<ul>
<li><p>population of 300 (1/3rd of <code class="docutils literal notranslate"><span class="pre">group4</span></code>)</p></li>
<li><p>25 locations</p></li>
<li><p>IFR of 7.8%</p></li>
<li><p>‘local’ mover function</p></li>
<li><p>not eligible for any events</p></li>
</ul>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">group4b</span></code> used the <code class="docutils literal notranslate"><span class="pre">local</span></code> mover and its gated area has increased density. This is perhaps counter-intuitive. Care home residents are likely more well-mixed than the broader population and more closely follow normally-distributed contacts. So we approximate increased mixing with a higher <code class="docutils literal notranslate"><span class="pre">p-value</span></code>. Ideally, contact distribution in such environments would be researched for guidance.</p>
<p>The event vbox has been adjusted to include the 5 groups that are not gated.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot</span> <span class="kn">import</span> <span class="n">Sim</span><span class="p">,</span> <span class="n">Chart</span>
<span class="kn">from</span> <span class="nn">rknot.events</span> <span class="kn">import</span> <span class="n">Travel</span>
<span class="kn">from</span> <span class="nn">rknot.dots.fhutch</span> <span class="kn">import</span> <span class="n">tmr</span>

<span class="kn">from</span> <span class="nn">rknot.sims</span> <span class="kn">import</span> <span class="n">us_w_load_18</span>

<span class="n">group1</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;0-19&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2700</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.00003</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">98</span><span class="p">)</span>
<span class="n">group2a</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;20-49&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">4034</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.0002</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">98</span><span class="p">)</span>
<span class="n">group2b</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;HCW&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">66</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.0002</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">98</span><span class="p">)</span>
<span class="n">group3</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;50-69&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2300</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.005</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">98</span><span class="p">)</span>
<span class="n">group4a</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;70+&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.042</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">98</span><span class="p">)</span>
<span class="n">group4b</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;70+G&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.0683</span><span class="p">,</span> <span class="n">mover</span><span class="o">=</span><span class="s1">&#39;local&#39;</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="n">box_is_gated</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">groups</span> <span class="o">=</span> <span class="p">[</span><span class="n">group1</span><span class="p">,</span> <span class="n">group2a</span><span class="p">,</span> <span class="n">group2b</span><span class="p">,</span> <span class="n">group3</span><span class="p">,</span> <span class="n">group4a</span><span class="p">,</span> <span class="n">group4b</span><span class="p">]</span>

<span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">us_w_load_18</span><span class="o">.</span><span class="n">events</span><span class="p">:</span>
    <span class="n">e</span><span class="o">.</span><span class="n">groups</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>

<span class="n">visit</span> <span class="o">=</span> <span class="n">Travel</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;visit&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">works</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">group2b</span><span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">):</span>
    <span class="n">loc</span>  <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,))</span>
    <span class="n">work</span> <span class="o">=</span> <span class="n">Travel</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;hcw-work-</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="n">loc</span><span class="p">,</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">works</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">work</span><span class="p">)</span>

<span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">events_gated</span><span class="p">:</span>
    <span class="n">e</span><span class="o">.</span><span class="n">groups</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="n">events_gated</span> <span class="o">=</span> <span class="n">events_gated</span> <span class="o">+</span> <span class="p">[</span><span class="n">visit</span><span class="p">]</span> <span class="o">+</span> <span class="n">works</span>

<span class="n">vbox</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Events&#39;</span><span class="p">,</span> <span class="s1">&#39;box&#39;</span><span class="p">:</span> <span class="mi">344</span><span class="p">}</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;groups&#39;</span><span class="p">:</span> <span class="n">groups</span><span class="p">,</span> <span class="s1">&#39;density&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;days&#39;</span><span class="p">:</span> <span class="mi">365</span><span class="p">,</span> <span class="s1">&#39;tmr_curve&#39;</span><span class="p">:</span> <span class="n">tmr</span><span class="p">,</span> <span class="s1">&#39;vboxes&#39;</span><span class="p">:</span> <span class="n">vbox</span><span class="p">,</span> <span class="s1">&#39;events&#39;</span><span class="p">:</span> <span class="n">us_w_load_18</span><span class="o">.</span><span class="n">events</span><span class="p">}</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">dotlog</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<p>This time, we will first run 100 simulations of the scenario to find the average outcomes. The average results are shown in the table below:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Gates</th><th class="results-table" style="text-align: center;">Gates<br>$R_0$>0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">100</td><td class="results-table" style="text-align: center;">19</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">5.8%</td><td class="results-table" style="text-align: center;">30.2%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">7.3%</td><td class="results-table" style="text-align: center;">38.2%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">9.2%</td><td class="results-table" style="text-align: center;">47.9%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.07%</td><td class="results-table" style="text-align: center;">0.37%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">85.2%</td><td class="results-table" style="text-align: center;">85.2%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.14%</td><td class="results-table" style="text-align: center;">0.73%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">19</td><td class="results-table" style="text-align: center;">70</td></tr><tr><td class="results-table" style="text-align: left;">$R_0$ = 0</td><td class="results-table" style="text-align: center;">51.0%</td><td class="results-table" style="text-align: center;">0.0%</td></tr></tbody></table></div>
</div>
<p>Below we can see the distribution of HIT, which is very similar to the <a class="reference external" href="#1.-Events">Events</a>.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/load_23_0.png" src="_images/load_23_0.png" />
</div>
</div>
<p>And now we generate a representative simulation:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/us_w_load/gates.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
<p>The results are shown below compared to SIR scenario:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Hutch</th><th class="results-table" style="text-align: center;">SIR</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">33.1%</td><td class="results-table" style="text-align: center;">30.0%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">44.1%</td><td class="results-table" style="text-align: center;">62.0%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">55.1%</td><td class="results-table" style="text-align: center;">83.0%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.38%</td><td class="results-table" style="text-align: center;">0.52%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">92.1%</td><td class="results-table" style="text-align: center;">40.0%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.69%</td><td class="results-table" style="text-align: center;">0.62%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">83</td><td class="results-table" style="text-align: center;">66</td></tr></tbody></table></div>
</div>
<p>Again, relative to SIR, the simulation has a lower peak. In this instance the peak is also significantly later as well. Consistent with the Events scenario, a larger proportion of the fatalities are experienced among the elderly.</p>
<hr class="docutils" />
<div id="3.-Restrict-Large-Gatherings"></div></div>
<div class="section" id="Capacity-Restriction">
<h2>Capacity Restriction<a class="headerlink" href="#Capacity-Restriction" title="Permalink to this headline">¶</a></h2>
<p>As with the <a class="reference internal" href="hit.html#Policy"><span class="std std-ref">SIR Model simulations</span></a>, we can explore the impact of policy restrictions on spread in our more sophisticated environment. First, we will restrict large gatherings.</p>
<p>We’ll again restrict gatherings with 10+ capacity. We assume this policy is implemented on day 30. The restriction will last for 120 days.</p>
<p>With a gamma distributed contact distribution, a very large number of contacts can be eliminated by eliminating just a small fraction of events.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p>Below we see that events with capacity 10+ represent just 17.0% of all events:</p>
</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">caps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">e</span><span class="o">.</span><span class="n">capacity</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">us_w_load_18</span><span class="o">.</span><span class="n">events_gated</span><span class="p">])</span>
<span class="n">n_events</span> <span class="o">=</span> <span class="n">caps</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">n_events_gt10</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">bincount</span><span class="p">(</span><span class="n">caps</span><span class="p">)[</span><span class="mi">10</span><span class="p">:]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">per</span> <span class="o">=</span> <span class="n">n_events_gt10</span> <span class="o">/</span> <span class="n">n_events</span>
</pre></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table>
    <thead>
        <tr>
            <th class="results-table"># of Events</th>
            <th class="results-table" style="text-align: center;">Events<br>Cap > 10</th>
            <th class="results-table" style="text-align: center;">%</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="results-table">8,866</td>
            <td class="results-table" style="text-align: center;">1,503</td>
            <td class="results-table" style="text-align: center;">17.0%</td>
        </tr>
    </tbody>
</table></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p>And that these events represent 84.4% of all contacts generated by those events:</p>
</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">counts</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">caps</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">caps</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">contacts</span> <span class="o">=</span> <span class="n">counts</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">counts</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="n">c_gt10</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">contacts</span><span class="p">[</span><span class="mi">10</span><span class="p">:]</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">contacts</span><span class="p">[</span><span class="mi">10</span><span class="p">:]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">contacts</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">contacts</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<span class="n">c_per</span> <span class="o">=</span> <span class="n">c_gt10</span> <span class="o">/</span> <span class="n">c</span>
</pre></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table>
    <thead>
        <tr>
            <th class="results-table"># of Events</th>
            <th class="results-table" style="text-align: center;">Events<br>Cap > 10</th>
            <th class="results-table" style="text-align: center;">%</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="results-table">964,452</td>
            <td class="results-table" style="text-align: center;">814,230</td>
            <td class="results-table" style="text-align: center;">84.4%</td>
        </tr>
    </tbody>
</table></div>
</div>
<p>The updated structure is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot.events</span> <span class="kn">import</span> <span class="n">Restriction</span>

<span class="n">lg</span> <span class="o">=</span> <span class="n">Restriction</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;large&#39;</span><span class="p">,</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">criteria</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;capacity&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>

<span class="n">events_w_res</span> <span class="o">=</span> <span class="n">events_gated</span> <span class="o">+</span> <span class="p">[</span><span class="n">lg</span><span class="p">]</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;groups&#39;</span><span class="p">:</span> <span class="n">groups</span><span class="p">,</span> <span class="s1">&#39;density&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;days&#39;</span><span class="p">:</span> <span class="mi">365</span><span class="p">,</span> <span class="s1">&#39;tmr_curve&#39;</span><span class="p">:</span> <span class="n">tmr</span><span class="p">,</span> <span class="s1">&#39;vboxes&#39;</span><span class="p">:</span> <span class="n">vbox</span><span class="p">,</span> <span class="s1">&#39;events&#39;</span><span class="p">:</span> <span class="n">events_w_res</span><span class="p">}</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">dotlog</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<p>We again show the average results of 250 simulations in the table below:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">10Max</th><th class="results-table" style="text-align: center;">10Max<br>$R_0$ > 0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">100</td><td class="results-table" style="text-align: center;">31</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">1.6%</td><td class="results-table" style="text-align: center;">5.0%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">1.7%</td><td class="results-table" style="text-align: center;">5.3%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">1.8%</td><td class="results-table" style="text-align: center;">5.5%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.03%</td><td class="results-table" style="text-align: center;">0.11%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">77.5%</td><td class="results-table" style="text-align: center;">77.5%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.52%</td><td class="results-table" style="text-align: center;">1.55%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">18</td><td class="results-table" style="text-align: center;">41</td></tr><tr><td class="results-table" style="text-align: left;">$R_0$ = 0</td><td class="results-table" style="text-align: center;">51.0%</td><td class="results-table" style="text-align: center;">0.0%</td></tr></tbody></table></div>
</div>
<p>We can see that restricting contacts to a maximum of 10 per day has a dramatic impact on spread, reducing the total amount of infections and significantly shortening the duration.</p>
<p>We can see below that the vast majority (almost 80%) of simulations resulted in no outbreak at all. Note, however, that some simulations resulted in moderate outbreaks of 10% total infections or more. So given enough iterations (say among different municipalities, provinces, states or countries), a significant outbreak is sure to occur despite the best efforts of policy.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/load_46_0.png" src="_images/load_46_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/us_w_load/large_gatherings.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
<p>The results of the simulation are shown in the table below, compared with the same scenario from the SIR model simulations:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Hutch</th><th class="results-table" style="text-align: center;">SIR</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">7.4%</td><td class="results-table" style="text-align: center;">15.0%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">7.8%</td><td class="results-table" style="text-align: center;">28.0%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">8.1%</td><td class="results-table" style="text-align: center;">73.0%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.18%</td><td class="results-table" style="text-align: center;">0.45%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">100.0%</td><td class="results-table" style="text-align: center;">38.0%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">2.21%</td><td class="results-table" style="text-align: center;">0.62%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">40</td><td class="results-table" style="text-align: center;">69</td></tr></tbody></table></div>
</div>
<p>The Hutch model results in a far more muted curve. This <a class="reference external" href="https://www.medrxiv.org/content/10.1101/2020.08.07.20169920v3.full.pdf">aligns with research</a> that indicates super-spreader events (where a single individual is responsible for a large number of secondary infections) are responsible for the vast majority of secondary infections.</p>
<p>When those superspreader events are eliminated, spread is curtailed.</p>
<p>This result is somewhat confounding, however, given that many jurisidictions across the global have implemented a similar policy without such a dramatic impact.</p>
<p>Some reasons for this deviation may include:</p>
<ol class="arabic simple">
<li><p>few policies have truly limited all people to less than 10 contacts per day for 120 days. Often there have been exemptions for essential services. For example, during the second wave in North America, many children continued to go to school.</p></li>
<li><p>adherence to such policies is likely not 100%.</p></li>
<li><p>mixing amongst jurisdictions with different policies</p></li>
</ol>
<div id="CapMax-with-Adherence"></div><div class="section" id="Capacity-Restrictions-with-Adherence">
<h3>Capacity Restrictions with Adherence<a class="headerlink" href="#Capacity-Restrictions-with-Adherence" title="Permalink to this headline">¶</a></h3>
<p>To investigate the impact of adherence (or lack thereof), simulations were ran for a dozen scenarios of different maximum event capacities and adherence factors (and some combinations). The results are shown in the tables below:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">10Max</th><th class="results-table" style="text-align: center;">25Max</th><th class="results-table" style="text-align: center;">50Max</th><th class="results-table" style="text-align: center;">75Max</th><th class="results-table" style="text-align: center;">10Max<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">25Max<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">50Max<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">75Max<br>$R_0$ > 0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">100</td><td class="results-table" style="text-align: center;">100</td><td class="results-table" style="text-align: center;">100</td><td class="results-table" style="text-align: center;">100</td><td class="results-table" style="text-align: center;">31</td><td class="results-table" style="text-align: center;">17</td><td class="results-table" style="text-align: center;">24</td><td class="results-table" style="text-align: center;">26</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">1.6%</td><td class="results-table" style="text-align: center;">1.1%</td><td class="results-table" style="text-align: center;">3.9%</td><td class="results-table" style="text-align: center;">6.4%</td><td class="results-table" style="text-align: center;">5.0%</td><td class="results-table" style="text-align: center;">6.2%</td><td class="results-table" style="text-align: center;">15.8%</td><td class="results-table" style="text-align: center;">24.5%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">1.7%</td><td class="results-table" style="text-align: center;">1.2%</td><td class="results-table" style="text-align: center;">5.4%</td><td class="results-table" style="text-align: center;">8.2%</td><td class="results-table" style="text-align: center;">5.3%</td><td class="results-table" style="text-align: center;">6.7%</td><td class="results-table" style="text-align: center;">22.3%</td><td class="results-table" style="text-align: center;">31.5%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">1.8%</td><td class="results-table" style="text-align: center;">1.2%</td><td class="results-table" style="text-align: center;">7.6%</td><td class="results-table" style="text-align: center;">11.4%</td><td class="results-table" style="text-align: center;">5.5%</td><td class="results-table" style="text-align: center;">7.0%</td><td class="results-table" style="text-align: center;">31.3%</td><td class="results-table" style="text-align: center;">43.7%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.03%</td><td class="results-table" style="text-align: center;">0.01%</td><td class="results-table" style="text-align: center;">0.07%</td><td class="results-table" style="text-align: center;">0.09%</td><td class="results-table" style="text-align: center;">0.11%</td><td class="results-table" style="text-align: center;">0.08%</td><td class="results-table" style="text-align: center;">0.30%</td><td class="results-table" style="text-align: center;">0.34%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">77.5%</td><td class="results-table" style="text-align: center;">65.5%</td><td class="results-table" style="text-align: center;">77.0%</td><td class="results-table" style="text-align: center;">80.7%</td><td class="results-table" style="text-align: center;">77.5%</td><td class="results-table" style="text-align: center;">65.5%</td><td class="results-table" style="text-align: center;">77.0%</td><td class="results-table" style="text-align: center;">80.7%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.52%</td><td class="results-table" style="text-align: center;">0.80%</td><td class="results-table" style="text-align: center;">0.79%</td><td class="results-table" style="text-align: center;">0.50%</td><td class="results-table" style="text-align: center;">1.55%</td><td class="results-table" style="text-align: center;">0.97%</td><td class="results-table" style="text-align: center;">0.95%</td><td class="results-table" style="text-align: center;">0.72%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">18</td><td class="results-table" style="text-align: center;">14</td><td class="results-table" style="text-align: center;">27</td><td class="results-table" style="text-align: center;">24</td><td class="results-table" style="text-align: center;">41</td><td class="results-table" style="text-align: center;">44</td><td class="results-table" style="text-align: center;">86</td><td class="results-table" style="text-align: center;">74</td></tr><tr><td class="results-table" style="text-align: left;">$R_0$ = 0</td><td class="results-table" style="text-align: center;">51.0%</td><td class="results-table" style="text-align: center;">53.0%</td><td class="results-table" style="text-align: center;">50.0%</td><td class="results-table" style="text-align: center;">56.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td></tr></tbody></table></div>
</div>
<p>And below the results of different adherence factors for a policy of maximum capacity 10. Adherence of 100 means full compliance and matches the first scenario above. Aherence of 0 means no compliance and outcomes match that of the <a class="reference external" href="#2.-Gates">Gates scenario</a> above.</p>
<p>We have split the table in two sections, one with all simulations and the second showing only those with secondary infections.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">0ADH</th><th class="results-table" style="text-align: center;">10ADH</th><th class="results-table" style="text-align: center;">25ADH</th><th class="results-table" style="text-align: center;">50ADH</th><th class="results-table" style="text-align: center;">75ADH</th><th class="results-table" style="text-align: center;">90ADH</th><th class="results-table" style="text-align: center;">100ADH</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">100</td><td class="results-table" style="text-align: center;">100</td><td class="results-table" style="text-align: center;">100</td><td class="results-table" style="text-align: center;">100</td><td class="results-table" style="text-align: center;">100</td><td class="results-table" style="text-align: center;">100</td><td class="results-table" style="text-align: center;">100</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">6.8%</td><td class="results-table" style="text-align: center;">8.7%</td><td class="results-table" style="text-align: center;">4.6%</td><td class="results-table" style="text-align: center;">1.2%</td><td class="results-table" style="text-align: center;">1.2%</td><td class="results-table" style="text-align: center;">0.9%</td><td class="results-table" style="text-align: center;">1.6%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">8.7%</td><td class="results-table" style="text-align: center;">11.6%</td><td class="results-table" style="text-align: center;">5.7%</td><td class="results-table" style="text-align: center;">1.4%</td><td class="results-table" style="text-align: center;">1.3%</td><td class="results-table" style="text-align: center;">1.0%</td><td class="results-table" style="text-align: center;">1.7%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">10.8%</td><td class="results-table" style="text-align: center;">15.7%</td><td class="results-table" style="text-align: center;">7.6%</td><td class="results-table" style="text-align: center;">1.6%</td><td class="results-table" style="text-align: center;">1.5%</td><td class="results-table" style="text-align: center;">1.0%</td><td class="results-table" style="text-align: center;">1.8%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.08%</td><td class="results-table" style="text-align: center;">0.12%</td><td class="results-table" style="text-align: center;">0.07%</td><td class="results-table" style="text-align: center;">0.03%</td><td class="results-table" style="text-align: center;">0.02%</td><td class="results-table" style="text-align: center;">0.01%</td><td class="results-table" style="text-align: center;">0.03%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">72.3%</td><td class="results-table" style="text-align: center;">83.2%</td><td class="results-table" style="text-align: center;">90.0%</td><td class="results-table" style="text-align: center;">86.4%</td><td class="results-table" style="text-align: center;">76.5%</td><td class="results-table" style="text-align: center;">70.7%</td><td class="results-table" style="text-align: center;">77.5%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.27%</td><td class="results-table" style="text-align: center;">0.62%</td><td class="results-table" style="text-align: center;">0.29%</td><td class="results-table" style="text-align: center;">0.64%</td><td class="results-table" style="text-align: center;">0.33%</td><td class="results-table" style="text-align: center;">0.27%</td><td class="results-table" style="text-align: center;">0.52%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">22</td><td class="results-table" style="text-align: center;">33</td><td class="results-table" style="text-align: center;">24</td><td class="results-table" style="text-align: center;">15</td><td class="results-table" style="text-align: center;">16</td><td class="results-table" style="text-align: center;">16</td><td class="results-table" style="text-align: center;">18</td></tr><tr><td class="results-table" style="text-align: left;">$R_0$ = 0</td><td class="results-table" style="text-align: center;">61.0%</td><td class="results-table" style="text-align: center;">44.0%</td><td class="results-table" style="text-align: center;">50.0%</td><td class="results-table" style="text-align: center;">56.0%</td><td class="results-table" style="text-align: center;">52.0%</td><td class="results-table" style="text-align: center;">51.0%</td><td class="results-table" style="text-align: center;">51.0%</td></tr></tbody></table></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">0ADH<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">10ADH<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">25ADH<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">50ADH<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">75ADH<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">90ADH<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">100ADH<br>$R_0$ > 0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">20</td><td class="results-table" style="text-align: center;">36</td><td class="results-table" style="text-align: center;">29</td><td class="results-table" style="text-align: center;">20</td><td class="results-table" style="text-align: center;">26</td><td class="results-table" style="text-align: center;">20</td><td class="results-table" style="text-align: center;">31</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">33.8%</td><td class="results-table" style="text-align: center;">24.0%</td><td class="results-table" style="text-align: center;">15.7%</td><td class="results-table" style="text-align: center;">5.8%</td><td class="results-table" style="text-align: center;">4.5%</td><td class="results-table" style="text-align: center;">4.0%</td><td class="results-table" style="text-align: center;">5.0%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">43.3%</td><td class="results-table" style="text-align: center;">32.2%</td><td class="results-table" style="text-align: center;">19.6%</td><td class="results-table" style="text-align: center;">6.6%</td><td class="results-table" style="text-align: center;">4.9%</td><td class="results-table" style="text-align: center;">4.2%</td><td class="results-table" style="text-align: center;">5.3%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">53.5%</td><td class="results-table" style="text-align: center;">43.5%</td><td class="results-table" style="text-align: center;">25.9%</td><td class="results-table" style="text-align: center;">7.8%</td><td class="results-table" style="text-align: center;">5.5%</td><td class="results-table" style="text-align: center;">4.5%</td><td class="results-table" style="text-align: center;">5.5%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.38%</td><td class="results-table" style="text-align: center;">0.34%</td><td class="results-table" style="text-align: center;">0.25%</td><td class="results-table" style="text-align: center;">0.14%</td><td class="results-table" style="text-align: center;">0.09%</td><td class="results-table" style="text-align: center;">0.08%</td><td class="results-table" style="text-align: center;">0.11%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">72.3%</td><td class="results-table" style="text-align: center;">83.2%</td><td class="results-table" style="text-align: center;">90.0%</td><td class="results-table" style="text-align: center;">86.4%</td><td class="results-table" style="text-align: center;">76.5%</td><td class="results-table" style="text-align: center;">70.7%</td><td class="results-table" style="text-align: center;">77.5%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.71%</td><td class="results-table" style="text-align: center;">0.80%</td><td class="results-table" style="text-align: center;">1.01%</td><td class="results-table" style="text-align: center;">1.64%</td><td class="results-table" style="text-align: center;">1.08%</td><td class="results-table" style="text-align: center;">1.17%</td><td class="results-table" style="text-align: center;">1.55%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">83</td><td class="results-table" style="text-align: center;">78</td><td class="results-table" style="text-align: center;">67</td><td class="results-table" style="text-align: center;">52</td><td class="results-table" style="text-align: center;">42</td><td class="results-table" style="text-align: center;">39</td><td class="results-table" style="text-align: center;">41</td></tr><tr><td class="results-table" style="text-align: left;">$R_0$ = 0</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td></tr></tbody></table></div>
</div>
<p>Finally, we combined limited adherence with the other maximum capacity policies, as per the table below:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">10Max<br>0ADH</th><th class="results-table" style="text-align: center;">25Max<br>0ADH</th><th class="results-table" style="text-align: center;">50Max<br>0ADH</th><th class="results-table" style="text-align: center;">75Max<br>0ADH</th><th class="results-table" style="text-align: center;">10Max<br>10ADH</th><th class="results-table" style="text-align: center;">25Max<br>10ADH</th><th class="results-table" style="text-align: center;">50Max<br>10ADH</th><th class="results-table" style="text-align: center;">75Max<br>10ADH</th><th class="results-table" style="text-align: center;">10Max<br>25ADH</th><th class="results-table" style="text-align: center;">25Max<br>25ADH</th><th class="results-table" style="text-align: center;">50Max<br>25ADH</th><th class="results-table" style="text-align: center;">75Max<br>25ADH</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">20</td><td class="results-table" style="text-align: center;">20</td><td class="results-table" style="text-align: center;">27</td><td class="results-table" style="text-align: center;">22</td><td class="results-table" style="text-align: center;">36</td><td class="results-table" style="text-align: center;">23</td><td class="results-table" style="text-align: center;">31</td><td class="results-table" style="text-align: center;">17</td><td class="results-table" style="text-align: center;">29</td><td class="results-table" style="text-align: center;">28</td><td class="results-table" style="text-align: center;">18</td><td class="results-table" style="text-align: center;">23</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">33.8%</td><td class="results-table" style="text-align: center;">33.6%</td><td class="results-table" style="text-align: center;">33.0%</td><td class="results-table" style="text-align: center;">33.1%</td><td class="results-table" style="text-align: center;">24.0%</td><td class="results-table" style="text-align: center;">29.2%</td><td class="results-table" style="text-align: center;">32.9%</td><td class="results-table" style="text-align: center;">30.8%</td><td class="results-table" style="text-align: center;">15.7%</td><td class="results-table" style="text-align: center;">19.6%</td><td class="results-table" style="text-align: center;">28.2%</td><td class="results-table" style="text-align: center;">32.2%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">43.3%</td><td class="results-table" style="text-align: center;">42.7%</td><td class="results-table" style="text-align: center;">42.0%</td><td class="results-table" style="text-align: center;">43.5%</td><td class="results-table" style="text-align: center;">32.2%</td><td class="results-table" style="text-align: center;">39.2%</td><td class="results-table" style="text-align: center;">41.5%</td><td class="results-table" style="text-align: center;">41.5%</td><td class="results-table" style="text-align: center;">19.6%</td><td class="results-table" style="text-align: center;">28.5%</td><td class="results-table" style="text-align: center;">36.3%</td><td class="results-table" style="text-align: center;">40.4%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">53.5%</td><td class="results-table" style="text-align: center;">54.4%</td><td class="results-table" style="text-align: center;">52.1%</td><td class="results-table" style="text-align: center;">54.0%</td><td class="results-table" style="text-align: center;">43.5%</td><td class="results-table" style="text-align: center;">49.8%</td><td class="results-table" style="text-align: center;">52.9%</td><td class="results-table" style="text-align: center;">52.9%</td><td class="results-table" style="text-align: center;">25.9%</td><td class="results-table" style="text-align: center;">38.9%</td><td class="results-table" style="text-align: center;">49.0%</td><td class="results-table" style="text-align: center;">49.9%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.38%</td><td class="results-table" style="text-align: center;">0.39%</td><td class="results-table" style="text-align: center;">0.38%</td><td class="results-table" style="text-align: center;">0.40%</td><td class="results-table" style="text-align: center;">0.34%</td><td class="results-table" style="text-align: center;">0.39%</td><td class="results-table" style="text-align: center;">0.38%</td><td class="results-table" style="text-align: center;">0.38%</td><td class="results-table" style="text-align: center;">0.25%</td><td class="results-table" style="text-align: center;">0.31%</td><td class="results-table" style="text-align: center;">0.38%</td><td class="results-table" style="text-align: center;">0.37%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">72.3%</td><td class="results-table" style="text-align: center;">80.4%</td><td class="results-table" style="text-align: center;">82.5%</td><td class="results-table" style="text-align: center;">77.3%</td><td class="results-table" style="text-align: center;">83.2%</td><td class="results-table" style="text-align: center;">85.2%</td><td class="results-table" style="text-align: center;">81.8%</td><td class="results-table" style="text-align: center;">84.6%</td><td class="results-table" style="text-align: center;">90.0%</td><td class="results-table" style="text-align: center;">86.8%</td><td class="results-table" style="text-align: center;">83.3%</td><td class="results-table" style="text-align: center;">84.5%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.71%</td><td class="results-table" style="text-align: center;">0.72%</td><td class="results-table" style="text-align: center;">0.70%</td><td class="results-table" style="text-align: center;">0.75%</td><td class="results-table" style="text-align: center;">0.80%</td><td class="results-table" style="text-align: center;">0.78%</td><td class="results-table" style="text-align: center;">0.72%</td><td class="results-table" style="text-align: center;">0.73%</td><td class="results-table" style="text-align: center;">1.01%</td><td class="results-table" style="text-align: center;">0.77%</td><td class="results-table" style="text-align: center;">0.78%</td><td class="results-table" style="text-align: center;">0.71%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">83</td><td class="results-table" style="text-align: center;">76</td><td class="results-table" style="text-align: center;">79</td><td class="results-table" style="text-align: center;">80</td><td class="results-table" style="text-align: center;">78</td><td class="results-table" style="text-align: center;">81</td><td class="results-table" style="text-align: center;">77</td><td class="results-table" style="text-align: center;">84</td><td class="results-table" style="text-align: center;">67</td><td class="results-table" style="text-align: center;">81</td><td class="results-table" style="text-align: center;">84</td><td class="results-table" style="text-align: center;">72</td></tr><tr><td class="results-table" style="text-align: left;">$R_0$ = 0</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td></tr></tbody></table></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">10Max<br>50ADH</th><th class="results-table" style="text-align: center;">25Max<br>50ADH</th><th class="results-table" style="text-align: center;">50Max<br>50ADH</th><th class="results-table" style="text-align: center;">75Max<br>50ADH</th><th class="results-table" style="text-align: center;">10Max<br>75ADH</th><th class="results-table" style="text-align: center;">25Max<br>75ADH</th><th class="results-table" style="text-align: center;">50Max<br>75ADH</th><th class="results-table" style="text-align: center;">75Max<br>75ADH</th><th class="results-table" style="text-align: center;">10Max<br>90ADH</th><th class="results-table" style="text-align: center;">25Max<br>90ADH</th><th class="results-table" style="text-align: center;">50Max<br>90ADH</th><th class="results-table" style="text-align: center;">75Max<br>90ADH</th><th class="results-table" style="text-align: center;">10Max<br>100ADH</th><th class="results-table" style="text-align: center;">25Max<br>100ADH</th><th class="results-table" style="text-align: center;">50Max<br>100ADH</th><th class="results-table" style="text-align: center;">75Max<br>100ADH</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">20</td><td class="results-table" style="text-align: center;">17</td><td class="results-table" style="text-align: center;">19</td><td class="results-table" style="text-align: center;">26</td><td class="results-table" style="text-align: center;">26</td><td class="results-table" style="text-align: center;">29</td><td class="results-table" style="text-align: center;">17</td><td class="results-table" style="text-align: center;">20</td><td class="results-table" style="text-align: center;">20</td><td class="results-table" style="text-align: center;">23</td><td class="results-table" style="text-align: center;">26</td><td class="results-table" style="text-align: center;">21</td><td class="results-table" style="text-align: center;">31</td><td class="results-table" style="text-align: center;">17</td><td class="results-table" style="text-align: center;">24</td><td class="results-table" style="text-align: center;">26</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">5.8%</td><td class="results-table" style="text-align: center;">11.2%</td><td class="results-table" style="text-align: center;">19.4%</td><td class="results-table" style="text-align: center;">26.9%</td><td class="results-table" style="text-align: center;">4.5%</td><td class="results-table" style="text-align: center;">7.6%</td><td class="results-table" style="text-align: center;">17.9%</td><td class="results-table" style="text-align: center;">25.5%</td><td class="results-table" style="text-align: center;">4.0%</td><td class="results-table" style="text-align: center;">6.4%</td><td class="results-table" style="text-align: center;">13.1%</td><td class="results-table" style="text-align: center;">26.6%</td><td class="results-table" style="text-align: center;">5.0%</td><td class="results-table" style="text-align: center;">6.2%</td><td class="results-table" style="text-align: center;">15.8%</td><td class="results-table" style="text-align: center;">24.5%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">6.6%</td><td class="results-table" style="text-align: center;">17.1%</td><td class="results-table" style="text-align: center;">27.9%</td><td class="results-table" style="text-align: center;">35.9%</td><td class="results-table" style="text-align: center;">4.9%</td><td class="results-table" style="text-align: center;">8.6%</td><td class="results-table" style="text-align: center;">26.0%</td><td class="results-table" style="text-align: center;">36.5%</td><td class="results-table" style="text-align: center;">4.2%</td><td class="results-table" style="text-align: center;">7.1%</td><td class="results-table" style="text-align: center;">19.4%</td><td class="results-table" style="text-align: center;">36.6%</td><td class="results-table" style="text-align: center;">5.3%</td><td class="results-table" style="text-align: center;">6.7%</td><td class="results-table" style="text-align: center;">22.3%</td><td class="results-table" style="text-align: center;">31.5%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">7.8%</td><td class="results-table" style="text-align: center;">23.6%</td><td class="results-table" style="text-align: center;">39.3%</td><td class="results-table" style="text-align: center;">47.4%</td><td class="results-table" style="text-align: center;">5.5%</td><td class="results-table" style="text-align: center;">10.3%</td><td class="results-table" style="text-align: center;">33.6%</td><td class="results-table" style="text-align: center;">47.2%</td><td class="results-table" style="text-align: center;">4.5%</td><td class="results-table" style="text-align: center;">7.7%</td><td class="results-table" style="text-align: center;">26.4%</td><td class="results-table" style="text-align: center;">47.3%</td><td class="results-table" style="text-align: center;">5.5%</td><td class="results-table" style="text-align: center;">7.0%</td><td class="results-table" style="text-align: center;">31.3%</td><td class="results-table" style="text-align: center;">43.7%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.14%</td><td class="results-table" style="text-align: center;">0.23%</td><td class="results-table" style="text-align: center;">0.32%</td><td class="results-table" style="text-align: center;">0.38%</td><td class="results-table" style="text-align: center;">0.09%</td><td class="results-table" style="text-align: center;">0.13%</td><td class="results-table" style="text-align: center;">0.31%</td><td class="results-table" style="text-align: center;">0.36%</td><td class="results-table" style="text-align: center;">0.08%</td><td class="results-table" style="text-align: center;">0.12%</td><td class="results-table" style="text-align: center;">0.27%</td><td class="results-table" style="text-align: center;">0.36%</td><td class="results-table" style="text-align: center;">0.11%</td><td class="results-table" style="text-align: center;">0.08%</td><td class="results-table" style="text-align: center;">0.30%</td><td class="results-table" style="text-align: center;">0.34%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">86.4%</td><td class="results-table" style="text-align: center;">79.0%</td><td class="results-table" style="text-align: center;">82.7%</td><td class="results-table" style="text-align: center;">75.8%</td><td class="results-table" style="text-align: center;">76.5%</td><td class="results-table" style="text-align: center;">82.1%</td><td class="results-table" style="text-align: center;">82.9%</td><td class="results-table" style="text-align: center;">73.0%</td><td class="results-table" style="text-align: center;">70.7%</td><td class="results-table" style="text-align: center;">73.7%</td><td class="results-table" style="text-align: center;">74.9%</td><td class="results-table" style="text-align: center;">74.9%</td><td class="results-table" style="text-align: center;">77.5%</td><td class="results-table" style="text-align: center;">65.5%</td><td class="results-table" style="text-align: center;">77.0%</td><td class="results-table" style="text-align: center;">80.7%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">1.64%</td><td class="results-table" style="text-align: center;">0.84%</td><td class="results-table" style="text-align: center;">0.76%</td><td class="results-table" style="text-align: center;">0.79%</td><td class="results-table" style="text-align: center;">1.08%</td><td class="results-table" style="text-align: center;">1.14%</td><td class="results-table" style="text-align: center;">0.99%</td><td class="results-table" style="text-align: center;">0.77%</td><td class="results-table" style="text-align: center;">1.17%</td><td class="results-table" style="text-align: center;">1.31%</td><td class="results-table" style="text-align: center;">1.05%</td><td class="results-table" style="text-align: center;">0.77%</td><td class="results-table" style="text-align: center;">1.55%</td><td class="results-table" style="text-align: center;">0.97%</td><td class="results-table" style="text-align: center;">0.95%</td><td class="results-table" style="text-align: center;">0.72%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">52</td><td class="results-table" style="text-align: center;">78</td><td class="results-table" style="text-align: center;">84</td><td class="results-table" style="text-align: center;">79</td><td class="results-table" style="text-align: center;">42</td><td class="results-table" style="text-align: center;">51</td><td class="results-table" style="text-align: center;">85</td><td class="results-table" style="text-align: center;">81</td><td class="results-table" style="text-align: center;">39</td><td class="results-table" style="text-align: center;">48</td><td class="results-table" style="text-align: center;">80</td><td class="results-table" style="text-align: center;">88</td><td class="results-table" style="text-align: center;">41</td><td class="results-table" style="text-align: center;">44</td><td class="results-table" style="text-align: center;">86</td><td class="results-table" style="text-align: center;">74</td></tr><tr><td class="results-table" style="text-align: left;">$R_0$ = 0</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td></tr></tbody></table></div>
</div>
<p>The above tables are a bit busy, so we prepared a heat map across the two dimensions of capacity and adherence with color corresponding to total infections.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/load_64_0.png" src="_images/load_64_0.png" />
</div>
</div>
<p>Some findings from the data above:</p>
<ol class="arabic simple">
<li><p>restricting capacity is very impactful right up to 75 max capacity. So restricting only just the largest events <em>should</em> still have a moderating effect on spread.</p></li>
<li><p>adherence factor has only a very modest impact on spread at the higher factors. If fully 20% of subjects are not observing the prescribed policies, this shouldn’t lead to dramatic increase in spread. Even at 50% adherence, spread is significantly muted relative to no policy at all.</p></li>
<li><p>A 25 capacity restriction at ~75% adherence would result in just 10% total infections across the population. This appears to be a good target that allows for some flexibility.</p></li>
</ol>
<p>For comparison purposes, we will show a sample simulation of the 25 Max, 50% adherence scenario.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot.events</span> <span class="kn">import</span> <span class="n">Restriction</span>

<span class="n">lg</span> <span class="o">=</span> <span class="n">Restriction</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;large&#39;</span><span class="p">,</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">criteria</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;capacity&#39;</span><span class="p">:</span> <span class="mi">25</span><span class="p">},</span> <span class="n">adherence</span><span class="o">=.</span><span class="mi">75</span><span class="p">)</span>

<span class="n">events_w_res</span> <span class="o">=</span> <span class="n">events_gated</span> <span class="o">+</span> <span class="p">[</span><span class="n">lg</span><span class="p">]</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;groups&#39;</span><span class="p">:</span> <span class="n">groups</span><span class="p">,</span> <span class="s1">&#39;density&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;days&#39;</span><span class="p">:</span> <span class="mi">365</span><span class="p">,</span> <span class="s1">&#39;tmr_curve&#39;</span><span class="p">:</span> <span class="n">tmr</span><span class="p">,</span> <span class="s1">&#39;vboxes&#39;</span><span class="p">:</span> <span class="n">vbox</span><span class="p">,</span> <span class="s1">&#39;events&#39;</span><span class="p">:</span> <span class="n">events_w_res</span><span class="p">}</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">dotlog</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/us_w_load/lg_25max_75adh.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
<p>The results of th sim are shown below in comparison to our base 10 max capacity scenario:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">25Max<br>75Adh</th><th class="results-table" style="text-align: center;">10Max<br>100Adh</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">7.7%</td><td class="results-table" style="text-align: center;">7.4%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">8.7%</td><td class="results-table" style="text-align: center;">7.8%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">13.3%</td><td class="results-table" style="text-align: center;">8.1%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.19%</td><td class="results-table" style="text-align: center;">0.18%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">89.5%</td><td class="results-table" style="text-align: center;">100.0%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">1.43%</td><td class="results-table" style="text-align: center;">2.21%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">50</td><td class="results-table" style="text-align: center;">40</td></tr></tbody></table></div>
</div>
<p>So restricting contacts to maximum 25 per day has a similar impact on spread even with only 75% adherence to the policy.</p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="Social-Distancing">
<h2>Social Distancing<a class="headerlink" href="#Social-Distancing" title="Permalink to this headline">¶</a></h2>
<p>We will now investigate the impact of social distancing measures <a class="reference internal" href="hit.html#2.-Social-Distancing"><span class="std std-ref">as outlined here</span></a>.</p>
<p>We provice <code class="docutils literal notranslate"><span class="pre">tmfs</span></code> to each age group, representing the adherence to and impact of various tactics including 6-feet of distance, masks, hand sanitizer, etc.</p>
<p>The policy measure is implemented on day 30 and maintained for 120 days.</p>
<p>Note we set <code class="docutils literal notranslate"><span class="pre">group2b</span></code> to <code class="docutils literal notranslate"><span class="pre">tmf=.5</span></code>, indicating much striter adherence to social distancing practices than its age cohort (which is likely consistent with care home workers in the real world).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot.events</span> <span class="kn">import</span> <span class="n">SocialDistancing</span> <span class="k">as</span> <span class="n">SD</span>

<span class="n">sd</span> <span class="o">=</span> <span class="n">SD</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">tmfs</span><span class="o">=</span><span class="p">[</span><span class="o">.</span><span class="mi">8</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">,</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="o">.</span><span class="mi">7</span><span class="p">,</span><span class="o">.</span><span class="mi">65</span><span class="p">,</span><span class="o">.</span><span class="mi">5</span><span class="p">],</span> <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>

<span class="n">events_w_res</span> <span class="o">=</span> <span class="n">events_gated</span> <span class="o">+</span> <span class="p">[</span><span class="n">sd</span><span class="p">]</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;groups&#39;</span><span class="p">:</span> <span class="n">groups</span><span class="p">,</span> <span class="s1">&#39;density&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;days&#39;</span><span class="p">:</span> <span class="mi">365</span><span class="p">,</span> <span class="s1">&#39;tmr_curve&#39;</span><span class="p">:</span> <span class="n">tmr</span><span class="p">,</span>
    <span class="s1">&#39;vboxes&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Events&#39;</span><span class="p">,</span> <span class="s1">&#39;box&#39;</span><span class="p">:</span> <span class="mi">344</span><span class="p">},</span> <span class="s1">&#39;events&#39;</span><span class="p">:</span> <span class="n">us_w_load_18</span><span class="o">.</span><span class="n">events</span>
<span class="p">}</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">use_init_func</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">animate</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<p>The average results of 250 iterations of the scenario are shown in the table below:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">SD</th><th class="results-table" style="text-align: center;">SD<br>$R_0$ > 0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">250</td><td class="results-table" style="text-align: center;">64</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">1.9%</td><td class="results-table" style="text-align: center;">7.2%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">2.1%</td><td class="results-table" style="text-align: center;">8.1%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">2.8%</td><td class="results-table" style="text-align: center;">10.6%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.01%</td><td class="results-table" style="text-align: center;">0.06%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">67.3%</td><td class="results-table" style="text-align: center;">67.3%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.54%</td><td class="results-table" style="text-align: center;">0.51%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">16</td><td class="results-table" style="text-align: center;">48</td></tr><tr><td class="results-table" style="text-align: left;">$R_0$ = 0</td><td class="results-table" style="text-align: center;">54.0%</td><td class="results-table" style="text-align: center;">0.0%</td></tr></tbody></table></div>
</div>
<p>The distribution of infections is heavily skewed towards zero with fairly volatile deviations at the margin.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/load_80_0.png" src="_images/load_80_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/us_w_load/social_distancing.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
<p>The results of the simulation are compared to the SIR model below:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Hutch</th><th class="results-table" style="text-align: center;">SIR</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">7.1%</td><td class="results-table" style="text-align: center;">8.0%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">7.7%</td><td class="results-table" style="text-align: center;">24.0%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">14.0%</td><td class="results-table" style="text-align: center;">68.0%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.03%</td><td class="results-table" style="text-align: center;">0.39%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">33.0%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.21%</td><td class="results-table" style="text-align: center;">0.57%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">49</td><td class="results-table" style="text-align: center;">96</td></tr></tbody></table></div>
</div>
<p>Here we see that social distancing has an even more pronounced impact on spread. The peak and hit are flattened significantly, but the tail is also much shorter.</p>
<p>A lower <span class="math notranslate nohighlight">\(R_0\)</span> is in part responsible, but so too is the viral load curve in Hutch, which has a longer <em>infection</em> duration but a much shorter truly <em>infectious</em> period.</p>
<p>Additionally, fatalities are MUCH lower by a factor of 10. This is due to the lower overall infection level, but note that an outbreak was prevented in the care home (70+G area). With the shorter infectious period, the virus has fewer opportunities to enter the gate.</p>
<div id="SD-with-Adherence"></div><div class="section" id="Social-Distancing-with-Adherence">
<h3>Social Distancing with Adherence<a class="headerlink" href="#Social-Distancing-with-Adherence" title="Permalink to this headline">¶</a></h3>
<p>As with <a class="reference external" href="#Capacity-Restrictions">Capacity Restrictions</a> above, we can investigate the impact that sub-100% adherence might have on spread.</p>
<p>Adherence with respect to <code class="docutils literal notranslate"><span class="pre">SocialDistancing</span></code> requires one additional consideration. A single event is used to cover all the groups in the sim, however, each group is likely to have a different adherence factor given their differing perceived risk factors and motivations.</p>
<p>For instance, <code class="docutils literal notranslate"><span class="pre">70+G</span></code> subjects are likely to have very high adherence given the known risks invovled and the supervision provide by home care professionals. <code class="docutils literal notranslate"><span class="pre">20-49</span></code> subjects (particularly the youngest in the group) exhibit greater risk-taking behavior in general and covid-19 has provded no different; their adherence would be expected to be lower.</p>
<p>We ran 5 different scenarios, each with differing adherence factors for each group. The table below shows the adherence factors used for each group in each scenario.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table" style="text-align: left;">Adh<br>Level</th><th class="results-table" style="text-align: center;">0-19</th><th class="results-table" style="text-align: center;">20-49</th><th class="results-table" style="text-align: center;">HCW</th><th class="results-table" style="text-align: center;">50-69</th><th class="results-table" style="text-align: center;">70+</th><th class="results-table" style="text-align: center;">70+G</th><tbody><tr><td class="results-table" style="text-align: left;">Full</td><td class="results-table" style="text-align: center;">100%</td><td class="results-table" style="text-align: center;">100%</td><td class="results-table" style="text-align: center;">100%</td><td class="results-table" style="text-align: center;">100%</td><td class="results-table" style="text-align: center;">100%</td><td class="results-table" style="text-align: center;">100%</td></tr><tr><td class="results-table" style="text-align: left;">High</td><td class="results-table" style="text-align: center;">80%</td><td class="results-table" style="text-align: center;">70%</td><td class="results-table" style="text-align: center;">95%</td><td class="results-table" style="text-align: center;">90%</td><td class="results-table" style="text-align: center;">95%</td><td class="results-table" style="text-align: center;">100%</td></tr><tr><td class="results-table" style="text-align: left;">Medium</td><td class="results-table" style="text-align: center;">75%</td><td class="results-table" style="text-align: center;">60%</td><td class="results-table" style="text-align: center;">90%</td><td class="results-table" style="text-align: center;">80%</td><td class="results-table" style="text-align: center;">80%</td><td class="results-table" style="text-align: center;">100%</td></tr><tr><td class="results-table" style="text-align: left;">Low</td><td class="results-table" style="text-align: center;">60%</td><td class="results-table" style="text-align: center;">50%</td><td class="results-table" style="text-align: center;">90%</td><td class="results-table" style="text-align: center;">75%</td><td class="results-table" style="text-align: center;">75%</td><td class="results-table" style="text-align: center;">100%</td></tr><tr><td class="results-table" style="text-align: left;">None</td><td class="results-table" style="text-align: center;">0%</td><td class="results-table" style="text-align: center;">0%</td><td class="results-table" style="text-align: center;">0%</td><td class="results-table" style="text-align: center;">0%</td><td class="results-table" style="text-align: center;">0%</td><td class="results-table" style="text-align: center;">0%</td></tr></tbody></table></div>
</div>
<p>The results of 100 iterations of each scenario are shown below:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Full</th><th class="results-table" style="text-align: center;">High</th><th class="results-table" style="text-align: center;">Medium</th><th class="results-table" style="text-align: center;">Low</th><th class="results-table" style="text-align: center;">None</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">100</td><td class="results-table" style="text-align: center;">100</td><td class="results-table" style="text-align: center;">100</td><td class="results-table" style="text-align: center;">100</td><td class="results-table" style="text-align: center;">100</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">1.6%</td><td class="results-table" style="text-align: center;">1.3%</td><td class="results-table" style="text-align: center;">2.4%</td><td class="results-table" style="text-align: center;">2.6%</td><td class="results-table" style="text-align: center;">8.2%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">1.7%</td><td class="results-table" style="text-align: center;">1.5%</td><td class="results-table" style="text-align: center;">3.3%</td><td class="results-table" style="text-align: center;">3.7%</td><td class="results-table" style="text-align: center;">10.0%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">2.0%</td><td class="results-table" style="text-align: center;">1.9%</td><td class="results-table" style="text-align: center;">4.2%</td><td class="results-table" style="text-align: center;">5.0%</td><td class="results-table" style="text-align: center;">12.6%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.01%</td><td class="results-table" style="text-align: center;">0.01%</td><td class="results-table" style="text-align: center;">0.02%</td><td class="results-table" style="text-align: center;">0.03%</td><td class="results-table" style="text-align: center;">0.09%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">70.4%</td><td class="results-table" style="text-align: center;">67.8%</td><td class="results-table" style="text-align: center;">75.0%</td><td class="results-table" style="text-align: center;">81.2%</td><td class="results-table" style="text-align: center;">86.0%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.37%</td><td class="results-table" style="text-align: center;">0.21%</td><td class="results-table" style="text-align: center;">0.33%</td><td class="results-table" style="text-align: center;">0.20%</td><td class="results-table" style="text-align: center;">0.20%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">15</td><td class="results-table" style="text-align: center;">15</td><td class="results-table" style="text-align: center;">23</td><td class="results-table" style="text-align: center;">21</td><td class="results-table" style="text-align: center;">21</td></tr><tr><td class="results-table" style="text-align: left;">$R_0$ = 0</td><td class="results-table" style="text-align: center;">52.0%</td><td class="results-table" style="text-align: center;">57.0%</td><td class="results-table" style="text-align: center;">51.0%</td><td class="results-table" style="text-align: center;">53.0%</td><td class="results-table" style="text-align: center;">57.0%</td></tr></tbody></table></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Full<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">High<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">Medium<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">Low<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">None<br>$R_0$ > 0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">20</td><td class="results-table" style="text-align: center;">15</td><td class="results-table" style="text-align: center;">22</td><td class="results-table" style="text-align: center;">20</td><td class="results-table" style="text-align: center;">23</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">7.6%</td><td class="results-table" style="text-align: center;">8.1%</td><td class="results-table" style="text-align: center;">10.5%</td><td class="results-table" style="text-align: center;">12.6%</td><td class="results-table" style="text-align: center;">35.3%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">8.4%</td><td class="results-table" style="text-align: center;">9.3%</td><td class="results-table" style="text-align: center;">14.6%</td><td class="results-table" style="text-align: center;">18.3%</td><td class="results-table" style="text-align: center;">43.5%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">9.9%</td><td class="results-table" style="text-align: center;">12.3%</td><td class="results-table" style="text-align: center;">18.8%</td><td class="results-table" style="text-align: center;">24.9%</td><td class="results-table" style="text-align: center;">54.6%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.06%</td><td class="results-table" style="text-align: center;">0.06%</td><td class="results-table" style="text-align: center;">0.12%</td><td class="results-table" style="text-align: center;">0.12%</td><td class="results-table" style="text-align: center;">0.39%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">70.4%</td><td class="results-table" style="text-align: center;">67.8%</td><td class="results-table" style="text-align: center;">75.0%</td><td class="results-table" style="text-align: center;">81.2%</td><td class="results-table" style="text-align: center;">86.0%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.60%</td><td class="results-table" style="text-align: center;">0.39%</td><td class="results-table" style="text-align: center;">0.58%</td><td class="results-table" style="text-align: center;">0.45%</td><td class="results-table" style="text-align: center;">0.72%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">46</td><td class="results-table" style="text-align: center;">56</td><td class="results-table" style="text-align: center;">76</td><td class="results-table" style="text-align: center;">78</td><td class="results-table" style="text-align: center;">75</td></tr><tr><td class="results-table" style="text-align: left;">$R_0$ = 0</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td></tr></tbody></table></div>
</div>
<p>Again we see that the policy restriction is resilient in the face of non-compliance, although social distancing appears less resilient than capacity restrictions.</p>
<p>Below we show a representative simulation for the Medium adherence scenario.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/us_w_load/social_distancing_w_med_adh.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">SD</th><th class="results-table" style="text-align: center;">SD<br>Medium<br>Adh</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">7.1%</td><td class="results-table" style="text-align: center;">13.5%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">7.7%</td><td class="results-table" style="text-align: center;">16.2%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">14.0%</td><td class="results-table" style="text-align: center;">23.1%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.03%</td><td class="results-table" style="text-align: center;">0.08%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">50.0%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.21%</td><td class="results-table" style="text-align: center;">0.35%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">49</td><td class="results-table" style="text-align: center;">60</td></tr></tbody></table></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="Restrict-Elderly-Visits">
<h2>Restrict Elderly Visits<a class="headerlink" href="#Restrict-Elderly-Visits" title="Permalink to this headline">¶</a></h2>
<p>Again, as with the <a class="reference internal" href="hit.html#3.-Restrict-Elderly-Visits"><span class="std std-ref">SIR simulations</span></a>, we will restrict visits to the elderly, HOWEVER, care home workers will continue to have access.</p>
<p>The policy measure is implemented on day 30 and maintained for another 120 days. There will be no other restrictions.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">no_visits</span> <span class="o">=</span> <span class="n">Restriction</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;no_visits&#39;</span><span class="p">,</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">criteria</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;visit&#39;</span><span class="p">})</span>

<span class="n">events_w_res</span> <span class="o">=</span> <span class="n">events_gated</span> <span class="o">+</span> <span class="p">[</span><span class="n">no_visits</span><span class="p">]</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;groups&#39;</span><span class="p">:</span> <span class="n">groups</span><span class="p">,</span> <span class="s1">&#39;density&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;days&#39;</span><span class="p">:</span> <span class="mi">365</span><span class="p">,</span> <span class="s1">&#39;tmr_curve&#39;</span><span class="p">:</span> <span class="n">tmr</span><span class="p">,</span> <span class="s1">&#39;vboxes&#39;</span><span class="p">:</span> <span class="n">vbox</span><span class="p">,</span> <span class="s1">&#39;events&#39;</span><span class="p">:</span> <span class="n">us_w_load_18</span><span class="o">.</span><span class="n">events</span><span class="p">}</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">use_init_func</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">animate</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<p>Below we see the results of 250 simulations of the scenario:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">No Visits</th><th class="results-table" style="text-align: center;">No Visits<br>$R_0$ > 0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">250</td><td class="results-table" style="text-align: center;">64</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">9.3%</td><td class="results-table" style="text-align: center;">36.1%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">11.6%</td><td class="results-table" style="text-align: center;">45.2%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">14.1%</td><td class="results-table" style="text-align: center;">55.0%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.10%</td><td class="results-table" style="text-align: center;">0.40%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">79.6%</td><td class="results-table" style="text-align: center;">79.6%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.25%</td><td class="results-table" style="text-align: center;">0.72%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">23</td><td class="results-table" style="text-align: center;">74</td></tr><tr><td class="results-table" style="text-align: left;">$R_0$ = 0</td><td class="results-table" style="text-align: center;">57.6%</td><td class="results-table" style="text-align: center;">0.0%</td></tr></tbody></table></div>
</div>
<p>Below we can see the distribution of HIT among the different iterations. Given the restrictions on contacts are very limited in the general population, HIT is very similar to that of the <a class="reference external" href="#2.-Gates">Gates scenario</a>.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/load_107_0.png" src="_images/load_107_0.png" />
</div>
</div>
<p>Below we show a representative simulation:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/us_w_load/elderly_visits.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
<p>The results of the simulation are shown below:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Hutch</th><th class="results-table" style="text-align: center;">SIR</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">45.6%</td><td class="results-table" style="text-align: center;">27.0%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">50.2%</td><td class="results-table" style="text-align: center;">54.0%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">56.8%</td><td class="results-table" style="text-align: center;">80.0%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.28%</td><td class="results-table" style="text-align: center;">0.29%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">82.1%</td><td class="results-table" style="text-align: center;">17.0%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.49%</td><td class="results-table" style="text-align: center;">0.36%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">53</td><td class="results-table" style="text-align: center;">77</td></tr></tbody></table></div>
</div>
<p>So the outbreak in the sample simulation is on par with that in SIR, with the usual steeper slope and shorter duration.</p>
<p>Fatalities in this particular sim are also on par with SIR, however, the average values were much higher than SIR and relative to the total infections, fatalities were much higher in Hutch. Fatalities were skewed much higher towards the &gt;70 age group as well.</p>
<p>We can see from the animation that around tick 50 an outbreak occurs in the 70+G gated area. This did not occur in the SIR simulation. We can investigate this by analyzing the <code class="docutils literal notranslate"><span class="pre">dotlog</span></code>.</p>
<p>Below we can see that the restrictions were successful in limiting infections inside the gate up to tick 40. On tick 40, however, 4 infections occured within the group and that expanded to 19 infections by tick 44.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[64]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">rknot</span> <span class="kn">import</span> <span class="n">Sim</span>
<span class="kn">from</span> <span class="nn">rknot.dots</span> <span class="kn">import</span> <span class="n">MATRIX_COL_LABELS</span> <span class="k">as</span> <span class="n">ML</span>
<span class="n">infs_in_70g</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">45</span><span class="p">):</span>
    <span class="n">dots</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">dotlog</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">g5s</span> <span class="o">=</span> <span class="n">dots</span><span class="p">[</span><span class="n">dots</span><span class="p">[:,</span> <span class="n">ML</span><span class="p">[</span><span class="s1">&#39;group_id&#39;</span><span class="p">]]</span> <span class="o">==</span> <span class="mi">5</span><span class="p">]</span>
    <span class="n">inf5</span> <span class="o">=</span> <span class="n">g5s</span><span class="p">[</span><span class="n">g5s</span><span class="p">[:,</span> <span class="n">ML</span><span class="p">[</span><span class="s1">&#39;is_inf&#39;</span><span class="p">]]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">infs_in_70g</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">inf5</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">infs_in_70g</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[(30, 0), (31, 0), (32, 0), (33, 0), (34, 0), (35, 0), (36, 0), (37, 0), (38, 0), (39, 0), (40, 4), (41, 4), (42, 4), (43, 4), (44, 19)]
</pre></div></div>
</div>
<p>We can focus in on tick 39 to see how the virus entered the gate.</p>
<p>First, we find the subjects inside the gate on tick 39.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[66]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dots</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">dotlog</span><span class="p">[</span><span class="mi">39</span><span class="p">]</span>
<span class="n">gate_locs</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">gates</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;locs&#39;</span><span class="p">]</span>
<span class="n">dots_in_gate</span> <span class="o">=</span> <span class="n">dots</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">dots</span><span class="p">[:,</span> <span class="n">ML</span><span class="p">[</span><span class="s1">&#39;loc_id&#39;</span><span class="p">]],</span> <span class="n">gate_locs</span><span class="p">[:,</span><span class="mi">0</span><span class="p">])]</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">dots_in_gate</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
307
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p>There were 307 subjects inside the gate on tick 39.</p>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[68]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">not5_in_gate</span> <span class="o">=</span> <span class="n">dots_in_gate</span><span class="p">[</span><span class="n">dots_in_gate</span><span class="p">[:,</span> <span class="n">ML</span><span class="p">[</span><span class="s1">&#39;group_id&#39;</span><span class="p">]]</span> <span class="o">!=</span> <span class="mi">5</span><span class="p">]</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">not5_in_gate</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
7
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p>Of those 307 subjects, 7 were not in the 70+G group. In fact, all 7 are home care workers (<code class="docutils literal notranslate"><span class="pre">group_id=2</span></code>). Below we show the slice of the dot matrix showing the home care workers inside the gate on tick 39.</p>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[70]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span> <span class="p">(</span><span class="n">not5_in_gate</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[  6734      2      1      0      1      0      0    412      5      5
    9305     92     24      0   9168 119684      6     98    100     20
      -1     -1     -1     -1      0      1]
 [  6737      2      1      0      1      0      0    207      3      4
    1647     17     16      0   9167 119320      6     98    100     20
      -1     -1     -1     -1      0      1]
 [  6750      2      1      0      1      0      0    309      4      4
   10124    100     27      0   9155 114952      6     98    100     20
      -1     -1     -1     -1      0      1]
 [  6770      2      1      0      1      0      0    104      2      3
    9027     89     52      0   9160 116772      6     98    100     20
      -1     -1     -1     -1      0      1]
 [  6780      2      1      0      0      1      1    408      5      1
    7166     71     27      0   9147 112040      6     98    100     20
      35     -1     66    432      0      1]
 [  6785      2      1      0      1      0      0    206      3      3
    8392     83     29      0   9158 116044      6     98    100     20
      -1     -1     -1     -1      0      1]
 [  6791      2      1      0      1      0      0    205      3      2
    5369     53     66      0   9149 112768      6     98    100     20
      -1     -1     -1     -1      0      1]]
</pre></div></div>
</div>
<p>If we inspect the matrix above closely, we can see that only one subject is infected, subject <code class="docutils literal notranslate"><span class="pre">id=6780</span></code>.</p>
<p>We can isolate this subject below:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[71]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">not5_in_gate</span><span class="p">[</span><span class="n">not5_in_gate</span><span class="p">[:,</span><span class="n">ML</span><span class="p">[</span><span class="s1">&#39;is_inf&#39;</span><span class="p">]]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[71]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([[  6780,      2,      1,      0,      0,      1,      1,    408,
             5,      1,   7166,     71,     27,      0,   9147, 112040,
             6,     98,    100,     20,     35,     -1,     66,    432,
             0,      1]], dtype=int32)
</pre></div></div>
</div>
<p>So restricting eldery visits is ultimately a meaningless and ineffectual policy if home care workers enter the gate without obstruction. Obviously, home care workers must be allowed to enter the gate to care for the patrons of those residenices. So, how then to approach the issue?</p>
<p>One possibility is to implement a testing regime.</p>
<hr class="docutils" />
<div id="School-Exceptions"></div></div>
<div class="section" id="Schools">
<h2>Schools<a class="headerlink" href="#Schools" title="Permalink to this headline">¶</a></h2>
<p>As noted in <a class="reference external" href="#3.-Restrict-Large-Gatherings">Capacity Restrictions</a>, settting a maximum capacity of 10 for events, or the equivalent of limiting contacts to 10 per day per person, <em>should</em> significantly reduce spread and kill the virus very quickly.</p>
<p>This, of course, has not happened in the case of sars-cov-2, despite the widespread use of similar policies. This is likely in part due to the many <em>exceptions</em> that have been allowed to those policies.</p>
<p>For example, leading up to the second/third wave in North America, many jurisdictions maintained open schools. This approach is understandable given the importance of education during developmental years and the extremely low fatality risk for the age group, however, this approach will inevitably lead to greater spread.</p>
<p>To demonstrate, we implement an augmentation to the <a class="reference external" href="#2.-Gates">Home Care</a> environment. Changes include:</p>
<ul class="simple">
<li><p>create a new <a class="reference internal" href="concepts.html#VBoxes"><span class="std std-ref">VBox</span></a> for events exclusive to the 0-19 age group.</p></li>
<li><p>reassign a specific number of events to that age group</p></li>
<li><p>add a new group, <code class="docutils literal notranslate"><span class="pre">Teachers</span></code>, that will also attend events in the <code class="docutils literal notranslate"><span class="pre">Schools</span></code> VBox.</p>
<ul>
<li><p>the <code class="docutils literal notranslate"><span class="pre">Teachers</span></code> group will have <code class="docutils literal notranslate"><span class="pre">n=97</span></code>, proportioned based on <a class="reference external" href="http://phinational.org/wp-content/uploads/legacy/phi-home-care-workers-key-facts.pdf">3.2MM teachers in the United States</a> out of a population of 330MM.</p></li>
<li><p>remaining attributes similar to <code class="docutils literal notranslate"><span class="pre">20-49</span></code> group</p></li>
<li><p>there will be 49 travel events into the <code class="docutils literal notranslate"><span class="pre">Schools</span></code> VBox, recurring every day</p></li>
</ul>
</li>
</ul>
<p>Full details on the environment can be found <a class="reference external" href="school-sizing.ipynb">here</a>. The adjusted events are available in the <code class="docutils literal notranslate"><span class="pre">us_w_load_18</span></code> module.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot.sims</span> <span class="kn">import</span> <span class="n">us_w_load_18</span>
<span class="kn">from</span> <span class="nn">rknot.events</span> <span class="kn">import</span> <span class="n">Restriction</span>

<span class="n">group1</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;0-19&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2700</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.00003</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">982</span><span class="p">)</span>
<span class="n">group2a</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;20-49&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">3937</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.0002</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">982</span><span class="p">)</span>
<span class="n">group2b</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;HCW&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">66</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.0002</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">982</span><span class="p">)</span>
<span class="n">group2c</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Teachers&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">97</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.0002</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">982</span><span class="p">)</span>
<span class="n">group3</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;50-69&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2300</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.005</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">982</span><span class="p">)</span>
<span class="n">group4a</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;70+&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.042</span><span class="p">,</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">982</span><span class="p">)</span>
<span class="n">group4b</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;70+G&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ifr</span><span class="o">=</span><span class="mf">0.0683</span><span class="p">,</span> <span class="n">mover</span><span class="o">=</span><span class="s1">&#39;local&#39;</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="n">mover</span><span class="o">=.</span><span class="mi">982</span><span class="p">)</span>

<span class="n">groups</span> <span class="o">=</span> <span class="p">[</span><span class="n">group1</span><span class="p">,</span> <span class="n">group2a</span><span class="p">,</span> <span class="n">group2b</span><span class="p">,</span> <span class="n">group2c</span><span class="p">,</span> <span class="n">group3</span><span class="p">,</span> <span class="n">group4a</span><span class="p">,</span> <span class="n">group4b</span><span class="p">]</span>

<span class="n">events_schools</span> <span class="o">=</span> <span class="n">us_w_load_18</span><span class="o">.</span><span class="n">params_schools</span><span class="p">[</span><span class="s1">&#39;events&#39;</span><span class="p">]</span>
<span class="n">vboxes</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Events&#39;</span><span class="p">,</span> <span class="s1">&#39;box&#39;</span><span class="p">:</span> <span class="mi">231</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Schools&#39;</span><span class="p">,</span> <span class="s1">&#39;box&#39;</span><span class="p">:</span> <span class="mi">152</span><span class="p">}]</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;groups&#39;</span><span class="p">:</span> <span class="n">groups</span><span class="p">,</span> <span class="s1">&#39;density&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;days&#39;</span><span class="p">:</span> <span class="mi">365</span><span class="p">,</span> <span class="s1">&#39;tmr_curve&#39;</span><span class="p">:</span> <span class="n">tmr</span><span class="p">,</span> <span class="s1">&#39;vboxes&#39;</span><span class="p">:</span> <span class="n">vboxes</span><span class="p">,</span> <span class="s1">&#39;events&#39;</span><span class="p">:</span> <span class="n">events_schools</span><span class="p">}</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">dotlog</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Schools</span></code> vbox will maintain ~900 children at each tick, at events of various capacities. Below we confirm the number of 0-19 subjects participating in events in the School box on each tick.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/load_129_0.png" src="_images/load_129_0.png" />
</div>
</div>
<p>Below we show the contact distribution created by the School box events. These events are randomly reassigned from the existing event structure in the Home Care scenario. This approach should maintain the required contact distribution across the entire environment.</p>
<p>Note the three largest contact events (all 100+ capacity) will occur inside the School box.</p>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/load_131_0.png" src="_images/load_131_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/load_131_1.png" src="_images/load_131_1.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div class="admonition warning"><p class="admonition-title fa fa-exclamation-circle">NOTE</p><p>The School box events are assigned from the existing event pool in the Home Care scenario. Thus, events remaining in the Event box should help generate contacts that are consistent with the Gamma distribution across the entire sim.</p></div></div>
</div>
<p>Below, we see the total daily event capacity for the School Box scenario, which is identitcal to the Home Care scenario.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/load_134_0.png" src="_images/load_134_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p>The base scenario was run through 100 simulations, with the results compared to the original Gates scenario and shown below:</p>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Schools</th><th class="results-table" style="text-align: center;">Home<br>Care</th><th class="results-table" style="text-align: center;">Schools<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">Home<br>Care<br>$R_0$ > 0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">100</td><td class="results-table" style="text-align: center;">100</td><td class="results-table" style="text-align: center;">19</td><td class="results-table" style="text-align: center;">19</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">7.7%</td><td class="results-table" style="text-align: center;">5.8%</td><td class="results-table" style="text-align: center;">40.6%</td><td class="results-table" style="text-align: center;">30.2%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">8.2%</td><td class="results-table" style="text-align: center;">7.3%</td><td class="results-table" style="text-align: center;">42.9%</td><td class="results-table" style="text-align: center;">38.2%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">8.9%</td><td class="results-table" style="text-align: center;">9.2%</td><td class="results-table" style="text-align: center;">46.8%</td><td class="results-table" style="text-align: center;">47.9%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.06%</td><td class="results-table" style="text-align: center;">0.07%</td><td class="results-table" style="text-align: center;">0.30%</td><td class="results-table" style="text-align: center;">0.37%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">87.3%</td><td class="results-table" style="text-align: center;">85.2%</td><td class="results-table" style="text-align: center;">87.3%</td><td class="results-table" style="text-align: center;">85.2%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.22%</td><td class="results-table" style="text-align: center;">0.14%</td><td class="results-table" style="text-align: center;">0.63%</td><td class="results-table" style="text-align: center;">0.73%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">14</td><td class="results-table" style="text-align: center;">19</td><td class="results-table" style="text-align: center;">58</td><td class="results-table" style="text-align: center;">70</td></tr><tr><td class="results-table" style="text-align: left;">$R_0$ = 0</td><td class="results-table" style="text-align: center;">70.0%</td><td class="results-table" style="text-align: center;">51.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td></tr></tbody></table></div>
</div>
<p>We see the curves between the new <code class="docutils literal notranslate"><span class="pre">Schools</span></code> scenario and the <code class="docutils literal notranslate"><span class="pre">Home</span> <span class="pre">Care</span></code> scenario are very similar, which is the expected result. Note, however, the much narrower spread between Peak/HIT/Total infections. This is indicative of steeper and more abrupt tail to the spread curve.</p>
<p>A sample simulation is shown below:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/us_w_load/schools.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
<p>The results of the simulation are shown below:</p>
<p>Again, the addition of schools results in a similar curve. We can see the steeper curve on both sides of the peak, which in this scenario actually leads to fewer total infections the care home scenario.</p>
<p>The number of fatalities and age distribution are similar as well.</p>
<div id="10Max-ex-Schools"></div><div class="section" id="Capacity-Restriction-w-School-Exception">
<h3>Capacity Restriction w School Exception<a class="headerlink" href="#Capacity-Restriction-w-School-Exception" title="Permalink to this headline">¶</a></h3>
<p>We will now incorporate a capacity restriction that does <em>not</em> apply to the newly created School events using the <code class="docutils literal notranslate"><span class="pre">exclude</span></code> parameter.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot.sims</span> <span class="kn">import</span> <span class="n">us_w_load_18</span>
<span class="kn">from</span> <span class="nn">rknot.events</span> <span class="kn">import</span> <span class="n">Restriction</span>

<span class="n">lg</span> <span class="o">=</span> <span class="n">Restriction</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;large&#39;</span><span class="p">,</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">criteria</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;capacity&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;school&#39;</span><span class="p">})</span>
<span class="n">params</span><span class="p">[</span><span class="s1">&#39;events&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="n">lg</span><span class="p">]</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">dotlog</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p>Below are the results of 100 simulations of the above structure, compared with <a class="reference external" href="#3.-Restrict-Large-Gatherings">original max-10 policy restriction</a>.</p>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">10Max</th><th class="results-table" style="text-align: center;">10Max<br>ex. Schools</th><th class="results-table" style="text-align: center;">10Max<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">10Max<br>ex. Schools<br>$R_0$ > 0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">100</td><td class="results-table" style="text-align: center;">100</td><td class="results-table" style="text-align: center;">31</td><td class="results-table" style="text-align: center;">21</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">1.6%</td><td class="results-table" style="text-align: center;">5.3%</td><td class="results-table" style="text-align: center;">5.0%</td><td class="results-table" style="text-align: center;">25.1%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">1.7%</td><td class="results-table" style="text-align: center;">5.5%</td><td class="results-table" style="text-align: center;">5.3%</td><td class="results-table" style="text-align: center;">26.3%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">1.8%</td><td class="results-table" style="text-align: center;">5.8%</td><td class="results-table" style="text-align: center;">5.5%</td><td class="results-table" style="text-align: center;">27.6%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.03%</td><td class="results-table" style="text-align: center;">0.03%</td><td class="results-table" style="text-align: center;">0.11%</td><td class="results-table" style="text-align: center;">0.14%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">77.5%</td><td class="results-table" style="text-align: center;">92.8%</td><td class="results-table" style="text-align: center;">77.5%</td><td class="results-table" style="text-align: center;">92.8%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.52%</td><td class="results-table" style="text-align: center;">0.18%</td><td class="results-table" style="text-align: center;">1.55%</td><td class="results-table" style="text-align: center;">0.68%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">18</td><td class="results-table" style="text-align: center;">14</td><td class="results-table" style="text-align: center;">41</td><td class="results-table" style="text-align: center;">56</td></tr><tr><td class="results-table" style="text-align: left;">$R_0$ = 0</td><td class="results-table" style="text-align: center;">51.0%</td><td class="results-table" style="text-align: center;">72.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td></tr></tbody></table></div>
</div>
<p>From the above, we can see that the approach of leaving schools open leads to a dramatic increase in spread. Below we compare to some other capacity restriction scenarios:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">10Max<br>ex. Schools<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">10Max<br>25ADH<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">25Max<br>50ADH<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">50Max<br>90ADH<br>$R_0$ > 0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">21</td><td class="results-table" style="text-align: center;">29</td><td class="results-table" style="text-align: center;">17</td><td class="results-table" style="text-align: center;">26</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">25.1%</td><td class="results-table" style="text-align: center;">15.7%</td><td class="results-table" style="text-align: center;">11.2%</td><td class="results-table" style="text-align: center;">13.1%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">26.3%</td><td class="results-table" style="text-align: center;">19.6%</td><td class="results-table" style="text-align: center;">17.1%</td><td class="results-table" style="text-align: center;">19.4%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">27.6%</td><td class="results-table" style="text-align: center;">25.9%</td><td class="results-table" style="text-align: center;">23.6%</td><td class="results-table" style="text-align: center;">26.4%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.14%</td><td class="results-table" style="text-align: center;">0.25%</td><td class="results-table" style="text-align: center;">0.23%</td><td class="results-table" style="text-align: center;">0.27%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">92.8%</td><td class="results-table" style="text-align: center;">90.0%</td><td class="results-table" style="text-align: center;">79.0%</td><td class="results-table" style="text-align: center;">74.9%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.68%</td><td class="results-table" style="text-align: center;">1.01%</td><td class="results-table" style="text-align: center;">0.84%</td><td class="results-table" style="text-align: center;">1.05%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">56</td><td class="results-table" style="text-align: center;">67</td><td class="results-table" style="text-align: center;">78</td><td class="results-table" style="text-align: center;">80</td></tr><tr><td class="results-table" style="text-align: left;">$R_0$ = 0</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td></tr></tbody></table></div>
</div>
<p>We can see that leaving schools open can result in a spread curve similar to some of the more permissive capacity restrictions that were inspected. Below we show a representative simulation:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/us_w_load/schools_max10.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
<p>The results of the simulation are shown below:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Schools</th><th class="results-table" style="text-align: center;">10Max<br>ex. Schools</th><th class="results-table" style="text-align: center;">10Max</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">41.9%</td><td class="results-table" style="text-align: center;">29.4%</td><td class="results-table" style="text-align: center;">7.4%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">43.8%</td><td class="results-table" style="text-align: center;">31.3%</td><td class="results-table" style="text-align: center;">7.8%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">49.1%</td><td class="results-table" style="text-align: center;">33.1%</td><td class="results-table" style="text-align: center;">8.1%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.35%</td><td class="results-table" style="text-align: center;">0.24%</td><td class="results-table" style="text-align: center;">0.18%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">85.7%</td><td class="results-table" style="text-align: center;">95.8%</td><td class="results-table" style="text-align: center;">100.0%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.71%</td><td class="results-table" style="text-align: center;">0.72%</td><td class="results-table" style="text-align: center;">2.21%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">79</td><td class="results-table" style="text-align: center;">50</td><td class="results-table" style="text-align: center;">40</td></tr></tbody></table></div>
</div>
<p>We see that providing an exclusion for in-person school attendance makes a 10 max capacity restriction in the broader population much less effective in reducing spread.</p>
<div id="10Max-ex-Schools-75ADH"></div></div>
<div class="section" id="Capacity-Restriction-w-School-Exception-and-Non-Compliance">
<h3>Capacity Restriction w School Exception and Non-Compliance<a class="headerlink" href="#Capacity-Restriction-w-School-Exception-and-Non-Compliance" title="Permalink to this headline">¶</a></h3>
<p>The capacity restriction in the prior sims assumed 100% adherence factor to the 10 max capacity restriction. We will show the results of 75% adherence.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot.sims</span> <span class="kn">import</span> <span class="n">us_w_load_18</span>
<span class="kn">from</span> <span class="nn">rknot.events</span> <span class="kn">import</span> <span class="n">Restriction</span>

<span class="n">lg</span> <span class="o">=</span> <span class="n">Restriction</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;large&#39;</span><span class="p">,</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">criteria</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;capacity&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
     <span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;school&#39;</span><span class="p">},</span> <span class="n">adherence</span><span class="o">=.</span><span class="mi">75</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">params</span><span class="p">[</span><span class="s1">&#39;events&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="n">lg</span><span class="p">]</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">dotlog</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<p>The results of 100 iterations are shown below for only the outbreak iterations:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Schools<br>Restricted<br>75 ADH<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">Schools<br>Restricted<br>$R_0$ > 0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">22</td><td class="results-table" style="text-align: center;">21</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">28.4%</td><td class="results-table" style="text-align: center;">25.1%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">29.8%</td><td class="results-table" style="text-align: center;">26.3%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">32.0%</td><td class="results-table" style="text-align: center;">27.6%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.22%</td><td class="results-table" style="text-align: center;">0.14%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">90.7%</td><td class="results-table" style="text-align: center;">92.8%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.67%</td><td class="results-table" style="text-align: center;">0.68%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">58</td><td class="results-table" style="text-align: center;">56</td></tr><tr><td class="results-table" style="text-align: left;">$R_0$ = 0</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td></tr></tbody></table></div>
</div>
<p>We can see above that additional infringement of the policy amongst the broader population can negatively influence spread, but the impact is muted.</p>
<p>An example simulation is presented below.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">IPython.core.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">HTML</span>
<span class="kn">from</span> <span class="nn">rknot.notebook</span> <span class="kn">import</span> <span class="n">animHTML</span>
<span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="n">animHTML</span><span class="p">(</span><span class="s1">&#39;us_w_load/&#39;</span> <span class="o">+</span> <span class="n">slug</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/us_w_load/schools_max10_adh75.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
<p>The results are as follows, compared with the 100% adherence sim:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Schools<br>10Max<br>75ADH</th><th class="results-table" style="text-align: center;">Schools<br>10Max</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">32.5%</td><td class="results-table" style="text-align: center;">29.4%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">33.2%</td><td class="results-table" style="text-align: center;">31.3%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">33.9%</td><td class="results-table" style="text-align: center;">33.1%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.22%</td><td class="results-table" style="text-align: center;">0.24%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">100.0%</td><td class="results-table" style="text-align: center;">95.8%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.65%</td><td class="results-table" style="text-align: center;">0.72%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">50</td><td class="results-table" style="text-align: center;">50</td></tr></tbody></table></div>
</div>
<p>We can see that 75% adherence results in a slightly larger outbreak with a more abrupt tail (evidenced by the narrower spread between Peak/HIT/Total infections). Fatalities were also inline and confined to only the oldest age groups.</p>
<div id="Restriction-for-Schools"></div></div>
<div class="section" id="Separate-Restrictions-for-Schools">
<h3>Separate Restrictions for Schools<a class="headerlink" href="#Separate-Restrictions-for-Schools" title="Permalink to this headline">¶</a></h3>
<p>The scenarios up to now have assumed exactly zero policy restrictions on School box interactions. In reality, schools have implemented soccial distancing policies designed to limit spread, which we will attempt to mimic.</p>
<p>In determining the potential restrictions, we have considered some real world examples including the <a class="reference external" href="https://www.ontario.ca/page/covid-19-reopening-schools#section-2">fulsome details provided by the Ontario provincial government</a> (in Canada).</p>
<p>These restrictions include:</p>
<ul class="simple">
<li><p>usual social distancing measures of masks, hand sanitizer, separate entrance and exits, etc.</p></li>
<li><p>expected 70% of maximum attendance during the year</p></li>
<li><p>no class size maximums for elementary schools (although students are expected to interact only with student in their class)</p></li>
<li><p>class size restrictions of 15 students for secondary schools</p></li>
</ul>
<p>In practice, it is very hard to limit interactions. Videos of schools under these restrictions show long lineups with students in close quarters, using lockers, interacting in hallways etc.</p>
<p>We simulated three different evironments:</p>
<ul class="simple">
<li><p>100Max restriction with 100% adherence</p></li>
<li><p>50Max restriction with 75% adherence factor</p></li>
<li><p>25Max restriction with 75% adherence factor</p></li>
</ul>
<p><em>One possibility we have not considered is that the 0-19 age group is somehow more resilient and incurs fewer infections per contact than the broader population. This simply does not appear to be the case based on the prevailing testing data. In Ontario, for example, not only have children</em>not* been shown to incur fewer infections, ages 0-24 were all shown to have the highest level of positive tests during the second wave and were still increasing through late Dec 2020 even when all other age
groups had flattened out.* <a class="reference external" href="https://covid-19.ontario.ca/data">See positive results by age group</a>.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div class="admonition warning"><p class="admonition-title fa fa-exclamation-circle">Event Specific SocialDistancing</p><p><strong>RKnot</strong> does not yet have the capability to enact SocialDistancing on specific events, though this feature will be added in the future.</p></div></div>
</div>
<p>First, we show the implementation of the 100 capacity event restriction in the School box, via the <code class="docutils literal notranslate"><span class="pre">schoolmax</span></code> restriction. The only difference in the other scenarios include the <code class="docutils literal notranslate"><span class="pre">adherence</span></code> parameter in the <code class="docutils literal notranslate"><span class="pre">schoolmax</span></code> object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot.sims</span> <span class="kn">import</span> <span class="n">us_w_load_18</span>
<span class="kn">from</span> <span class="nn">rknot.events</span> <span class="kn">import</span> <span class="n">Restriction</span>

<span class="n">lg</span> <span class="o">=</span> <span class="n">Restriction</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;large&#39;</span><span class="p">,</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">criteria</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;capacity&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
    <span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;school&#39;</span><span class="p">},</span> <span class="n">adherence</span><span class="o">=.</span><span class="mi">75</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">schoolmax</span> <span class="o">=</span> <span class="n">Restriction</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;large&#39;</span><span class="p">,</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span>
    <span class="n">criteria</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;capacity&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;school&#39;</span><span class="p">},</span>
<span class="p">)</span>
<span class="n">us_w_load_18</span><span class="o">.</span><span class="n">params_schools</span><span class="p">[</span><span class="s1">&#39;events&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="n">lg</span><span class="p">,</span> <span class="n">schoolmax</span><span class="p">]</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="o">**</span><span class="n">us_w_load_18</span><span class="o">.</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">dotlog</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Schools<br>No Max<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">Schools<br>100Max<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">Schools<br>50Max<br>75ADH<br>$R_0$ > 0</th><th class="results-table" style="text-align: center;">Schools<br>25Max<br>75ADH<br>$R_0$ > 0</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">n</td><td class="results-table" style="text-align: center;">22</td><td class="results-table" style="text-align: center;">22</td><td class="results-table" style="text-align: center;">21</td><td class="results-table" style="text-align: center;">10</td></tr><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">28.4%</td><td class="results-table" style="text-align: center;">27.9%</td><td class="results-table" style="text-align: center;">25.1%</td><td class="results-table" style="text-align: center;">21.0%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">29.8%</td><td class="results-table" style="text-align: center;">29.4%</td><td class="results-table" style="text-align: center;">26.2%</td><td class="results-table" style="text-align: center;">21.6%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">32.0%</td><td class="results-table" style="text-align: center;">31.4%</td><td class="results-table" style="text-align: center;">28.4%</td><td class="results-table" style="text-align: center;">24.4%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.22%</td><td class="results-table" style="text-align: center;">0.21%</td><td class="results-table" style="text-align: center;">0.12%</td><td class="results-table" style="text-align: center;">0.17%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">90.7%</td><td class="results-table" style="text-align: center;">86.6%</td><td class="results-table" style="text-align: center;">88.5%</td><td class="results-table" style="text-align: center;">80.4%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.67%</td><td class="results-table" style="text-align: center;">0.66%</td><td class="results-table" style="text-align: center;">0.41%</td><td class="results-table" style="text-align: center;">0.68%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">58</td><td class="results-table" style="text-align: center;">56</td><td class="results-table" style="text-align: center;">56</td><td class="results-table" style="text-align: center;">51</td></tr><tr><td class="results-table" style="text-align: left;">$R_0$ = 0</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td><td class="results-table" style="text-align: center;">0.0%</td></tr></tbody></table></div>
</div>
<p>We can see the progressively suppressed spread curve as we reduce the capacity maximum in the School box. Despite having all 3 of the largest events (all &gt;100 capacity), eliminating those events has any only minor impact on spread. There are simply not enough contacts in generated by those 3 events to spur broader infection.</p>
<p>Spread is only materially impact with a lower maximum that encompasses many more events.</p>
<p>Still, relative to the original <a class="reference external" href="#Capacity-Restriction">10max 75% adherence restriction</a>, the outbreak in 25max 75% adherence is 4 - 5x larger.</p>
<p>It is difficult to imagine how a school could limit contacts to fewer than 25 per day for students and staff given class sizes and other interactions. And so we see that open schools, even with their own restrictions, can undo much of the work being done by more rigorous restrictions in the broader population.</p>
<p>Below we show a representation simulation:</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style="text-align: center">
    <video width='900px' height='376.56903765690373px'
    src="https://storage.googleapis.com/rknotvids/us_w_load/schools_max10_adh75_max25_adh75.mp4" controls>Video Failed to Load</video>
</div>
<p></p></div>
</div>
<p>The results are shown below compared to the original <a class="reference external" href="#Home-Care">Home Care scenario</a>, which did not have a seperate school vbox or any exceptions for schools.</p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<table class="results-table"><thead><tr><th class="results-table"></th><th class="results-table" style="text-align: center;">Schools<br>25Max<br>75ADH</th><th class="results-table" style="text-align: center;">Home Care<br>10Max</th></tr></thead><tbody><tr><td class="results-table" style="text-align: left;">Peak</td><td class="results-table" style="text-align: center;">21.6%</td><td class="results-table" style="text-align: center;">7.4%</td></tr><tr><td class="results-table" style="text-align: left;">HIT</td><td class="results-table" style="text-align: center;">24.6%</td><td class="results-table" style="text-align: center;">7.8%</td></tr><tr><td class="results-table" style="text-align: left;">Total</td><td class="results-table" style="text-align: center;">29.0%</td><td class="results-table" style="text-align: center;">8.1%</td></tr><tr><td class="results-table" style="text-align: left;">Fatalities</td><td class="results-table" style="text-align: center;">0.26%</td><td class="results-table" style="text-align: center;">0.18%</td></tr><tr><td class="results-table" style="text-align: left;">%>70</td><td class="results-table" style="text-align: center;">96.2%</td><td class="results-table" style="text-align: center;">100.0%</td></tr><tr><td class="results-table" style="text-align: left;">IFR</td><td class="results-table" style="text-align: center;">0.90%</td><td class="results-table" style="text-align: center;">2.21%</td></tr><tr><td class="results-table" style="text-align: left;">Days to Peak</td><td class="results-table" style="text-align: center;">80</td><td class="results-table" style="text-align: center;">40</td></tr></tbody></table></div>
</div>
<p>We can see from the above that providing exclusions for schools, despite including some restrictions without those schools, significantly impairs the impact of restrictions in the broader economy.</p>
<p>We must consider if an outbreak can ever be prevented if we open schools (and we cannot reduce daily contacts at schools to less than maximum 25 per day).</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="multi.html" class="btn btn-neutral float-right" title="Multiple Jurisdictions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hit.html" class="btn btn-neutral float-left" title="SIR: Factors Influencing Spread" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, rskene

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>