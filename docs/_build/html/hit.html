

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>SIR: Factors Influencing Spread &mdash; RKnot  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"TeX": {"equationNumbers": {"autoNumber": "AMS", "useLabelIds": true}}, "tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Dynamic Transmission Risk" href="load.html" />
    <link rel="prev" title="Sizing" href="sizing.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> RKnot
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">ARCHITECTURE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Viral Spread Theory in RKnot</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Key Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="sizing.html">Sizing</a></li>
</ul>
<p class="caption"><span class="caption-text">SIMULATIONS</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">SIR: Factors Influencing Spread</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Base-US-Simulation">Base US Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Natural">Natural</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#1.-Equal">1. Equal</a></li>
<li class="toctree-l3"><a class="reference internal" href="#2.-Local">2. Local</a></li>
<li class="toctree-l3"><a class="reference internal" href="#3.-Social">3. Social</a></li>
<li class="toctree-l3"><a class="reference internal" href="#4.-Pre-Existing-Immunity">4. Pre-Existing Immunity</a></li>
<li class="toctree-l3"><a class="reference internal" href="#5.-Events">5. Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="#6.-Gates">6. Gates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#7.-Pre-Immunity-with-Events-and-Gates">7. Pre-Immunity with Events and Gates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#8.-Self-Aware-Social-Distancing">8. Self Aware Social Distancing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#9.-Self-Aware-Social-Distancing-+-Pre-Immunity">9. Self Aware Social Distancing + Pre-Immunity</a></li>
<li class="toctree-l3"><a class="reference internal" href="#10.-Isolation">10. Isolation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Policy">Policy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#1.-Restrict-Large-Gatherings">1. Restrict Large Gatherings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#2.-Social-Distancing">2. Social Distancing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#3.-Restrict-Elderly-Visits">3. Restrict Elderly Visits</a></li>
<li class="toctree-l3"><a class="reference internal" href="#4.-Social-Distancing-and-Restrict-Elderly-Visits-and-Large-Gatherings">4. Social Distancing and Restrict Elderly Visits and Large Gatherings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#5.-Quarantine">5. Quarantine</a></li>
<li class="toctree-l3"><a class="reference internal" href="#6.-Quarantine-with-Adherence">6. Quarantine with Adherence</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="load.html">Dynamic Transmission Risk</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi.html">Multiple Jurisdictions</a></li>
<li class="toctree-l1"><a class="reference internal" href="seasonal.html">Seasonality</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">RKnot</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>SIR: Factors Influencing Spread</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/hit.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="SIR:-Factors-Influencing-Spread">
<h1>SIR: Factors Influencing Spread<a class="headerlink" href="#SIR:-Factors-Influencing-Spread" title="Permalink to this headline">¶</a></h1>
<p><strong>REPLICABILITY</strong></p>
<p><em>Randomness is in an important factor in RKnot’s approach to simulation (and frankly in real-word viral transmission), so the results of the sims below will not be repeatable with each iteration. The below examples are meant to show general differences based on state; further analysis should run the same simulation multiple times to see the mean impact.</em></p>
<div class="section" id="Base-US-Simulation">
<h2>Base US Simulation<a class="headerlink" href="#Base-US-Simulation" title="Permalink to this headline">¶</a></h2>
<p>To explore the various concepts of RKnot and viral spread, we’ll use a simulation design based on <a class="reference external" href="https://www.cdc.gov/coronavirus/2019-ncov/hcp/planning-scenarios.html">CDC Best Planning Scenario</a> guidelines for COVID-19 characteristics including:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(R_0\)</span> 2.5</p></li>
<li><p>IFR for each of 4 age groups</p>
<ul>
<li><p>0-19: 0.003%</p></li>
<li><p>20-49: 0.02%</p></li>
<li><p>50-69: 0.5%</p></li>
<li><p>70+: 5.4%</p></li>
</ul>
</li>
</ul>
<p>Other assumptions:</p>
<ul class="simple">
<li><p>Population of <span class="math notranslate nohighlight">\(10,000^1\)</span></p></li>
<li><p>Initial Infected of 2</p></li>
<li><p>Duration of Infectiousness 14 days<span class="math notranslate nohighlight">\(^2\)</span></p></li>
<li><p>Duration of Immunity 365 days</p></li>
<li><p>Density of ~1 subject per location (<code class="docutils literal notranslate"><span class="pre">dlevel='med'</span></code>)</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(^1\)</span><em>proportionately split among the 4 age groups to match US census data.</em></p>
<p><span class="math notranslate nohighlight">\(^2\)</span><em>equal likelihood of transmission on any day (i.e. no viral load curve)</em></p>
<p><a class="reference external" href="https://www.census.gov/prod/cen2010/briefs/c2010br-03.pdf">US Census Data</a></p>
</div>
<div class="section" id="Natural">
<h2>Natural<a class="headerlink" href="#Natural" title="Permalink to this headline">¶</a></h2>
<div class="section" id="1.-Equal">
<h3>1. Equal<a class="headerlink" href="#1.-Equal" title="Permalink to this headline">¶</a></h3>
<p>The first simulation makes the most homogeneous assumptions.</p>
<ul class="simple">
<li><p>No group is restricted in terms of movement.</p></li>
<li><p>All dots are able to interact with one another.</p></li>
<li><p>All dots are susceptible at initiation.</p></li>
<li><p>All dots are equally likely to move to any dot on the grid (<code class="docutils literal notranslate"><span class="pre">mover='equal'</span></code>)</p></li>
</ul>
<p>The basic layout is below. These parameters can also be imported from <code class="docutils literal notranslate"><span class="pre">rknot.sims.baseus</span></code> for convenienve.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">group1</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;0-19&#39;</span><span class="p">,</span>
    <span class="n">n</span><span class="o">=</span><span class="mi">2700</span><span class="p">,</span>
    <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">ifr</span><span class="o">=</span><span class="mf">0.00003</span><span class="p">,</span>
    <span class="n">mover</span><span class="o">=</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">group2</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;20-49&#39;</span><span class="p">,</span>
    <span class="n">n</span><span class="o">=</span><span class="mi">4100</span><span class="p">,</span>
    <span class="n">n_inf</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">ifr</span><span class="o">=</span><span class="mf">0.0002</span><span class="p">,</span>
    <span class="n">mover</span><span class="o">=</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">group3</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;50-69&#39;</span><span class="p">,</span>
    <span class="n">n</span><span class="o">=</span><span class="mi">2300</span><span class="p">,</span>
    <span class="n">n_inf</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">ifr</span><span class="o">=</span><span class="mf">0.005</span><span class="p">,</span>
    <span class="n">mover</span><span class="o">=</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">group4</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;70+&#39;</span><span class="p">,</span>
    <span class="n">n</span><span class="o">=</span><span class="mi">900</span><span class="p">,</span>
    <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">ifr</span><span class="o">=</span><span class="mf">0.054</span><span class="p">,</span>
    <span class="n">mover</span><span class="o">=</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">groups</span> <span class="o">=</span> <span class="p">[</span><span class="n">group1</span><span class="p">,</span> <span class="n">group2</span><span class="p">,</span> <span class="n">group3</span><span class="p">,</span> <span class="n">group4</span><span class="p">]</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;dlevel&#39;</span><span class="p">:</span> <span class="s1">&#39;med&#39;</span><span class="p">,</span> <span class="s1">&#39;Ro&#39;</span><span class="p">:</span><span class="mf">2.5</span><span class="p">,</span> <span class="s1">&#39;days&#39;</span><span class="p">:</span> <span class="mi">365</span><span class="p">,</span> <span class="s1">&#39;imndur&#39;</span><span class="p">:</span> <span class="mi">365</span><span class="p">,</span> <span class="s1">&#39;infdur&#39;</span><span class="p">:</span> <span class="mi">14</span><span class="p">}</span>
</pre></div>
</div>
<p>We instantiate a new sim by passing <code class="docutils literal notranslate"><span class="pre">groups</span></code> and <code class="docutils literal notranslate"><span class="pre">params</span></code>. We can also flag <code class="docutils literal notranslate"><span class="pre">details</span></code> to get some information about the Sim structure.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot</span> <span class="kn">import</span> <span class="n">Sim</span><span class="p">,</span> <span class="n">Chart</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="n">groups</span><span class="p">,</span> <span class="n">details</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
---------------------------------------------------------------------------------
|                                  SIM DETAILS                                  |
|-------------------------------------------------------------------------------|
|           Boundary|      [ 1 45  1 45]|          Locations|              2,025|
|-------------------|-------------------|-------------------|-------------------|
|         Population|             10,000|            Density|               4.94|
|-------------------|-------------------|-------------------|-------------------|
|       Contact Rate|               4.94|                   |                   |
|-------------------|-------------------|-------------------|-------------------|
</pre></div></div>
</div>
<p>Running the animation will result in a video as per below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">use_init_func</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">animate</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<video width="705" height="340" src="https://storage.googleapis.com/rknotvids/baseus/1.mp4" controls><p>alternative text</p>
</video><p><em>Note embedded videos are used for convenience purposes. Given the random processes involved, running the same code will produce slightly different results each time.</em></p>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p>Results:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 71%" />
<col style="width: 29%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Peak</p></td>
<td><p>37%</p></td>
</tr>
<tr class="row-even"><td><p>HIT</p></td>
<td><p>67%</p></td>
</tr>
<tr class="row-odd"><td><p>Total</p></td>
<td><p>87%</p></td>
</tr>
<tr class="row-even"><td><p>Fatalities</p></td>
<td><p>0.55%</p></td>
</tr>
<tr class="row-odd"><td><p>% &gt; 70</p></td>
<td><p>42%</p></td>
</tr>
<tr class="row-even"><td><p>IFR</p></td>
<td><p>0.63%</p></td>
</tr>
<tr class="row-odd"><td><p>Days to Peak</p></td>
<td><p>72</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>In this scenario, <strong>RKnot</strong> fairly closely replicates the curve of a standard SIR model, which expects HIT of 60% for <span class="math notranslate nohighlight">\(R_0\)</span> of 2.5 (HIT = 1 - 1 / <span class="math notranslate nohighlight">\(R_0\)</span>).</p>
<p>Variation from the standard SIR model will always result given:</p>
<ol class="arabic simple">
<li><p>In the simulation, movement and transmission are stochastic processes.</p></li>
<li><p>This sim does not have an entirely homogeneous population, with different IFRs and varying numbers of contacts between subjects.</p></li>
</ol>
</div>
<div class="section" id="2.-Local">
<h3>2. Local<a class="headerlink" href="#2.-Local" title="Permalink to this headline">¶</a></h3>
<p>In remaining simulations, we begin to introduce ever increasing homogeneity.</p>
<p>Our first change is to adjust the subjects mover functions to <code class="docutils literal notranslate"><span class="pre">local</span></code>. The <code class="docutils literal notranslate"><span class="pre">local</span></code> mover has a strong bias towards locations only in its immediate vicinity, which is a better approximation of real world processes (though certainly not a perfect one).</p>
<p>We will also extend the simulation an extra year.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">group1</span><span class="p">[</span><span class="s1">&#39;mover&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;local&#39;</span>
<span class="n">group2</span><span class="p">[</span><span class="s1">&#39;mover&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;local&#39;</span>
<span class="n">group3</span><span class="p">[</span><span class="s1">&#39;mover&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;local&#39;</span>
<span class="n">group4</span><span class="p">[</span><span class="s1">&#39;mover&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;local&#39;</span>
<span class="n">groups</span> <span class="o">=</span> <span class="p">[</span><span class="n">group1</span><span class="p">,</span> <span class="n">group2</span><span class="p">,</span> <span class="n">group3</span><span class="p">,</span> <span class="n">group4</span><span class="p">]</span>
<span class="n">params</span><span class="p">[</span><span class="s1">&#39;days&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">365</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="n">groups</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">use_init_func</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">animate</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<video width="705" height="340" src="https://storage.googleapis.com/rknotvids/baseus/2.mp4" controls><p>Video Failed To Load</p>
</video><div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p>Results:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 71%" />
<col style="width: 29%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Peak</p></td>
<td><p>4%</p></td>
</tr>
<tr class="row-even"><td><p>HIT</p></td>
<td><p>56%</p></td>
</tr>
<tr class="row-odd"><td><p>Total</p></td>
<td><p>69%</p></td>
</tr>
<tr class="row-even"><td><p>Fatalities</p></td>
<td><p>0.42%</p></td>
</tr>
<tr class="row-odd"><td><p>% &gt; 70</p></td>
<td><p>36%</p></td>
</tr>
<tr class="row-even"><td><p>IFR</p></td>
<td><p>0.60%</p></td>
</tr>
<tr class="row-odd"><td><p>Days to Peak</p></td>
<td><p>355</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Compared to <a class="reference external" href="#1.-Equal">Example 1</a>, we can see that restricting movement has a major impact on spread. The curve is flattened and extended with total infected, peak, HIT, and fatalities all reduce.</p>
<p>But the virus is never completely eradicated and instead moves in a progressive wave across the grid space. Note that the infection and fatalitiy levels are somewhat artificially reduced as the virus still has a large susceptible population in the upper portion of the grid that it has not yet reached.</p>
<p>Local movement does <em>not</em> satisfy the “well-mixed” condition of the SIR model. Particularly interesting is that the <a class="reference internal" href="sizing.html#Movement-Changes"><span class="std std-ref">initial conditions of this scenario DO very closely resemble a SIR model</span></a>. So, an observer measuring <span class="math notranslate nohighlight">\(R_0\)</span> in a local environment might see spread consistent with a well-mixed population <em>but the population may not be well-mixed at a larger scale</em>.</p>
</div>
<div class="section" id="3.-Social">
<h3>3. Social<a class="headerlink" href="#3.-Social" title="Permalink to this headline">¶</a></h3>
<p>In this simulation, we set <code class="docutils literal notranslate"><span class="pre">mover=social</span></code> for just the 20-49 age group. This is a rough approximation of that group’s real-world propensity to travel more frequently (or go to more events).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">group1</span><span class="p">[</span><span class="s1">&#39;mover&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;local&#39;</span>
<span class="n">group2</span><span class="p">[</span><span class="s1">&#39;mover&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;social&#39;</span>
<span class="n">group3</span><span class="p">[</span><span class="s1">&#39;mover&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;local&#39;</span>
<span class="n">group4</span><span class="p">[</span><span class="s1">&#39;mover&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;local&#39;</span>
<span class="n">groups</span> <span class="o">=</span> <span class="p">[</span><span class="n">group1</span><span class="p">,</span> <span class="n">group2</span><span class="p">,</span> <span class="n">group3</span><span class="p">,</span> <span class="n">group4</span><span class="p">]</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="n">groups</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">use_init_func</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">animate</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<video width="705" height="340" src="https://storage.googleapis.com/rknotvids/baseus/3.mp4" controls><p>Video Failed To Load</p>
</video><div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p>Results:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 71%" />
<col style="width: 29%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Peak</p></td>
<td><p>34%</p></td>
</tr>
<tr class="row-even"><td><p>HIT</p></td>
<td><p>62%</p></td>
</tr>
<tr class="row-odd"><td><p>Total</p></td>
<td><p>85%</p></td>
</tr>
<tr class="row-even"><td><p>Fatalities</p></td>
<td><p>0.54%</p></td>
</tr>
<tr class="row-odd"><td><p>% &gt; 70</p></td>
<td><p>49%</p></td>
</tr>
<tr class="row-even"><td><p>IFR</p></td>
<td><p>0.63%</p></td>
</tr>
<tr class="row-odd"><td><p>Days to Peak</p></td>
<td><p>71</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Comparing again to <a class="reference external" href="#1.-Equal">Example 1</a>, we can see how powerful mixing is within a population. Even with the majority of subjects moving only locally, a small group of subjects is moving more broadly across the space will significantly increase the amount of spread.</p>
</div>
<div class="section" id="4.-Pre-Existing-Immunity">
<h3>4. Pre-Existing Immunity<a class="headerlink" href="#4.-Pre-Existing-Immunity" title="Permalink to this headline">¶</a></h3>
<p>In this scenario, we adjust the susceptibility factor for just two groups by relatively small amounts as follows:</p>
<ul class="simple">
<li><p>20-49: 80%</p></li>
<li><p>50-69: 65%</p></li>
</ul>
<p>This means, in the inverse, that 10% and 25% of the subjects in the respective groups are already immune to the virus (whether through pre-existing T-cell immunity, anti-bodies, or otherwise).</p>
<p>The older group is assumed to have a lower susceptibility factor as it is more likely that older people will have had more exposure to similar viruses over their lifetime.</p>
<p>T-cell immunity to sars-cov-2 remains a controversial subject, but <a class="reference external" href="https://www.bmj.com/content/370/bmj.m3563">many studies</a> have found prevalance of T-cells between 20% - 50% in <em>people unexposed to sars-cov-2</em>. It is suggested that exposure to “common cold” coronaviruses (or more dangerous ones) may convey this immunity.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">group2</span><span class="p">[</span><span class="s1">&#39;susf&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">.</span><span class="mi">8</span>
<span class="n">group3</span><span class="p">[</span><span class="s1">&#39;susf&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">.</span><span class="mi">65</span>
<span class="n">groups</span> <span class="o">=</span> <span class="p">[</span><span class="n">group1</span><span class="p">,</span> <span class="n">group2</span><span class="p">,</span> <span class="n">group3</span><span class="p">,</span> <span class="n">group4</span><span class="p">]</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="n">groups</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">use_init_func</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">animate</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<video width="705" height="340" src="https://storage.googleapis.com/rknotvids/baseus/4.mp4" controls><p>Video Failed to Load</p>
</video><div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p>Results:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 71%" />
<col style="width: 29%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Peak</p></td>
<td><p>19%</p></td>
</tr>
<tr class="row-even"><td><p>HIT</p></td>
<td><p>44%</p></td>
</tr>
<tr class="row-odd"><td><p>Total</p></td>
<td><p>63%</p></td>
</tr>
<tr class="row-even"><td><p>Fatalities</p></td>
<td><p>0.35%</p></td>
</tr>
<tr class="row-odd"><td><p>% &gt; 70</p></td>
<td><p>29%</p></td>
</tr>
<tr class="row-even"><td><p>IFR</p></td>
<td><p>0.56%</p></td>
</tr>
<tr class="row-odd"><td><p>Days to Peak</p></td>
<td><p>93</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Relative to <a class="reference external" href="#3.-Social">Example 3</a> above, pre-existing immunity would reduce all aspects of the spread curve signifcantly.</p>
<p>Note the reduction in fatalities results <em>even though the most susceptible group is assumed to NOT have pre-existing immunity</em>.</p>
</div>
<div class="section" id="5.-Events">
<h3>5. Events<a class="headerlink" href="#5.-Events" title="Permalink to this headline">¶</a></h3>
<p>Certainly, the vast majority of people in the US do not move in such pre-defined ways as set out by the <code class="docutils literal notranslate"><span class="pre">mover</span></code> function. In reality, people tend to move with a local bias with a small number of interactions, supplemented by larger movements to locations with a large number of interactions in a small amount of time.</p>
<p>In RKnot, we can simulate this with <a class="reference internal" href="concepts.html#Events"><span class="std std-ref">Event objects</span></a>. And we will incorporate a number of them in this simulation.</p>
<p>First, we will reset our group parameters by importing from <code class="docutils literal notranslate"><span class="pre">sims.baseus</span></code>.</p>
<p>Then we will instantiate a handful of events recurring periodically over the duration of the sim.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot.sims.baseus</span> <span class="kn">import</span> <span class="n">params</span><span class="p">,</span> <span class="n">groups</span>

<span class="kn">from</span> <span class="nn">rknot.events</span> <span class="kn">import</span> <span class="n">Event</span>

<span class="n">school1</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;school1&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mi">25</span><span class="p">,</span><span class="mi">42</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">2</span>
<span class="p">)</span>
<span class="n">school2</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;school2&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mi">78</span><span class="p">,</span><span class="mi">82</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">2</span>
<span class="p">)</span>
<span class="n">school3</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;school3&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mi">92</span><span class="p">,</span><span class="mi">32</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">2</span>
<span class="p">)</span>
<span class="n">game1</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;game1&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mi">50</span><span class="p">,</span><span class="mi">84</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">14</span>
<span class="p">)</span>
<span class="n">game2</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;game2&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mi">45</span><span class="p">,</span><span class="mi">52</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">76</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">14</span>
<span class="p">)</span>
<span class="n">game3</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;game3&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mi">12</span><span class="p">,</span><span class="mi">87</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">56</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">14</span>
<span class="p">)</span>
<span class="n">game4</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;game4&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mi">52</span><span class="p">,</span><span class="mi">98</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">113</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">28</span>
<span class="p">)</span>
<span class="n">concert1</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;concert1&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">14</span>
<span class="p">)</span>
<span class="n">concert2</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;concert2&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mi">91</span><span class="p">,</span><span class="mi">92</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">28</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">14</span>
<span class="p">)</span>
<span class="n">concert3</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;concert3&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mi">62</span><span class="p">,</span><span class="mi">38</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">21</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">14</span>
<span class="p">)</span>
<span class="n">concert4</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;concert4&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mi">38</span><span class="p">,</span><span class="mi">42</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">14</span>
<span class="p">)</span>
<span class="n">bar1</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;bar1&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mi">17</span><span class="p">,</span><span class="mi">24</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">3</span>
<span class="p">)</span>
<span class="n">bar2</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;bar2&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mi">87</span><span class="p">,</span><span class="mi">13</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">4</span>
<span class="p">)</span>
<span class="n">bar3</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;bar3&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mi">52</span><span class="p">,</span><span class="mi">89</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">3</span>
<span class="p">)</span>
<span class="n">bar4</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;bar4&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mi">16</span><span class="p">,</span><span class="mi">27</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">7</span>
<span class="p">)</span>
<span class="n">bar5</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;bar5&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mi">89</span><span class="p">,</span><span class="mi">46</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">7</span>
<span class="p">)</span>
<span class="n">church</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;church&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">91</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">7</span>
<span class="p">)</span>

<span class="n">events</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">school1</span><span class="p">,</span> <span class="n">school2</span><span class="p">,</span> <span class="n">school3</span><span class="p">,</span> <span class="n">game1</span><span class="p">,</span> <span class="n">game2</span><span class="p">,</span> <span class="n">game3</span><span class="p">,</span> <span class="n">game4</span><span class="p">,</span>
    <span class="n">concert1</span><span class="p">,</span> <span class="n">concert2</span><span class="p">,</span> <span class="n">concert3</span><span class="p">,</span> <span class="n">concert4</span><span class="p">,</span>
    <span class="n">bar1</span><span class="p">,</span> <span class="n">bar2</span><span class="p">,</span> <span class="n">bar3</span><span class="p">,</span> <span class="n">bar4</span><span class="p">,</span> <span class="n">bar5</span><span class="p">,</span> <span class="n">church</span>
<span class="p">]</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="n">groups</span><span class="p">,</span> <span class="n">events</span><span class="o">=</span><span class="n">events</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">use_init_func</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">animate</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<video width="705" height="340" src="https://storage.googleapis.com/rknotvids/baseus/5.mp4" controls><p>Video Failed to Load</p>
</video><div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p>Results:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 71%" />
<col style="width: 29%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Peak</p></td>
<td><p>29%</p></td>
</tr>
<tr class="row-even"><td><p>HIT</p></td>
<td><p>56%</p></td>
</tr>
<tr class="row-odd"><td><p>Total</p></td>
<td><p>82%</p></td>
</tr>
<tr class="row-even"><td><p>Fatalities</p></td>
<td><p>0.50%</p></td>
</tr>
<tr class="row-odd"><td><p>% &gt; 70</p></td>
<td><p>39%</p></td>
</tr>
<tr class="row-even"><td><p>IFR</p></td>
<td><p>0.61%</p></td>
</tr>
<tr class="row-odd"><td><p>Days to Peak</p></td>
<td><p>77</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>We’ve attempted to tailor the event setup so that the infection curve resembles that of <a class="reference external" href="#1.-Equal">Example 1</a>. The theory is that the <span class="math notranslate nohighlight">\(R_0\)</span> measured in the early stages of a pandemic should be reflective of actual contacts, not the theoretical contacts of the model.</p>
<p>This scenario is not perfectly substitutable with Example 1, however.</p>
<p>One measure we can use to compare scenarios is the total number of interactions. We find that under the Event and Gated approaches it takes <em>more</em> contacts to result in the same level of spread.</p>
<p>Avg Number of Contacts per Subject:</p>
<p>Example 1: 50.3</p>
<p>Example 2: 52.3</p>
<p>Example 3: 53.4</p>
<p>Example 5: 65.5</p>
<p>Example 6: 75.5</p>
<p><em>Average of first 100 days across 5 sims for each scenario.</em></p>
<p>Other issues with substitutability may exist and are being explored. SIR models determine R0 in the idealized environment of Example 1 and so may not be suitable for customized environments such as this one.</p>
</div>
<div class="section" id="6.-Gates">
<h3>6. Gates<a class="headerlink" href="#6.-Gates" title="Permalink to this headline">¶</a></h3>
<p>We can further improve the real world relevance of interactions by introducing <a class="reference internal" href="concepts.html#Gates"><span class="std std-ref">gates</span></a>. Subjects are not always freely able to interact with all other people in a population. Often their movement is restricted to within certain areas. Furthermore, other people’s access into those areas is restricted.</p>
<p>Elderly people living in retirement homes or assisted living centers is an example. To simulate this, we will split <code class="docutils literal notranslate"><span class="pre">group4</span></code> into two separate groups.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">group4a</span></code></p>
<ul>
<li><p>population of 600 (2/3s of <code class="docutils literal notranslate"><span class="pre">group4</span></code>)</p></li>
<li><p>IFR of 4.2%</p></li>
<li><p>move freely throughout the entire grid as previously</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">group4b</span></code></p>
<ul>
<li><p>population of 300 (1/3rd of <code class="docutils literal notranslate"><span class="pre">group4</span></code>)</p></li>
<li><p>IFR of 7.8%</p></li>
<li><p>movement restricted to 6x6 box</p></li>
</ul>
</li>
</ul>
<p>We have also adjusted the IFR on the basis that <code class="docutils literal notranslate"><span class="pre">group4b</span></code> is likely older and also probably more frail than <code class="docutils literal notranslate"><span class="pre">group4a</span></code>. IFRs approximate those found <a class="reference external" href="https://www.publichealthontario.ca/-/media/documents/ncov/epi/2020/06/covid19-epi-case-identification-age-only-template.pdf?la=en">here</a>.</p>
<p>In addition, we will add an event specifically for the new group inside the gate.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">group4a</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;70+&#39;</span><span class="p">,</span>
    <span class="n">n</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>
    <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">ifr</span><span class="o">=</span><span class="mf">0.042</span><span class="p">,</span>
    <span class="n">mover</span><span class="o">=</span><span class="s1">&#39;local&#39;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">group4b</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;70+G&#39;</span><span class="p">,</span>
    <span class="n">n</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">n_inf</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">ifr</span><span class="o">=</span><span class="mf">0.0683</span><span class="p">,</span>
    <span class="n">mover</span><span class="o">=</span><span class="s1">&#39;local&#39;</span><span class="p">,</span>
    <span class="n">box</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span>
    <span class="n">box_is_gated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">groups</span> <span class="o">=</span> <span class="p">[</span><span class="n">group1</span><span class="p">,</span> <span class="n">group2</span><span class="p">,</span> <span class="n">group3</span><span class="p">,</span> <span class="n">group4a</span><span class="p">,</span> <span class="n">group4b</span><span class="p">]</span>

<span class="n">church2</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;church2&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">7</span>
<span class="p">)</span>

<span class="n">events_gated</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">school1</span><span class="p">,</span> <span class="n">school2</span><span class="p">,</span> <span class="n">school3</span><span class="p">,</span> <span class="n">game1</span><span class="p">,</span> <span class="n">game2</span><span class="p">,</span> <span class="n">game3</span><span class="p">,</span> <span class="n">game4</span><span class="p">,</span>
    <span class="n">concert1</span><span class="p">,</span> <span class="n">concert2</span><span class="p">,</span> <span class="n">concert3</span><span class="p">,</span> <span class="n">concert4</span><span class="p">,</span>
    <span class="n">bar1</span><span class="p">,</span> <span class="n">bar2</span><span class="p">,</span> <span class="n">bar3</span><span class="p">,</span> <span class="n">bar4</span><span class="p">,</span> <span class="n">bar5</span><span class="p">,</span>
    <span class="n">church</span><span class="p">,</span> <span class="n">church2</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Now, such elderly populations are entirely sealed of from the rest of the world. In fact, they are often visited by family members or friends. We can mimick this with the use of a Travel object.</p>
<p>In this sim, at least one person will enter into the <code class="docutils literal notranslate"><span class="pre">group4b</span></code> gate for a day only. And this will repeat every day of the sim.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot.events</span> <span class="kn">import</span> <span class="n">Travel</span>

<span class="n">visit</span> <span class="o">=</span> <span class="n">Travel</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;visit&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">capacity</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">recurring</span><span class="o">=</span><span class="mi">1</span>
<span class="p">)</span>
<span class="n">events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">visit</span><span class="p">)</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="n">groups</span><span class="p">,</span> <span class="n">events</span><span class="o">=</span><span class="n">events</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">use_init_func</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">animate</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<video width="705" height="340" src="https://storage.googleapis.com/rknotvids/baseus/6.mp4" controls><p>Video Failed to Load</p>
</video><div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p>Results:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 71%" />
<col style="width: 29%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Peak</p></td>
<td><p>30%</p></td>
</tr>
<tr class="row-even"><td><p>HIT</p></td>
<td><p>62%</p></td>
</tr>
<tr class="row-odd"><td><p>Total</p></td>
<td><p>83%</p></td>
</tr>
<tr class="row-even"><td><p>Fatalities</p></td>
<td><p>0.52%</p></td>
</tr>
<tr class="row-odd"><td><p>% &gt; 70</p></td>
<td><p>40%</p></td>
</tr>
<tr class="row-even"><td><p>IFR</p></td>
<td><p>0.62%</p></td>
</tr>
<tr class="row-odd"><td><p>Days to Peak</p></td>
<td><p>66</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Again, the gated structure is intended to mimic <a class="reference external" href="#1.-Equal">Example 1</a>, <a class="reference external" href="#3.-Social">Example 3</a>, and <a class="reference external" href="#5.-Events">Example 5</a>.</p>
<p>The use for Events and Gates will become clear when we explore the impact of <a class="reference external" href="#Policy">Policy Decisions</a>.</p>
</div>
<div class="section" id="7.-Pre-Immunity-with-Events-and-Gates">
<h3>7. Pre-Immunity with Events and Gates<a class="headerlink" href="#7.-Pre-Immunity-with-Events-and-Gates" title="Permalink to this headline">¶</a></h3>
<p>Now we can see how pre-immunity might impact viral spread in a population with more heterogeneous interactions.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">group2</span><span class="p">[</span><span class="s1">&#39;susf&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">.</span><span class="mi">8</span>
<span class="n">group3</span><span class="p">[</span><span class="s1">&#39;susf&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">.</span><span class="mi">65</span>
<span class="n">groups</span> <span class="o">=</span> <span class="p">[</span><span class="n">group1</span><span class="p">,</span> <span class="n">group2</span><span class="p">,</span> <span class="n">group3</span><span class="p">,</span> <span class="n">group4a</span><span class="p">,</span> <span class="n">group4b</span><span class="p">]</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="n">groups</span><span class="p">,</span> <span class="n">events</span><span class="o">=</span><span class="n">events</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">use_init_func</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">animate</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<video width="705" height="340" src="https://storage.googleapis.com/rknotvids/baseus/7.mp4" controls><p>Video Failed to Load</p>
</video><div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p>Results:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 71%" />
<col style="width: 29%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Peak</p></td>
<td><p>20%</p></td>
</tr>
<tr class="row-even"><td><p>HIT</p></td>
<td><p>42%</p></td>
</tr>
<tr class="row-odd"><td><p>Total</p></td>
<td><p>62%</p></td>
</tr>
<tr class="row-even"><td><p>Fatalities</p></td>
<td><p>0.47%</p></td>
</tr>
<tr class="row-odd"><td><p>% &gt; 70</p></td>
<td><p>37%</p></td>
</tr>
<tr class="row-even"><td><p>IFR</p></td>
<td><p>0.76%</p></td>
</tr>
<tr class="row-odd"><td><p>Days to Peak</p></td>
<td><p>86</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Similar to <a class="reference external" href="#4.-Pre-Existing-Immunity">Example 4</a>, pre-existing immunity flattens the curve somewhat and results in a modest decrease in fatalities (even with an abnormally high IFR in this case).</p>
</div>
<div class="section" id="8.-Self-Aware-Social-Distancing">
<h3>8. Self Aware Social Distancing<a class="headerlink" href="#8.-Self-Aware-Social-Distancing" title="Permalink to this headline">¶</a></h3>
<p>In a self-aware population, we can also incorporate an assumption that certain members of the population will implement social distancing practices even in the absence of prescribed government policy. For example, individuals might wear masks or face shields while in public.</p>
<p>This is implemented via a SocialDistancing object, which reduces the transmission factor of the subjects in the applicable group.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot.events</span> <span class="kn">import</span> <span class="n">SocialDistancing</span> <span class="k">as</span> <span class="n">SD</span>

<span class="n">sd</span> <span class="o">=</span> <span class="n">SD</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;6-feet&#39;</span><span class="p">,</span> <span class="n">tmfs</span><span class="o">=</span><span class="p">[</span><span class="o">.</span><span class="mi">975</span><span class="p">,</span><span class="o">.</span><span class="mi">95</span><span class="p">,</span><span class="o">.</span><span class="mi">75</span><span class="p">,</span><span class="o">.</span><span class="mi">5</span><span class="p">],</span> <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
<span class="n">events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sd</span><span class="p">)</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="n">groups</span><span class="p">,</span> <span class="n">events</span><span class="o">=</span><span class="n">events</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">use_init_func</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">animate</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<video width="705" height="340" src="https://storage.googleapis.com/rknotvids/baseus/8.mp4" controls><p>Video Failed to Load</p>
</video><div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p>Results:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 71%" />
<col style="width: 29%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Peak</p></td>
<td><p>28%</p></td>
</tr>
<tr class="row-even"><td><p>HIT</p></td>
<td><p>55%</p></td>
</tr>
<tr class="row-odd"><td><p>Total</p></td>
<td><p>82%</p></td>
</tr>
<tr class="row-even"><td><p>Fatalities</p></td>
<td><p>0.51%</p></td>
</tr>
<tr class="row-odd"><td><p>% &gt; 70</p></td>
<td><p>42%</p></td>
</tr>
<tr class="row-even"><td><p>IFR</p></td>
<td><p>0.62%</p></td>
</tr>
<tr class="row-odd"><td><p>Days to Peak</p></td>
<td><p>81</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Social distancing does flatten the infection curve, resulting in a modest decrease in peak infections and HIT and delaying the peak slightly. Fatalities are also reduced.</p>
</div>
<div class="section" id="9.-Self-Aware-Social-Distancing-+-Pre-Immunity">
<h3>9. Self Aware Social Distancing + Pre-Immunity<a class="headerlink" href="#9.-Self-Aware-Social-Distancing-+-Pre-Immunity" title="Permalink to this headline">¶</a></h3>
<p>In a self-aware population, we can also incorporate an assumption that certain members of the population will implement social distancing practices (even in the absence of prescribed government policy). For example, individuals might wear masks or face shields while in public.</p>
<p>This is implemented via a SocialDistancing object, which reduces the transmission factor of the subjects in the applicable group.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot.events</span> <span class="kn">import</span> <span class="n">SocialDistancing</span> <span class="k">as</span> <span class="n">SD</span>

<span class="n">sd</span> <span class="o">=</span> <span class="n">SD</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;6-feet&#39;</span><span class="p">,</span> <span class="n">tmfs</span><span class="o">=</span><span class="p">[</span><span class="o">.</span><span class="mi">975</span><span class="p">,</span><span class="o">.</span><span class="mi">95</span><span class="p">,</span><span class="o">.</span><span class="mi">75</span><span class="p">,</span><span class="o">.</span><span class="mi">5</span><span class="p">],</span> <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
<span class="n">events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sd</span><span class="p">)</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="n">groups</span><span class="p">,</span> <span class="n">events</span><span class="o">=</span><span class="n">events</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">use_init_func</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">animate</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<video width="705" height="340" src="https://storage.googleapis.com/rknotvids/baseus/9.mp4" controls><p>Video Failed to Load</p>
</video><div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p>Results:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 71%" />
<col style="width: 29%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Peak</p></td>
<td><p>14%</p></td>
</tr>
<tr class="row-even"><td><p>HIT</p></td>
<td><p>36%</p></td>
</tr>
<tr class="row-odd"><td><p>Total</p></td>
<td><p>60%</p></td>
</tr>
<tr class="row-even"><td><p>Fatalities</p></td>
<td><p>0.33%</p></td>
</tr>
<tr class="row-odd"><td><p>% &gt; 70</p></td>
<td><p>27%</p></td>
</tr>
<tr class="row-even"><td><p>IFR</p></td>
<td><p>0.55%</p></td>
</tr>
<tr class="row-odd"><td><p>Days to Peak</p></td>
<td><p>92</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Here we see that just the combination of pre-immunity and a modest amount of social distancing reduces all aspects of the infection curve.</p>
<p>Note that, despite the continued visits from outside, an outbreak in the 70+G group did <em>not</em> occur until <em>after</em> the social distancing practices were ceased. This outbreak resulted in a small surge in cases (visible in a rebound in the curve at ~100 days) and a tripling in fatalities in a short period.</p>
<p>So social distancing practices were helpful, but only so long as they were maintained.</p>
</div>
<div class="section" id="10.-Isolation">
<h3>10. Isolation<a class="headerlink" href="#10.-Isolation" title="Permalink to this headline">¶</a></h3>
<p>TBD</p>
</div>
</div>
<div class="section" id="Policy">
<h2>Policy<a class="headerlink" href="#Policy" title="Permalink to this headline">¶</a></h2>
<p>With a more realistic model of subject interaction, we can begin to experiment with the impact of different policy measures.</p>
<p><em>RKnot</em> can simulate policy measures via <code class="docutils literal notranslate"><span class="pre">Restriction</span></code>, <code class="docutils literal notranslate"><span class="pre">SocialDistancing</span></code>, and <code class="docutils literal notranslate"><span class="pre">Quarantine</span></code> objects. Further details <a class="reference internal" href="concepts.html#Restrictions"><span class="std std-ref">here</span></a>.</p>
<p>The simulations are based on <a class="reference external" href="#6.-Gates">this scenario</a> and so the impact of the policy measures contemplated should be considered relative to that scenario.</p>
<p>The structure can be imported as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot.sims.baseus</span> <span class="kn">import</span> <span class="n">params</span><span class="p">,</span> <span class="n">events_gated</span><span class="p">,</span> <span class="n">groups_gated</span>
</pre></div>
</div>
<div class="section" id="1.-Restrict-Large-Gatherings">
<h3>1. Restrict Large Gatherings<a class="headerlink" href="#1.-Restrict-Large-Gatherings" title="Permalink to this headline">¶</a></h3>
<p>We’ll start by simply restricting large gathers, which for this sim is any event with 10+ capacity (0.1% of the entire population). The restrictions will last for 120 days.</p>
<p>When considering capacity, remember that a 100,000-seat stadium in a 10 million person catchment represents 1% of the population.</p>
<p>We assume this policy are implemented on day 30, when the population finally realizes there is a pandemic and government has had time to implement prevention measures.</p>
<p>The restriction will last for 120 days.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot.events</span> <span class="kn">import</span> <span class="n">Restriction</span>

<span class="n">large_gatherings</span> <span class="o">=</span> <span class="n">Restriction</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;large&#39;</span><span class="p">,</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">criteria</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;capacity&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
<span class="p">)</span>
<span class="n">events_w_res</span> <span class="o">=</span> <span class="n">events_gated</span> <span class="o">+</span> <span class="p">[</span><span class="n">large_gatherings</span><span class="p">]</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="n">groups_gated</span><span class="p">,</span> <span class="n">events</span><span class="o">=</span><span class="n">events_w_res</span><span class="p">,</span> <span class="n">details</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">use_init_func</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">animate</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<video width="705" height="340" src="https://storage.googleapis.com/rknotvids/baseus/large.mp4" controls><p>Video Failed to Load</p>
</video><div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p>Results:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 71%" />
<col style="width: 29%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Peak</p></td>
<td><p>15%</p></td>
</tr>
<tr class="row-even"><td><p>HIT</p></td>
<td><p>28%</p></td>
</tr>
<tr class="row-odd"><td><p>Total</p></td>
<td><p>73%</p></td>
</tr>
<tr class="row-even"><td><p>Fatalities</p></td>
<td><p>0.45%</p></td>
</tr>
<tr class="row-odd"><td><p>% &gt; 70</p></td>
<td><p>38%</p></td>
</tr>
<tr class="row-even"><td><p>IFR</p></td>
<td><p>0.62%</p></td>
</tr>
<tr class="row-odd"><td><p>Days to Peak</p></td>
<td><p>69</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>We see that the curve is flattened significantly during the restriction period. Infections have a much lower peak, BUT also a much longer tail (evident by the still high relatively high level of total infections).</p>
<p>This results as the event restriction is lifted, which leads to a slower rate of decline of the virus.</p>
</div>
<div class="section" id="2.-Social-Distancing">
<h3>2. Social Distancing<a class="headerlink" href="#2.-Social-Distancing" title="Permalink to this headline">¶</a></h3>
<p>We can mimick the implementation of Social Distancing policies in certain settings via the <code class="docutils literal notranslate"><span class="pre">SocialDistancing</span></code> object. Mask wearing, hand sanitizing, and 6-foot perimeters all provide varying levels of protection.</p>
<p>It is hard to estimate the degree of protection from each, and even harder in combination. For instance, <a class="reference external" href="https://pubmed.ncbi.nlm.nih.gov/23498357/">this study</a> found anywhere between a 1.1- and 55-fold reduction in exposure to influenza with varying mask designs.</p>
<p>So we provide <code class="docutils literal notranslate"><span class="pre">tmfs</span></code> here for illustration purposes only, attempting to catch all social distancing practices. We also provide different <code class="docutils literal notranslate"><span class="pre">tmfs</span></code> for the different age groups, meant to simulate adherence to policy.</p>
<p>The policy measure is implemented on day 30 and maintained for 120 days.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot.events</span> <span class="kn">import</span> <span class="n">SocialDistancing</span> <span class="k">as</span> <span class="n">SD</span>

<span class="n">sd</span> <span class="o">=</span> <span class="n">SD</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">tmfs</span><span class="o">=</span><span class="p">[</span><span class="o">.</span><span class="mi">8</span><span class="p">,</span><span class="o">.</span><span class="mi">8</span><span class="p">,</span><span class="o">.</span><span class="mi">7</span><span class="p">,</span><span class="o">.</span><span class="mi">65</span><span class="p">,</span><span class="o">.</span><span class="mi">5</span><span class="p">],</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">120</span>
<span class="p">)</span>
<span class="n">events_w_res</span> <span class="o">=</span> <span class="n">events_gated</span> <span class="o">+</span> <span class="p">[</span><span class="n">sd</span><span class="p">]</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="n">groups_gated</span><span class="p">,</span> <span class="n">events</span><span class="o">=</span><span class="n">events_w_res</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">use_init_func</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">animate</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<video width="705" height="340" src="https://storage.googleapis.com/rknotvids/baseus/policy_sd.mp4" controls><p>Video Failed to Load</p>
</video><div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p>Results:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 71%" />
<col style="width: 29%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Peak</p></td>
<td><p>8%</p></td>
</tr>
<tr class="row-even"><td><p>HIT</p></td>
<td><p>24%</p></td>
</tr>
<tr class="row-odd"><td><p>Total</p></td>
<td><p>68%</p></td>
</tr>
<tr class="row-even"><td><p>Fatalities</p></td>
<td><p>0.39%</p></td>
</tr>
<tr class="row-odd"><td><p>% &gt; 70</p></td>
<td><p>33%</p></td>
</tr>
<tr class="row-even"><td><p>IFR</p></td>
<td><p>0.57%</p></td>
</tr>
<tr class="row-odd"><td><p>Days to Peak</p></td>
<td><p>96</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>We can see that social distancing is certainly the most effective approach in terms of “flattening the curve” with the lowest HIT and peak infections seen thus far.</p>
<p>The social distancing methods are successful in preventing an outbreak among the 70+G group until ~120 days, well after peak infections are reach.</p>
<p>However, consistent with the <a class="reference external" href="#1.-Restrict-Large-Gatherings">restriction on large gatherings</a>, the infection curve has protracted tail coinciding with the restriction being lifted. Over an extended time frame, the virus still infects a fairly large portion of the population.</p>
</div>
<div class="section" id="3.-Restrict-Elderly-Visits">
<h3>3. Restrict Elderly Visits<a class="headerlink" href="#3.-Restrict-Elderly-Visits" title="Permalink to this headline">¶</a></h3>
<p>We can restrict events by name by passing <code class="docutils literal notranslate"><span class="pre">name</span></code> key to <code class="docutils literal notranslate"><span class="pre">criteria</span></code>. We can do this to restrict the travel event to the <code class="docutils literal notranslate"><span class="pre">70+G</span></code> area.</p>
<p>The policy measure is implemented on day 30 and maintained for another 120 days. There will be no other restrictions.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">no_visits</span> <span class="o">=</span> <span class="n">Restriction</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;no_visits&#39;</span><span class="p">,</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
    <span class="n">duration</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">criteria</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;visit&#39;</span><span class="p">}</span>
<span class="p">)</span>
<span class="n">events_w_res</span> <span class="o">=</span> <span class="n">events_gated</span> <span class="o">+</span> <span class="p">[</span><span class="n">no_visits</span><span class="p">]</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="n">groups_gated</span><span class="p">,</span> <span class="n">events</span><span class="o">=</span><span class="n">events_w_res</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">use_init_func</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">animate</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<video width="705" height="340" src="https://storage.googleapis.com/rknotvids/baseus/no_visits.mp4" controls><p>Video Failed to Load</p>
</video><div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p>Results:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 71%" />
<col style="width: 29%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Peak</p></td>
<td><p>27%</p></td>
</tr>
<tr class="row-even"><td><p>HIT</p></td>
<td><p>54%</p></td>
</tr>
<tr class="row-odd"><td><p>Total</p></td>
<td><p>80%</p></td>
</tr>
<tr class="row-even"><td><p>Fatalities</p></td>
<td><p>0.29%</p></td>
</tr>
<tr class="row-odd"><td><p>% &gt; 70</p></td>
<td><p>17%</p></td>
</tr>
<tr class="row-even"><td><p>IFR</p></td>
<td><p>0.36%</p></td>
</tr>
<tr class="row-odd"><td><p>Days to Peak</p></td>
<td><p>77</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>By simply quarantining the elderly, we see the most dramatic reduction in fatalities of any scenario thus far. An outbreak NEVER occurs in the 70+G gated area, even AFTER the policy restrictions are lifted, because the virus has already been eradicated by that time.</p>
<p>We can see here that allowing a <em>high level of infection</em> among the <strong>least susceptible</strong> has resulted in a <em>low level of fatalities</em> among the <strong>most susceptible</strong>.</p>
<p>This is a controversial approach and does have difficult ethical implications, but its power to reduce death cannot be ignored.</p>
</div>
<div class="section" id="4.-Social-Distancing-and-Restrict-Elderly-Visits-and-Large-Gatherings">
<h3>4. Social Distancing and Restrict Elderly Visits and Large Gatherings<a class="headerlink" href="#4.-Social-Distancing-and-Restrict-Elderly-Visits-and-Large-Gatherings" title="Permalink to this headline">¶</a></h3>
<p>What happens if we combine the three approaches above?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">large_gatherings</span> <span class="o">=</span> <span class="n">Restriction</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;large&#39;</span><span class="p">,</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">criteria</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;capacity&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
<span class="p">)</span>
<span class="n">no_visits</span> <span class="o">=</span> <span class="n">Restriction</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;no_visits&#39;</span><span class="p">,</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
    <span class="n">duration</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">criteria</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;visit&#39;</span><span class="p">}</span>
<span class="p">)</span>
<span class="n">sd</span> <span class="o">=</span> <span class="n">SD</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">tmfs</span><span class="o">=</span><span class="p">[</span><span class="o">.</span><span class="mi">8</span><span class="p">,</span><span class="o">.</span><span class="mi">8</span><span class="p">,</span><span class="o">.</span><span class="mi">7</span><span class="p">,</span><span class="o">.</span><span class="mi">65</span><span class="p">,</span><span class="o">.</span><span class="mi">5</span><span class="p">],</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">120</span>
<span class="p">)</span>
<span class="n">events_w_res</span> <span class="o">=</span> <span class="n">events_gated</span> <span class="o">+</span> <span class="p">[</span><span class="n">large_gatherings</span><span class="p">,</span> <span class="n">no_visits</span><span class="p">,</span> <span class="n">sd</span><span class="p">]</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="n">groups_gated</span><span class="p">,</span> <span class="n">events</span><span class="o">=</span><span class="n">events_w_res</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">use_init_func</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">animate</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<video width="705" height="340" src="https://storage.googleapis.com/rknotvids/baseus/sd_%26_no_large_%26_no_visits.mp4" controls><p>Video Failed to Load</p>
</video><div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p>Results:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 71%" />
<col style="width: 29%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Peak</p></td>
<td><p>24%</p></td>
</tr>
<tr class="row-even"><td><p>HIT</p></td>
<td><p>55%</p></td>
</tr>
<tr class="row-odd"><td><p>Total</p></td>
<td><p>82%</p></td>
</tr>
<tr class="row-even"><td><p>Fatalities</p></td>
<td><p>0.42%</p></td>
</tr>
<tr class="row-odd"><td><p>% &gt; 70</p></td>
<td><p>36%</p></td>
</tr>
<tr class="row-even"><td><p>IFR</p></td>
<td><p>0.51%</p></td>
</tr>
<tr class="row-odd"><td><p>Days to Peak</p></td>
<td><p>199</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Incredibly, the combination of restrictions leads to worse outcomes than any of the individual restrictions on their own.</p>
<p>While in place, the restrictions do tightly contain infections and signficantly delay the onset of the pandemic. But once they are lifted, the virus spreads unabated through a still highly susceptible population.</p>
<p>i.e. Not enough subjects have achieved immunity by the time the restrictions are lifted.</p>
</div>
<div class="section" id="5.-Quarantine">
<h3>5. Quarantine<a class="headerlink" href="#5.-Quarantine" title="Permalink to this headline">¶</a></h3>
<p>We can even mimick the impact of quarantines via the Quarantine object.</p>
<p>Here we show the impact of a 30-day quarantine for all groups in the Sim. We include a restriction on visits to the elderly during the quarantine.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot.events</span> <span class="kn">import</span> <span class="n">Quarantine</span>

<span class="n">quarantine</span> <span class="o">=</span> <span class="n">Quarantine</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">duration</span><span class="o">=</span><span class="mi">30</span>
<span class="p">)</span>
<span class="n">no_visits</span> <span class="o">=</span> <span class="n">Restriction</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;no_visits&#39;</span><span class="p">,</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
    <span class="n">duration</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">criteria</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;visit&#39;</span><span class="p">}</span>
<span class="p">)</span>

<span class="n">events_w_res</span> <span class="o">=</span> <span class="n">events_gated</span> <span class="o">+</span> <span class="p">[</span><span class="n">quarantine</span><span class="p">,</span> <span class="n">no_visits</span><span class="p">]</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="n">groups_gated</span><span class="p">,</span> <span class="n">events</span><span class="o">=</span><span class="n">events_w_res</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">use_init_func</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">animate</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<video width="705" height="340" src="https://storage.googleapis.com/rknotvids/baseus/quarantine.mp4" controls><p>Video Failed to Load</p>
</video><div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p>Results:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 71%" />
<col style="width: 29%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Peak</p></td>
<td><p>1%</p></td>
</tr>
<tr class="row-even"><td><p>HIT</p></td>
<td><p>1%</p></td>
</tr>
<tr class="row-odd"><td><p>Total</p></td>
<td><p>1%</p></td>
</tr>
<tr class="row-even"><td><p>Fatalities</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-odd"><td><p>% &gt; 70</p></td>
<td><p>0%</p></td>
</tr>
<tr class="row-even"><td><p>IFR</p></td>
<td><p>0.00%</p></td>
</tr>
<tr class="row-odd"><td><p>Days to Peak</p></td>
<td><p>32</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The pandemic never materializes in this simulation. The quarantine eradicates the virus swiftly upon implementation.</p>
<p>This is an interesting result. This obvioulsy did not occur in many places in the real world that took this approach. There are several possible reasons worth considering:</p>
<ul class="simple">
<li><p>Random Variation: if you run this simulation multiple times, you will note some sims where spread does occur.</p></li>
<li><p>Scale: a larger simulation would increase the possibility that a very small number of subjects can continue to pass around the virus while it is muted in the broader population</p></li>
<li><p>Adherence: real-world adherence to the implemented policies was much lower than this simulation suggests.</p></li>
<li><p>Inconsistency: some areas implemented strict quarantines while others did not, and there was mixing among those populations.</p></li>
</ul>
</div>
<div class="section" id="6.-Quarantine-with-Adherence">
<h3>6. Quarantine with Adherence<a class="headerlink" href="#6.-Quarantine-with-Adherence" title="Permalink to this headline">¶</a></h3>
<p>We can investigate the impact of low adherence to quarantine requirements by setting the <code class="docutils literal notranslate"><span class="pre">adherence</span></code> property of the <code class="docutils literal notranslate"><span class="pre">Quarantine</span></code> object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rknot.events</span> <span class="kn">import</span> <span class="n">Quarantine</span>

<span class="n">quarantine</span> <span class="o">=</span> <span class="n">Quarantine</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">duration</span><span class="o">=</span><span class="mi">30</span>
<span class="p">)</span>
<span class="n">no_visits</span> <span class="o">=</span> <span class="n">Restriction</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;no_visits&#39;</span><span class="p">,</span> <span class="n">start_tick</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
    <span class="n">duration</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">criteria</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;visit&#39;</span><span class="p">}</span>
<span class="p">)</span>

<span class="n">events_w_res</span> <span class="o">=</span> <span class="n">events_gated</span> <span class="o">+</span> <span class="p">[</span><span class="n">quarantine</span><span class="p">,</span> <span class="n">no_visits</span><span class="p">]</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Sim</span><span class="p">(</span><span class="n">groups</span><span class="o">=</span><span class="n">groups_gated</span><span class="p">,</span> <span class="n">events</span><span class="o">=</span><span class="n">events_w_res</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">(</span><span class="n">sim</span><span class="p">,</span> <span class="n">use_init_func</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">animate</span><span class="o">.</span><span class="n">to_html5_video</span><span class="p">()</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">chart_params</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;use_init_func&#39;: True,
 &#39;show_intro&#39;: True,
 &#39;dotsize&#39;: 0.1,
 &#39;h_base&#39;: 10,
 &#39;interval&#39;: 100.0}
</pre></div></div>
</div>
<video width="705" height="295" src="https://storage.googleapis.com/rknotvids/baseus/quarantine_w_ad.mp4" controls><p>Video Failed to Load</p>
</video><p>With just 10% of the population ignoring the quarantine requirements, the virus spreads almost as though there was no quarantine at all.</p>
<video width="705" height="340" src="https://storage.googleapis.com/rknotvids/baseus/fulsome.mp4" controls><p>Video Failed to Load</p>
</video><p>The virus barely survives for the first 6-months of the outbreak, then as per other scenarios, once restrictions are lifted an outbreak occurs. Still, when the outbreak does occur, it is characterized by one of the lowest peaks and HITs in our analysis (due in part to the pre-immmunity of some of the groups).</p>
<p>And it achieves the lowest fatality rate of the group, mainly by restricting access to the elderly population for the duration of the pandemic and ensuring an outbreak never occurs in that region.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="load.html" class="btn btn-neutral float-right" title="Dynamic Transmission Risk" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sizing.html" class="btn btn-neutral float-left" title="Sizing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2021 Ryan Skene. All rights reserved.

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>